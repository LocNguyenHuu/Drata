<!DOCTYPE html>
<meta charset="utf-8">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Atombomb</title>

    <link rel="stylesheet" type="text/css" href="content/style/core/normalize.css" />
    <link rel="stylesheet" type="text/css" href="content/style/core/foundation.css" />
    <link rel="stylesheet" type="text/css" href="content/style/dashboard.css" />
    <link rel="stylesheet" type="text/css" href="content/style/line-graph.css" />
</head>
<body>
<div class="row">
    <div id="dashboard" class="small-4 columns">
        
            <!-- <div class="row">
                     <div class="small-8 columns">
                         <h1 data-bind="text:name"></h1>
                     </div>
                     <div class="small-4 columns">
                         <button class="button small" data-reveal-id="myModal">Add Widget</button>
                     </div>
                 </div> -->
            <!--  <div class="row widgets js-sortable" data-bind="template:{ name: 'widget-template',foreach:widgets, afterRender:loadWidget }">
                  </div> -->
            <ul class="small-block-grid-1 js-sortable" data-bind="template:{ name: 'widget-template',foreach:widgets, afterRender:loadWidget }">
            </ul>
        
    </div>
    <div id="graphBuilder" class="small-8 columns">
    <fieldset>
        <legend>Slice Data</legend>
        <ul class="large-block-grid-2 small-block-grid-1">
            <li><select data-bind="options:dataKeys, optionsCaption:'choose Data Key', value: selectedDataKey"></select></li>
            <!-- ko foreach: selectedActions -->
            <li>
            <div class="row">
                <div class=" columns" data-bind="css:{ 'small-6': $data.type() === 'selection', 'small-12': $data.type() === 'action'} ">
                    <select data-bind="options:($data.type() === 'selection')? $parent.selections : availableActions, optionsCaption: 'Choose', value: $data.val"></select>
                </div>
                <!-- ko if: $data.type() === 'selection' -->
                <div class="small-6 columns">
                    <!-- ko if:  $data.val() !== 'timestamp' -->
                    <input type="checkbox" data-bind="checked: $data.useValue"></input>
                    <!-- /ko -->
                    <!-- ko if:  $data.val() === 'timestamp' -->
                    <select data-bind="optionsCaption: 'choose', value : $data.identifier">
                    <option value="extent">extent</option>
                    <option value="value">value</option>
                    </select>
                    <!-- ko if: $data.extentValueVisible() -->
                    <input type="text" data-bind="value: $data.extentValue"/>    
                    <!-- /ko -->       
                    <!-- /ko -->
                </div>
                <!-- /ko -->
            </div>
            
             </li>
            <!-- /ko -->
            <li data-bind="visible: selectedActions().length > 0"><button class="button success tiny" data-bind="click:addNextSelectedAction">Add</button> &nbsp;<button class="button secondary tiny" data-bind="click:removePreviousClause">Rem</button></li>
        </ul>
    </fieldset>
            
        <div class="row">
            <div class="small-12 columns">
                <button data-bind="click:notifyWidget,text:addUpdateBtnText"></button>
                &nbsp;<button class="button secondary" data-bind="click:widgetCancel">Cancel</button>
            </div>
        </div>
        <div class="row">
            <div class="small-6 columns">
                <textarea style="height:300px" data-bind="text:jsonData"></textarea>    
            </div>
            <div class="small-6 columns">
                <textarea style="height:300px" data-bind="text:jsonFormattedData"></textarea>
            </div>
        </div>
    </div>
</div>
   

   <!--  <div id="myModal" class="reveal-modal">
        <a class="close-reveal-modal">&#215;</a> -->
        
   <!--  </div> -->

    <script type="text/html" id="widget-template">
        
        <li>
            <div class="widget-wrapper">
                <div class="handle">
                    <div class="row collapse">
                        <div class="small-6 columns" data-bind="html:name">
                        </div>
                        <div class="small-6 columns">
                            <a data-bind="click:editWidget">Edit</a>
                        </div>
                    </div>
                </div>
                <div data-bind="attr :{id: 'widget'+ ($index()+1)}" class="widget-content">
                    <svg></svg>
                </div>
            </div>
        </li>
    </script>
    <script type="text/javascript" src="content/js/global.js"></script>
    <script type="text/javascript" src="content/foundation/js/vendor/jquery.js"></script>
    <script type="text/javascript" src="content/js/lib/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="content/js/lib/d3.v3.js"></script>
    <script type="text/javascript" src="content/js/sortable.js"></script>
    <script type="text/javascript" src="content/js/lib/knockout-2.2.1.js"></script>
    <script type="text/javascript" src="content/js/lib/underscore-min.js"></script>
    <script type="text/javascript" src="content/js/dashboard.js"></script>
    <script type="text/javascript" src="content/js/test.js"></script>
    
<!--    <script type="text/javascript" src="content/foundation/js/foundation/foundation.js"></script>-->
<!--    <script type="text/javascript" src="content/foundation/js/foundation/foundation.reveal.js"></script>-->
    <script type="text/javascript" src="content/js/d3.line.js"></script>
    <script type="text/javascript">
        (function (root) {
            var dashboard = new atombomb.web.Dashboard();
            ko.applyBindings(dashboard, document.getElementById('dashboard'));
            root.atombomb.namespace('web').extend({
                dashboard: dashboard
            });
            var sAGenerator = new atombomb.web.SAGenerator();
            ko.applyBindings(sAGenerator, document.getElementById('graphBuilder'));
            root.atombomb.namespace('web').extend({
                sAGenerator: sAGenerator
            });
           // $(document).foundation();
        })(this);
    </script>
</body>
</html>
