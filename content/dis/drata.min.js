/*! drata 23-11-2014 */
d3=function(){function a(a){return null!=a&&!isNaN(a)}function c(a){return a.length}function d(a){for(var b=1;a*b%1;)b*=10;return b}function e(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function f(){}function g(){}function h(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function i(){}function j(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new f;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function k(){jg.event.stopPropagation(),jg.event.preventDefault()}function l(){for(var a,b=jg.event;a=b.sourceEvent;)b=a;return b}function m(a,b){function c(){a.on(b,null)}a.on(b,function(){k(),c()},!0),setTimeout(c,0)}function n(a){for(var b=new i,c=0,d=arguments.length;++c<d;)b[arguments[c]]=j(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=jg.event;e.target=a,jg.event=e,b[e.type].apply(c,d)}finally{jg.event=f}}},b}function o(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>sg&&(lg.scrollX||lg.scrollY)){c=jg.select(kg.body).append("svg").style("position","absolute").style("top",0).style("left",0);var e=c[0][0].getScreenCTM();sg=!(e.f||e.e),c.remove()}return sg?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function p(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function q(a){return Array.prototype.slice.call(a)}function r(a){return vg(a,Bg),a}function s(a){return function(){return wg(a,this)}}function t(a){return function(){return xg(a,this)}}function u(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=jg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function v(a){return a.trim().replace(/\s+/g," ")}function w(a){return new RegExp("(?:^|\\s+)"+jg.requote(a)+"(?:\\s+|$)","g")}function x(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=a.trim().split(/\s+/).map(y);var e=a.length;return"function"==typeof b?d:c}function y(a){var b=w(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",v(e+" "+a))):c.setAttribute("class",v(e.replace(b," ")))}}function z(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function A(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function B(a){return{__data__:a}}function C(a){return function(){return Ag(this,a)}}function D(a){return arguments.length||(a=jg.ascending),function(b,c){return!b-!c||a(b.__data__,c.__data__)}}function E(){}function F(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,tg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+jg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=G;h>0&&(a=a.substring(0,h));var j=Eg.get(a);return j&&(a=j,i=H),h?b?e:d:b?E:f}function G(a,b){return function(c){var d=jg.event;jg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{jg.event=d}}}function H(a,b){var c=G(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function I(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function J(a){return vg(a,Fg),a}function K(){}function L(a,b,c){return new M(a,b,c)}function M(a,b,c){this.h=a,this.s=b,this.l=c}function N(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a%=360,0>a&&(a+=360),b=0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,cb(e(a+120),e(a),e(a-120))}function O(a){return a>0?1:0>a?-1:0}function P(a){return Math.acos(Math.max(-1,Math.min(1,a)))}function Q(a){return a>1?Lg/2:-1>a?-Lg/2:Math.asin(a)}function R(a){return(Math.exp(a)-Math.exp(-a))/2}function S(a){return(Math.exp(a)+Math.exp(-a))/2}function T(a){return(a=Math.sin(a/2))*a}function U(a,b,c){return new V(a,b,c)}function V(a,b,c){this.h=a,this.c=b,this.l=c}function W(a,b,c){return X(c,Math.cos(a*=Ng)*b,Math.sin(a)*b)}function X(a,b,c){return new Y(a,b,c)}function Y(a,b,c){this.l=a,this.a=b,this.b=c}function Z(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=_(e)*Rg,d=_(d)*Sg,f=_(f)*Tg,cb(bb(3.2404542*e-1.5371385*d-.4985314*f),bb(-.969266*e+1.8760108*d+.041556*f),bb(.0556434*e-.2040259*d+1.0572252*f))}function $(a,b,c){return U(Math.atan2(c,b)*Og,Math.sqrt(b*b+c*c),a)}function _(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function ab(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function bb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function cb(a,b,c){return new db(a,b,c)}function db(a,b,c){this.r=a,this.g=b,this.b=c}function eb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function fb(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(jb(e[0]),jb(e[1]),jb(e[2]))}return(f=Wg.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,i=a.charAt(3),i+=i):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),i=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),i=parseInt(i,16)),b(g,h,i))}function gb(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):e=d=0,L(d,e,i)}function hb(a,b,c){a=ib(a),b=ib(b),c=ib(c);var d=ab((.4124564*a+.3575761*b+.1804375*c)/Rg),e=ab((.2126729*a+.7151522*b+.072175*c)/Sg),f=ab((.0193339*a+.119192*b+.9503041*c)/Tg);return X(116*e-16,500*(d-e),200*(e-f))}function ib(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function jb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function kb(a){return"function"==typeof a?a:function(){return a}}function lb(a){return a}function mb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function nb(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=jg.xhr(a,b,f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g.row(c)}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(h).join(a)}function h(a){return i.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var i=new RegExp('["'+a+"\n]"),j=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=i)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<i;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;i>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==j)continue;return a.substring(b,k-h)}return a.substring(b)}for(var d,e,f={},g={},h=[],i=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();(!b||(m=b(m,l++)))&&h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new g,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(h).join(a)].concat(b.map(function(b){return e.map(function(a){return h(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c}function ob(){for(var a,b=Date.now(),c=_g;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;var d=pb()-b;d>24?(isFinite(d)&&(clearTimeout(Yg),Yg=setTimeout(ob,d)),Xg=0):(Xg=1,ah(ob))}function pb(){for(var a=null,b=_g,c=1/0;b;)b.flush?(delete $g[b.callback.id],b=a?a.next=b.next:_g=b.next):(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function qb(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function rb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function sb(a){return a+""}function tb(a,b){a&&kh.hasOwnProperty(a.type)&&kh[a.type](a,b)}function ub(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1]);b.lineEnd()}function vb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)ub(a[c],b,1);b.polygonEnd()}function wb(){function a(a,b){a*=Ng,b=b*Ng/2+Lg/4;var c=a-d,g=Math.cos(b),h=Math.sin(b),i=f*h,j=mh,k=nh,l=e*g+i*Math.cos(c),m=i*Math.sin(c);mh=j*l-k*m,nh=k*l+j*m,d=a,e=g,f=h}var b,c,d,e,f;oh.point=function(g,h){oh.point=a,d=(b=g)*Ng,e=Math.cos(h=(c=h)*Ng/2+Lg/4),f=Math.sin(h)},oh.lineEnd=function(){a(b,c)}}function xb(a){function b(a,b){d>a&&(d=a),a>f&&(f=a),e>b&&(e=b),b>g&&(g=b)}function c(){h.point=h.lineEnd=E}var d,e,f,g,h={point:b,lineStart:E,lineEnd:E,polygonStart:function(){h.lineEnd=c},polygonEnd:function(){h.point=b}};return function(b){return g=f=-(d=e=1/0),jg.geo.stream(b,a(h)),[[d,e],[f,g]]}}function yb(a,b){if(!ph){++qh,a*=Ng;var c=Math.cos(b*=Ng);rh+=(c*Math.cos(a)-rh)/qh,sh+=(c*Math.sin(a)-sh)/qh,th+=(Math.sin(b)-th)/qh}}function zb(){var a,b;ph=1,Ab(),ph=2;var c=uh.point;uh.point=function(d,e){c(a=d,b=e)},uh.lineEnd=function(){uh.point(a,b),Bb(),uh.lineEnd=Bb}}function Ab(){function a(a,e){a*=Ng;var f=Math.cos(e*=Ng),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);qh+=j,rh+=j*(b+(b=g)),sh+=j*(c+(c=h)),th+=j*(d+(d=i))}var b,c,d;ph>1||(1>ph&&(ph=1,qh=rh=sh=th=0),uh.point=function(e,f){e*=Ng;var g=Math.cos(f*=Ng);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),uh.point=a})}function Bb(){uh.point=yb}function Cb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function Db(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Eb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Fb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function Gb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Hb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function Ib(){return!0}function Jb(a){return[Math.atan2(a[1],a[0]),Math.asin(Math.max(-1,Math.min(1,a[2])))]}function Kb(a,b){return Math.abs(a[0]-b[0])<Mg&&Math.abs(a[1]-b[1])<Mg}function Lb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(Kb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0},j={point:c,points:[c],other:i,visited:!1,entry:!1,subject:!1};i.other=j,f.push(i),g.push(j),i={point:d,points:[d],other:null,visited:!1,entry:!1,subject:!0},j={point:d,points:[d],other:i,visited:!1,entry:!0,subject:!1},i.other=j,f.push(i),g.push(j)}}),g.sort(b),Mb(f),Mb(g),f.length){if(c)for(var h=1,i=!c(g[0].point),j=g.length;j>h;++h)g[h].entry=i=!i;for(var k,l,m,n=f[0];;){for(k=n;k.visited;)if((k=k.next)===n)return;l=k.points,e.lineStart();do{if(k.visited=k.other.visited=!0,k.entry){if(k.subject)for(var h=0;h<l.length;h++)e.point((m=l[h])[0],m[1]);else d(k.point,k.next.point,1,e);k=k.next}else{if(k.subject){l=k.prev.points;for(var h=l.length;--h>=0;)e.point((m=l[h])[0],m[1])}else d(k.point,k.prev.point,-1,e);k=k.prev}k=k.other,l=k.points}while(!k.visited);e.lineEnd()}}}function Mb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.next=c=a[d],c.prev=e,e=c;e.next=c=a[0],c.prev=e}}function Nb(a,b,c){return function(d){function e(b,c){a(b,c)&&d.point(b,c)}function f(a,b){q.point(a,b)}function g(){r.point=f,q.lineStart()}function h(){r.point=e,q.lineEnd()}function i(a,b){t.point(a,b),p.push([a,b])}function j(){t.lineStart(),p=[]}function k(){i(p[0][0],p[0][1]),t.lineEnd();var a,b=t.clean(),c=s.buffer(),e=c.length;if(!e)return o=!0,n+=Qb(p,-1),void(p=null);if(p=null,1&b){a=c[0],m+=Qb(a,1);var f,e=a.length-1,g=-1;for(d.lineStart();++g<e;)d.point((f=a[g])[0],f[1]);return void d.lineEnd()}e>1&&2&b&&c.push(c.pop().concat(c.shift())),l.push(c.filter(Ob))}var l,m,n,o,p,q=b(d),r={point:e,lineStart:g,lineEnd:h,polygonStart:function(){r.point=i,r.lineStart=j,r.lineEnd=k,o=!1,n=m=0,l=[],d.polygonStart()},polygonEnd:function(){r.point=e,r.lineStart=g,r.lineEnd=h,l=jg.merge(l),l.length?Lb(l,Rb,null,c,d):(-Mg>m||o&&-Mg>n)&&(d.lineStart(),c(null,null,1,d),d.lineEnd()),d.polygonEnd(),l=null},sphere:function(){d.polygonStart(),d.lineStart(),c(null,null,1,d),d.lineEnd(),d.polygonEnd()}},s=Pb(),t=b(s);return r}}function Ob(a){return a.length>1}function Pb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:E,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Qb(a,b){if(!(c=a.length))return 0;for(var c,d,e,f=0,g=0,h=a[0],i=h[0],j=h[1],k=Math.cos(j),l=Math.atan2(b*Math.sin(i)*k,Math.sin(j)),m=1-b*Math.cos(i)*k,n=l;++f<c;)h=a[f],k=Math.cos(j=h[1]),d=Math.atan2(b*Math.sin(i=h[0])*k,Math.sin(j)),e=1-b*Math.cos(i)*k,Math.abs(m-2)<Mg&&Math.abs(e-2)<Mg||(Math.abs(e)<Mg||Math.abs(m)<Mg||(Math.abs(Math.abs(d-l)-Lg)<Mg?e+m>2&&(g+=4*(d-l)):g+=Math.abs(m-2)<Mg?4*(d-n):((3*Lg+d-l)%(2*Lg)-Lg)*(m+e)),n=l,l=d,m=e);return g}function Rb(a,b){return((a=a.point)[0]<0?a[1]-Lg/2-Mg:Lg/2-a[1])-((b=b.point)[0]<0?b[1]-Lg/2-Mg:Lg/2-b[1])}function Sb(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Lg:-Lg,i=Math.abs(f-c);Math.abs(i-Lg)<Mg?(a.point(c,d=(d+g)/2>0?Lg/2:-Lg/2),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Lg&&(Math.abs(c-e)<Mg&&(c-=e*Mg),Math.abs(f-h)<Mg&&(f-=h*Mg),d=Tb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=0/0},clean:function(){return 2-b}}}function Tb(a,b,c,d){var e,f,g=Math.sin(a-c);return Math.abs(g)>Mg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ub(a,b,c,d){var e;if(null==a)e=c*Lg/2,d.point(-Lg,e),d.point(0,e),d.point(Lg,e),d.point(Lg,0),d.point(Lg,-e),d.point(0,-e),d.point(-Lg,-e),d.point(-Lg,0),d.point(-Lg,e);else if(Math.abs(a[0]-b[0])>Mg){var f=(a[0]<b[0]?1:-1)*Lg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Vb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Lg:-Lg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(Kb(c,n)||Kb(o,n))&&(o[0]+=Mg,o[1]+=Mg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&Kb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=Cb(a),e=Cb(b),g=[1,0,0],h=Eb(d,e),i=Db(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=Eb(g,h),o=Gb(g,l),p=Gb(h,m);Fb(o,p);var q=n,r=Db(o,q),s=Db(q,q),t=r*r-s*(Db(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=Gb(q,(-r-u)/s);if(Fb(v,o),v=Jb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=Math.abs(B-Lg)<Mg,D=C||Mg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(Math.abs(v[0]-x)<Mg?z:A):z<=v[1]&&v[1]<=A:B>Lg^(x<=v[0]&&v[0]<=y)){var E=Gb(q,(-r+u)/s);return Fb(E,o),[v,Jb(E)]}}}function e(b,c){var d=g?a:Lg-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=Math.abs(f)>Mg,i=gc(a,6*Ng);return Nb(b,c,i)}function Wb(a,c,d,e){function f(b,e){return Math.abs(b[0]-a)<Mg?e>0?0:3:Math.abs(b[0]-d)<Mg?e>0?2:1:Math.abs(b[1]-c)<Mg?e>0?1:0:e>0?3:2}function g(a,b){return h(a.point,b.point)}function h(a,b){var c=f(a,1),d=f(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}function i(b,f){var g=f[0]-b[0],h=f[1]-b[1],i=[0,1];return Math.abs(g)<Mg&&Math.abs(h)<Mg?a<=b[0]&&b[0]<=d&&c<=b[1]&&b[1]<=e:Xb(a-b[0],g,i)&&Xb(b[0]-d,-g,i)&&Xb(c-b[1],h,i)&&Xb(b[1]-e,-h,i)?(i[1]<1&&(f[0]=b[0]+i[1]*g,f[1]=b[1]+i[1]*h),i[0]>0&&(b[0]+=i[0]*g,b[1]+=i[0]*h),!0):!1}return function(j){function k(b){var g=f(b,-1),h=l([0===g||3===g?a:d,g>1?e:c]);return h}function l(a){for(var c=0,d=u.length,e=a[1],f=0;d>f;++f)for(var g=1,h=u[f],i=h.length,j=h[0];i>g;++g)b=h[g],j[1]<=e?b[1]>e&&m(j,b,a)>0&&++c:b[1]<=e&&m(j,b,a)<0&&--c,j=b;return 0!==c}function m(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function n(b,g,i,j){var k=0,l=0;if(null==b||(k=f(b,i))!==(l=f(g,i))||h(b,g)<0^i>0){do j.point(0===k||3===k?a:d,k>1?e:c);while((k=(k+i+4)%4)!==l)}else j.point(g[0],g[1])}function o(b,f){return b>=a&&d>=b&&f>=c&&e>=f}function p(a,b){o(a,b)&&j.point(a,b)}function q(){F.point=s,u&&u.push(v=[]),C=!0,B=!1,z=A=0/0}function r(){t&&(s(w,x),y&&B&&E.rejoin(),t.push(E.buffer())),F.point=p,B&&j.lineEnd()}function s(a,b){a=Math.max(-wh,Math.min(wh,a)),b=Math.max(-wh,Math.min(wh,b));var c=o(a,b);if(u&&v.push([a,b]),C)w=a,x=b,y=c,C=!1,c&&(j.lineStart(),j.point(a,b));else if(c&&B)j.point(a,b);else{var d=[z,A],e=[a,b];i(d,e)?(B||(j.lineStart(),j.point(d[0],d[1])),j.point(e[0],e[1]),c||j.lineEnd()):(j.lineStart(),j.point(a,b))}z=a,A=b,B=c}var t,u,v,w,x,y,z,A,B,C,D=j,E=Pb(),F={point:p,lineStart:q,lineEnd:r,polygonStart:function(){j=E,t=[],u=[]},polygonEnd:function(){j=D,(t=jg.merge(t)).length?(j.polygonStart(),Lb(t,g,k,n,j),j.polygonEnd()):l([a,c])&&(j.polygonStart(),j.lineStart(),n(null,null,1,j),j.lineEnd(),j.polygonEnd()),t=u=v=null}};return F}}function Xb(a,b,c){if(Math.abs(b)<Mg)return 0>=a;var d=a/b;if(b>0){if(d>c[1])return!1;d>c[0]&&(c[0]=d)}else{if(d<c[0])return!1;d<c[1]&&(c[1]=d)}return!0}function Yb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Zb(a){function b(b){function d(c,d){c=a(c,d),b.point(c[0],c[1])}function f(){k=0/0,p.point=g,b.lineStart()}function g(d,f){var g=Cb([d,f]),h=a(d,f);c(k,l,j,m,n,o,k=h[0],l=h[1],j=d,m=g[0],n=g[1],o=g[2],e,b),b.point(k,l)}function h(){p.point=d,b.lineEnd()}function i(){var a,d,i,q,r,s,t;f(),p.point=function(b,c){g(a=b,d=c),i=k,q=l,r=m,s=n,t=o,p.point=g},p.lineEnd=function(){c(k,l,j,m,n,o,i,q,a,r,s,t,e,b),p.lineEnd=h,h()}}var j,k,l,m,n,o,p={point:d,lineStart:f,lineEnd:h,polygonStart:function(){b.polygonStart(),p.lineStart=i},polygonEnd:function(){b.polygonEnd(),p.lineStart=f}};return p}function c(b,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j-b,s=k-e,t=r*r+s*s;if(t>4*d&&p--){var u=g+m,v=h+n,w=i+o,x=Math.sqrt(u*u+v*v+w*w),y=Math.asin(w/=x),z=Math.abs(Math.abs(w)-1)<Mg?(f+l)/2:Math.atan2(v,u),A=a(z,y),B=A[0],C=A[1],D=B-b,E=C-e,F=s*D-r*E;(F*F/t>d||Math.abs((r*D+s*E)/t-.5)>.3)&&(c(b,e,f,g,h,i,B,C,z,u/=x,v/=x,w,p,q),q.point(B,C),c(B,C,z,u,v,w,j,k,l,m,n,o,p,q))}}var d=.5,e=16;return b.precision=function(a){return arguments.length?(e=(d=a*a)>0&&16,b):Math.sqrt(d)},b}function $b(a){return _b(function(){return a})()}function _b(a){function b(a){return a=g(a[0]*Ng,a[1]*Ng),[a[0]*k+h,i-a[1]*k]}function c(a){return a=g.invert((a[0]-h)/k,(i-a[1])/k),a&&[a[0]*Og,a[1]*Og]}function d(){g=Yb(f=cc(p,q,r),e);var a=e(n,o);return h=l-a[0]*k,i=m+a[1]*k,b}var e,f,g,h,i,j=Zb(function(a,b){return a=e(a,b),[a[0]*k+h,i-a[1]*k]}),k=150,l=480,m=250,n=0,o=0,p=0,q=0,r=0,s=vh,t=lb,u=null,v=null;return b.stream=function(a){return ac(f,s(j(t(a))))},b.clipAngle=function(a){return arguments.length?(s=null==a?(u=a,vh):Vb((u=+a)*Ng),b):u},b.clipExtent=function(a){return arguments.length?(v=a,t=null==a?lb:Wb(a[0][0],a[0][1],a[1][0],a[1][1]),b):v},b.scale=function(a){return arguments.length?(k=+a,d()):k},b.translate=function(a){return arguments.length?(l=+a[0],m=+a[1],d()):[l,m]},b.center=function(a){return arguments.length?(n=a[0]%360*Ng,o=a[1]%360*Ng,d()):[n*Og,o*Og]},b.rotate=function(a){return arguments.length?(p=a[0]%360*Ng,q=a[1]%360*Ng,r=a.length>2?a[2]%360*Ng:0,d()):[p*Og,q*Og,r*Og]},jg.rebind(b,j,"precision"),function(){return e=a.apply(this,arguments),b.invert=e.invert&&c,d()}}function ac(a,b){return{point:function(c,d){d=a(c*Ng,d*Ng),c=d[0],b.point(c>Lg?c-2*Lg:-Lg>c?c+2*Lg:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function bc(a,b){return[a,b]}function cc(a,b,c){return a?b||c?Yb(ec(a),fc(b,c)):ec(a):b||c?fc(b,c):bc}function dc(a){return function(b,c){return b+=a,[b>Lg?b-2*Lg:-Lg>b?b+2*Lg:b,c]}}function ec(a){var b=dc(a);return b.invert=dc(-a),b}function fc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),Math.asin(Math.max(-1,Math.min(1,k*f+i*g)))]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),Math.asin(Math.max(-1,Math.min(1,k*d-h*e)))]},c}function gc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){null!=e?(e=hc(c,e),f=hc(c,f),(g>0?f>e:e>f)&&(e+=2*g*Lg)):(e=a+2*g*Lg,f=a);for(var i,j=g*b,k=e;g>0?k>f:f>k;k-=j)h.point((i=Jb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],i[1])}}function hc(a,b){var c=Cb(b);c[0]-=a,Hb(c);var d=P(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Mg)%(2*Math.PI)}function ic(a,b,c){var d=jg.range(a,b-Mg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function jc(a,b,c){var d=jg.range(a,b-Mg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function kc(a){return a.source}function lc(a){return a.target}function mc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(T(d-b)+e*g*T(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Og,Math.atan2(g,Math.sqrt(d*d+e*e))*Og]}:function(){return[a*Og,b*Og]};return o.distance=m,o}function nc(){function a(a,e){var f=Math.sin(e*=Ng),g=Math.cos(e),h=Math.abs((a*=Ng)-b),i=Math.cos(h);xh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;yh.point=function(e,f){b=e*Ng,c=Math.sin(f*=Ng),d=Math.cos(f),yh.point=a},yh.lineEnd=function(){yh.point=yh.lineEnd=E}}function oc(a){var b=0,c=Lg/3,d=_b(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Lg/180,c=a[1]*Lg/180):[b/Lg*180,c/Lg*180]},e}function pc(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Math.asin((f-(a*a+c*c)*e*e)/(2*e))]},c}function qc(a,b){var c=a(b[0]),d=a([.5*(b[0][0]+b[1][0]),b[0][1]]),e=a([b[1][0],b[0][1]]),f=a(b[1]),g=d[1]-c[1],h=d[0]-c[0],i=e[1]-d[1],j=e[0]-d[0],k=g/h,l=i/j,m=.5*(k*l*(c[1]-e[1])+l*(c[0]+d[0])-k*(d[0]+e[0]))/(l-k),n=(.5*(c[0]+d[0])-m)/k+.5*(c[1]+d[1]),o=f[0]-m,p=f[1]-n,q=c[0]-m,r=c[1]-n,s=o*o+p*p,t=q*q+r*r,u=Math.atan2(p,o),v=Math.atan2(r,q);return function(b){var c=b[0]-m,d=b[1]-n,e=c*c+d*d,f=Math.atan2(d,c);return e>s&&t>e&&f>u&&v>f?a.invert(b):void 0}}function rc(){function a(a,b){Ah+=e*a-d*b,d=a,e=b}var b,c,d,e;Bh.point=function(f,g){Bh.point=a,b=d=f,c=e=g},Bh.lineEnd=function(){a(b,c)}}function sc(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=yc(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=yc(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function tc(a,b){ph||(rh+=a,sh+=b,++th)}function uc(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);rh+=g*(b+a)/2,sh+=g*(c+d)/2,th+=g,b=a,c=d}var b,c;if(1!==ph){if(!(1>ph))return;ph=1,rh=sh=th=0}Ch.point=function(d,e){Ch.point=a,b=d,c=e}}function vc(){Ch.point=tc}function wc(){function a(a,b){var c=e*a-d*b;rh+=c*(d+a),sh+=c*(e+b),th+=3*c,d=a,e=b}var b,c,d,e;2>ph&&(ph=2,rh=sh=th=0),Ch.point=function(f,g){Ch.point=a,b=d=f,c=e=g},Ch.lineEnd=function(){a(b,c)}}function xc(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,2*Lg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:E};return h}function yc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function zc(a){var b=Zb(function(b,c){return a([b*Og,c*Og])});return function(a){return a=b(a),{point:function(b,c){a.point(b*Ng,c*Ng)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function Ac(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function Bc(a,b){function c(a,b){var c=Math.abs(Math.abs(b)-Lg/2)<Mg?0:g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Lg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=O(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Lg/2]},c):Dc}function Cc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return Math.abs(e)<Mg?bc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-O(e)*Math.sqrt(a*a+c*c)]},c)}function Dc(a,b){return[a,Math.log(Math.tan(Lg/4+b/2))]}function Ec(a){var b,c=$b(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Lg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Fc(a,b){var c=Math.cos(b)*Math.sin(a);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(b),Math.cos(a))]}function Gc(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=kb(c),o=kb(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Hc,d=Ic,e=Ib,f=Jc,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Ih.get(a)||Jc).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function Hc(a){return a[0]}function Ic(a){return a[1]}function Jc(a){return a.join("L")}function Kc(a){return Jc(a)+"Z"}function Lc(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Mc(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Nc(a,b){return a.length<4?Jc(a):a[1]+Qc(a.slice(1,a.length-1),Rc(a,b))}function Oc(a,b){return a.length<3?Jc(a):a[0]+Qc((a.push(a[0]),a),Rc([a[a.length-2]].concat(a,[a[1]]),b))}function Pc(a,b){return a.length<3?Jc(a):a[0]+Qc(a,Rc(a,b))}function Qc(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return Jc(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Rc(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Sc(a){if(a.length<3)return Jc(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f];for(Xc(i,g,h);++b<c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Xc(i,g,h);for(b=-1;++b<2;)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Xc(i,g,h);return i.join("")}function Tc(a){if(a.length<4)return Jc(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Wc(Lh,f)+","+Wc(Lh,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Xc(c,f,g);return c.join("")}function Uc(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Wc(Lh,g),",",Wc(Lh,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Xc(b,g,h);return b.join("")}function Vc(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Sc(a)}function Wc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Xc(a,b,c){a.push("C",Wc(Jh,b),",",Wc(Jh,c),",",Wc(Kh,b),",",Wc(Kh,c),",",Wc(Lh,b),",",Wc(Lh,c))}function Yc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Zc(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Yc(e,f);++b<c;)d[b]=(g+(g=Yc(e=f,f=a[b+1])))/2;return d[b]=g,d}function $c(a){for(var b,c,d,e,f=[],g=Zc(a),h=-1,i=a.length-1;++h<i;)b=Yc(a[h],a[h+1]),Math.abs(b)<1e-6?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function _c(a){return a.length<3?Jc(a):a[0]+Qc(a,$c(a))}function ad(a,b,c,d){var e,f,g,h,i,j,k;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],i=e[1],e=d[c],j=e[0],k=e[1],(k-g)*(h-f)-(i-g)*(j-f)>0}function bd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function cd(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);
return[e+m*g,i+m*k]}function dd(a,b){var c={list:a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),bottomSite:null},d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l"),d.rightEnd=d.createHalfEdge(null,"l"),d.leftEnd.r=d.rightEnd,d.rightEnd.l=d.leftEnd,d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a,b.r=a.r,a.r.l=b,a.r=b},leftBound:function(a){var b=d.leftEnd;do b=b.r;while(b!=d.rightEnd&&e.rightOf(b,a));return b=b.l},del:function(a){a.l.r=a.r,a.r.l=a.l,a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[Mh[a.side]]}},e={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y,f=d>0?d:-d,g=e>0?e:-e;return c.c=a.x*d+a.y*e+.5*(d*d+e*e),f>g?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(Math.abs(e)<1e-10)return null;var f,g,h=(c.c*d.b-d.c*c.b)/e,i=(d.c*c.a-c.c*d.a)/e,j=c.region.r,k=d.region.r;j.y<k.y||j.y==k.y&&j.x<k.x?(f=a,g=c):(f=b,g=d);var l=h>=g.region.r.x;return l&&"l"===f.side||!l&&"r"===f.side?null:{x:h,y:i}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,h=0,i=0;if(!e&&c.b<0||e&&c.b>=0?i=h=f>=c.b*g:(i=b.x+b.y*c.b>c.c,c.b<0&&(i=!i),i||(h=1)),!h){var j=d.x-c.region.l.x;i=c.b*(g*g-f*f)<j*f*(1+2*g/j+c.b*c.b),c.b<0&&(i=!i)}}else{var k=c.c-c.a*b.x,l=b.y-k,m=b.x-d.x,n=k-d.y;i=l*l>m*m+n*n}return"l"===a.side?i:!i},endPoint:function(a,c,d){a.ep[c]=d,a.ep[Mh[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},f={list:[],insert:function(a,b,c){a.vertex=b,a.ystar=b.y+c;for(var d=0,e=f.list,g=e.length;g>d;d++){var h=e[d];if(!(a.ystar>h.ystar||a.ystar==h.ystar&&b.x>h.vertex.x))break}e.splice(d,0,a)},del:function(a){for(var b=0,c=f.list,d=c.length;d>b&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===f.list.length},nextEvent:function(a){for(var b=0,c=f.list,d=c.length;d>b;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=f.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return f.list.shift()}};d.init(),c.bottomSite=c.list.shift();for(var g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.list.shift();;)if(f.empty()||(g=f.min()),t&&(f.empty()||t.y<g.y||t.y==g.y&&t.x<g.x))h=d.leftBound(t),i=d.right(h),m=d.rightRegion(h),r=e.bisect(m,t),l=d.createHalfEdge(r,"l"),d.insert(h,l),p=e.intersect(h,l),p&&(f.del(h),f.insert(h,p,e.distance(p,t))),h=l,l=d.createHalfEdge(r,"r"),d.insert(h,l),p=e.intersect(l,i),p&&f.insert(l,p,e.distance(p,t)),t=c.list.shift();else{if(f.empty())break;h=f.extractMin(),j=d.left(h),i=d.right(h),k=d.right(i),m=d.leftRegion(h),n=d.rightRegion(i),q=h.vertex,e.endPoint(h.edge,h.side,q),e.endPoint(i.edge,i.side,q),d.del(h),f.del(i),d.del(i),s="l",m.y>n.y&&(o=m,m=n,n=o,s="r"),r=e.bisect(m,n),l=d.createHalfEdge(r,s),d.insert(j,l),e.endPoint(r,Mh[s],q),p=e.intersect(j,l),p&&(f.del(j),f.insert(j,p,e.distance(p,m))),p=e.intersect(l,k),p&&f.insert(l,p,e.distance(p,m))}for(h=d.right(d.leftEnd);h!=d.rightEnd;h=d.right(h))b(h.edge)}function ed(a){return a.x}function fd(a){return a.y}function gd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&hd(a,i[0],c,d,g,h),i[1]&&hd(a,i[1],g,d,e,h),i[2]&&hd(a,i[2],c,h,g,f),i[3]&&hd(a,i[3],g,h,e,f)}}function id(a,b){a=jg.rgb(a),b=jg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+eb(Math.round(c+f*a))+eb(Math.round(d+g*a))+eb(Math.round(e+h*a))}}function jd(a){var b=[a.a,a.b],c=[a.c,a.d],d=ld(b),e=kd(b,c),f=ld(md(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Og,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Og:0}function kd(a,b){return a[0]*b[0]+a[1]*b[1]}function ld(a){var b=Math.sqrt(kd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function md(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function nd(a,b){return b-=a=+a,function(c){return a+b*c}}function od(a,b){var c,d=[],e=[],f=jg.transform(a),g=jg.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:nd(h[0],i[0])},{i:3,x:nd(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:nd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:nd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:nd(n[0],o[0])},{i:c-2,x:nd(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function pd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=sd(c)(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function qd(a,b){var c,d,e,f,g,h=0,i=0,j=[],k=[];for(a+="",b+="",Oh.lastIndex=0,d=0;c=Oh.exec(b);++d)c.index&&j.push(b.substring(h,i=c.index)),k.push({i:j.length,x:c[0]}),j.push(null),h=Oh.lastIndex;for(h<b.length&&j.push(b.substring(h)),d=0,f=k.length;(c=Oh.exec(a))&&f>d;++d)if(g=k[d],g.x==c[0]){if(g.i)if(null==j[g.i+1])for(j[g.i-1]+=g.x,j.splice(g.i,1),e=d+1;f>e;++e)k[e].i--;else for(j[g.i-1]+=g.x+j[g.i+1],j.splice(g.i,2),e=d+1;f>e;++e)k[e].i-=2;else if(null==j[g.i+1])j[g.i]=g.x;else for(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1),e=d+1;f>e;++e)k[e].i--;k.splice(d,1),f--,d--}else g.x=nd(parseFloat(c[0]),parseFloat(g.x));for(;f>d;)g=k.pop(),null==j[g.i+1]?j[g.i]=g.x:(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1)),f--;return 1===j.length?null==j[0]?k[0].x:function(){return b}:function(a){for(d=0;f>d;++d)j[(g=k[d]).i]=g.x(a);return j.join("")}}function rd(a,b){for(var c,d=jg.interpolators.length;--d>=0&&!(c=jg.interpolators[d](a,b)););return c}function sd(a){return"transform"==a?od:rd}function td(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(rd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function ud(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function vd(a){return function(b){return 1-a(1-b)}}function wd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function xd(a){return a*a}function yd(a){return a*a*a}function zd(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Ad(a){return function(b){return Math.pow(b,a)}}function Bd(a){return 1-Math.cos(a*Lg/2)}function Cd(a){return Math.pow(2,10*(a-1))}function Dd(a){return 1-Math.sqrt(1-a*a)}function Ed(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/(2*Lg)*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Lg/b)}}function Fd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Gd(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Hd(a,b){a=jg.hcl(a),b=jg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return W(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){a=jg.hsl(a),b=jg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return N(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=jg.lab(a),b=jg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return Z(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ld(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Md(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Nd(a){for(var b=a.source,c=a.target,d=Pd(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Od(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Pd(a,b){if(a===b)return a;for(var c=Od(a),d=Od(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Qd(a){a.fixed|=2}function Rd(a){a.fixed&=-7}function Sd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Td(a){a.fixed&=-5}function Ud(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Ud(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Vd(a,b){return jg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=Zd,a}function Wd(a){return a.children}function Xd(a){return a.value}function Yd(a,b){return b.value-a.value}function Zd(a){return jg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function $d(a){return a.x}function _d(a){return a.y}function ae(a,b,c){a.y0=b,a.y=c}function be(a){return jg.range(a.length)}function ce(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function de(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function ee(a){return a.reduce(fe,0)}function fe(a,b){return a+b[1]}function ge(a,b){return he(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function he(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ie(a){return[jg.min(a),jg.max(a)]}function je(a,b){return a.parent==b.parent?1:2}function ke(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function le(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function me(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)b(d=me(c[f],b),a)>0&&(a=d);return a}function ne(a,b){return a.x-b.x}function oe(a,b){return b.x-a.x}function pe(a,b){return a.depth-b.depth}function qe(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,h=null,i=-1;++i<g;)f=e[i],c(f,h),h=f;b(a,d)}c(a,null)}function re(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f]._tree,b.prelim+=c,b.mod+=c,c+=b.shift+(d+=b.change)}function se(a,b,c){a=a._tree,b=b._tree;var d=c/(b.number-a.number);a.change+=d,b.change-=d,b.shift+=c,b.prelim+=c,b.mod+=c}function te(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function ue(a,b){return a.value-b.value}function ve(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function we(a,b){a._pack_next=b,b._pack_prev=a}function xe(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return e*e-c*c-d*d>.001}function ye(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(ze),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Ce(d,e,f),b(f),ve(d,f),d._pack_prev=f,ve(f,e),e=d._pack_next,g=3;j>g;g++){Ce(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(xe(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!xe(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?we(d,e=h):we(d=i,e),g--):(ve(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Ae)}}function ze(a){a._pack_next=a._pack_prev=a}function Ae(a){delete a._pack_next,delete a._pack_prev}function Be(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Be(e[f],b,c,d)}function Ce(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function De(a){return 1+jg.max(a,function(a){return a.y})}function Ee(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Fe(a){var b=a.children;return b&&b.length?Fe(b[0]):a}function Ge(a){var b,c=a.children;return c&&(b=c.length)?Ge(c[b-1]):a}function He(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ie(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Je(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Ke(a){return a.rangeExtent?a.rangeExtent():Je(a.range())}function Le(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Me(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),(b=b(g-f))&&(a[d]=b.floor(f),a[e]=b.ceil(g)),a}function Ne(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=jg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Oe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Ne:Le,i=d?Md:Ld;return g=e(a,b,i,c),h=e(b,a,i,rd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Kd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Se(a,b)},f.tickFormat=function(b,c){return Te(a,b,c)},f.nice=function(){return Me(a,Qe),e()},f.copy=function(){return Oe(a,b,c,d)},e()}function Pe(a,b){return jg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Qe(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),a&&{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Re(a,b){var c=Je(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Se(a,b){return jg.range.apply(jg,Re(a,b))}function Te(a,b,c){var d=-Math.floor(Math.log(Re(a,b)[2])/Math.LN10+.01);return jg.format(c?c.replace(fh,function(a,b,c,e,f,g,h,i,j,k){return[b,c,e,f,g,h,i,j||"."+(d-2*("%"===k)),k].join("")}):",."+d+"f")}function Ue(a,b,c,d){function e(b){return a(c(b))}return e.invert=function(b){return d(a.invert(b))},e.domain=function(b){return arguments.length?(b[0]<0?(c=Xe,d=Ye):(c=Ve,d=We),a.domain(b.map(c)),e):a.domain().map(d)},e.base=function(a){return arguments.length?(b=+a,e):b},e.nice=function(){return a.domain(Me(a.domain(),Ze(b))),e},e.ticks=function(){var e=Je(a.domain()),f=[];if(e.every(isFinite)){var g=Math.log(b),h=Math.floor(e[0]/g),i=Math.ceil(e[1]/g),j=d(e[0]),k=d(e[1]),l=b%1?2:b;if(c===Xe)for(f.push(-Math.pow(b,-h));h++<i;)for(var m=l-1;m>0;m--)f.push(-Math.pow(b,-h)*m);else{for(;i>h;h++)for(var m=1;l>m;m++)f.push(Math.pow(b,h)*m);f.push(Math.pow(b,h))}for(h=0;f[h]<j;h++);for(i=f.length;f[i-1]>k;i--);f=f.slice(h,i)}return f},e.tickFormat=function(a,f){if(arguments.length<2&&(f=Xh),!arguments.length)return f;var g,h=Math.log(b),i=Math.max(.1,a/e.ticks().length),j=c===Xe?(g=-1e-12,Math.floor):(g=1e-12,Math.ceil);return function(a){return a/d(h*j(c(a)/h+g))<=i?f(a):""}},e.copy=function(){return Ue(a.copy(),b,c,d)},Pe(e,a)}function Ve(a){return Math.log(0>a?0:a)}function We(a){return Math.exp(a)}function Xe(a){return-Math.log(a>0?0:-a)}function Ye(a){return-Math.exp(-a)}function Ze(a){a=Math.log(a);var b={floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}};return function(){return b}}function $e(a,b){function c(b){return a(d(b))}var d=_e(b),e=_e(1/b);return c.invert=function(b){return e(a.invert(b))},c.domain=function(b){return arguments.length?(a.domain(b.map(d)),c):a.domain().map(e)},c.ticks=function(a){return Se(c.domain(),a)},c.tickFormat=function(a,b){return Te(c.domain(),a,b)},c.nice=function(){return c.domain(Me(c.domain(),Qe))},c.exponent=function(a){if(!arguments.length)return b;var f=c.domain();return d=_e(b=a),e=_e(1/b),c.domain(f)},c.copy=function(){return $e(a.copy(),b)},Pe(c,a)}function _e(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function af(a,b){function c(b){return g[((e.get(b)||e.set(b,a.push(b)))-1)%g.length]}function d(b,c){return jg.range(a.length).map(function(a){return b+c*a})}var e,g,h;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new f;for(var g,h=-1,i=d.length;++h<i;)e.has(g=d[h])||e.set(g,a.push(g));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",a:arguments},c):g},c.rangePoints=function(e,f){arguments.length<2&&(f=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+f);return g=d(a.length<2?(i+j)/2:i+k*f/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,f,i){arguments.length<2&&(f=0),arguments.length<3&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-f+2*i);return g=d(k+m*i,m),j&&g.reverse(),h=m*(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,f,i){arguments.length<2&&(f=0),arguments.length<3&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-f+2*i)),n=l-k-(a.length-f)*m;return g=d(k+Math.round(n/2),m),j&&g.reverse(),h=Math.round(m*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return Je(b.a[0])},c.copy=function(){return af(a,b)},c.domain(a)}function bf(a,b){function c(){var c=0,f=b.length;for(e=[];++c<f;)e[c-1]=jg.quantile(a,c/f);return d}function d(a){return isNaN(a=+a)?0/0:b[jg.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(jg.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.copy=function(){return bf(a,b)},c()}function cf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.copy=function(){return cf(a,b,c)},e()}function df(a,b){function c(c){return b[jg.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.copy=function(){return df(a,b)},c}function ef(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Se(a,b)},b.tickFormat=function(b,c){return Te(a,b,c)},b.copy=function(){return ef(a)},b}function ff(a){return a.innerRadius}function gf(a){return a.outerRadius}function hf(a){return a.startAngle}function jf(a){return a.endAngle}function kf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+ai,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function lf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=kb(c),v=kb(e),w=c===d?function(){return n}:kb(d),x=e===f?function(){return o}:kb(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Hc,d=Hc,e=0,f=Ic,g=Ib,h=Jc,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Ih.get(a)||Jc).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function mf(a){return a.radius}function nf(a){return[a.x,a.y]}function of(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+ai;return[c*Math.cos(d),c*Math.sin(d)]}}function pf(){return 64}function qf(){return"circle"}function rf(a){var b=Math.sqrt(a/Lg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function sf(a,b){return vg(a,gi),a.id=b,a}function tf(a,b,c,d){var e=a.id;return I(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function uf(a){return null==a&&(a=""),function(){this.textContent=a}}function vf(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),g=e[c];if(!g){var h=d.time;return g=e[c]={tween:new f,event:jg.dispatch("start","end"),time:h,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,jg.timer(function(d){function f(d){return e.active>c?j():(e.active=c,m.start.call(a,k,b),g.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),i(d)||jg.timer(i,0,h),1)}function i(d){if(e.active!==c)return j();for(var f=(d-n)/o,g=l(f),h=p.length;h>0;)p[--h].call(a,g);return f>=1?(j(),m.end.call(a,k,b),1):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=g.ease,m=g.event,n=g.delay,o=g.duration,p=[];return d>=n?f(d):jg.timer(f,n,h),1},0,h),g}}function wf(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function xf(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function yf(a,b,c){if(d=[],c&&b.length>1){for(var d,e,f,g=Je(a.domain()),h=-1,i=b.length,j=(b[1]-b[0])/++c;++h<i;)for(e=c;--e>0;)(f=+b[h]-e*j)>=g[0]&&d.push(f);for(--h,e=0;++e<c&&(f=+b[h]+e*j)<g[1];)d.push(f)}return d}function zf(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Af(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new ni(c-1)),1),c}function f(a,c){return b(a=new ni(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{ni=zf;var d=new zf;return d._=a,g(d,b,c)}finally{ni=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Bf(a);return i.floor=i,i.round=Bf(d),i.ceil=Bf(e),i.offset=Bf(f),i.range=h,a}function Bf(a){return function(b,c){try{ni=zf;var d=new zf;return d._=b,a(d,c)._}finally{ni=Date}}}function Cf(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(e=b.charCodeAt(g++),37===e){if(f=Fi[b.charAt(g++)],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function Df(a){return new RegExp("^(?:"+a.map(jg.requote).join("|")+")","i")}function Ef(a){for(var b=new f,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ff(a,b,c){a+="";var d=a.length;return c>d?new Array(c-d+1).join(b)+a:a}function Gf(a,b,c){yi.lastIndex=0;var d=yi.exec(b.substring(c));return d?c+=d[0].length:-1}function Hf(a,b,c){xi.lastIndex=0;var d=xi.exec(b.substring(c));return d?c+=d[0].length:-1}function If(a,b,c){Bi.lastIndex=0;var d=Bi.exec(b.substring(c));return d?(a.m=Ci.get(d[0].toLowerCase()),c+=d[0].length):-1}function Jf(a,b,c){zi.lastIndex=0;var d=zi.exec(b.substring(c));return d?(a.m=Ai.get(d[0].toLowerCase()),c+=d[0].length):-1}function Kf(a,b,c){return Cf(a,Ei.c.toString(),b,c)}function Lf(a,b,c){return Cf(a,Ei.x.toString(),b,c)}function Mf(a,b,c){return Cf(a,Ei.X.toString(),b,c)}function Nf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+=d[0].length):-1}function Of(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+2));return d?(a.y=Pf(+d[0]),c+=d[0].length):-1}function Pf(a){return a+(a>68?1900:2e3)}function Qf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+=d[0].length):-1}function Rf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+=d[0].length):-1}function Sf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+=d[0].length):-1}function Tf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+=d[0].length):-1}function Uf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+=d[0].length):-1}function Vf(a,b,c){Gi.lastIndex=0;var d=Gi.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+=d[0].length):-1}function Wf(a,b,c){var d=Hi.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}function Xf(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(Math.abs(b)/60),e=Math.abs(b)%60;return c+Ff(d,"0",2)+Ff(e,"0",2)}function Yf(a){return a.toISOString()}function Zf(a,b,c){function d(b){return a(b)}return d.invert=function(b){return _f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(_f)},d.nice=function(a){return d.domain(Me(d.domain(),function(){return a}))},d.ticks=function(c,e){var f=$f(d.domain());if("function"!=typeof c){var g=f[1]-f[0],h=g/c,i=jg.bisect(Ji,h);if(i==Ji.length)return b.year(f,c);if(!i)return a.ticks(c).map(_f);Math.log(h/Ji[i-1])<Math.log(Ji[i]/h)&&--i,c=b[i],e=c[1],c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return Zf(a.copy(),b,c)},jg.rebind(d,a,"range","rangeRound","interpolate","clamp")}function $f(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function _f(a){return new Date(a)}function ag(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function bg(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function cg(a){var b=a.getFullYear(),c=bg(b),d=bg(b+1);return b+(a-c)/(d-c)}function dg(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function eg(a){var b=a.getUTCFullYear(),c=dg(b),d=dg(b+1);return b+(a-c)/(d-c)}function fg(a){return a.responseText}function gg(a){return JSON.parse(a.responseText)}function hg(a){var b=kg.createRange();return b.selectNode(kg.body),b.createContextualFragment(a.responseText)}function ig(a){return a.responseXML}var jg={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var kg=document,lg=window;try{kg.createElement("div").style.setProperty("opacity",0,"")}catch(mg){var ng=lg.CSSStyleDeclaration.prototype,og=ng.setProperty;ng.setProperty=function(a,b,c){og.call(this,a,b+"",c)}}jg.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0},jg.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},jg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&(null==(c=a[e])||c!=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},jg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&(null==(c=a[e])||c!=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},jg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&(null==(c=e=a[f])||c!=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&(null==(c=e=b.call(a,a[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},jg.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},jg.mean=function(b,c){var d,e=b.length,f=0,g=-1,h=0;if(1===arguments.length)for(;++g<e;)a(d=b[g])&&(f+=(d-f)/++h);else for(;++g<e;)a(d=c.call(b,b[g],g))&&(f+=(d-f)/++h);return h?f:void 0},jg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},jg.median=function(b,c){return arguments.length>1&&(b=b.map(c)),b=b.filter(a),b.length?jg.quantile(b.sort(jg.ascending),.5):void 0},jg.bisector=function(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var pg=jg.bisector(function(a){return a});jg.bisectLeft=pg.left,jg.bisect=jg.bisectRight=pg.right,jg.shuffle=function(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a},jg.permute=function(a,b){for(var c=[],d=-1,e=b.length;++d<e;)c[d]=a[b[d]];return c},jg.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=jg.min(arguments,c),d=new Array(b);++a<b;)for(var e,f=-1,g=d[a]=new Array(e);++f<e;)g[f]=arguments[f][a];return d},jg.transpose=function(a){return jg.zip.apply(jg,a)},jg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},jg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},jg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},jg.merge=function(a){return Array.prototype.concat.apply([],a)},jg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var e,f=[],g=d(Math.abs(c)),h=-1;if(a*=g,b*=g,c*=g,0>c)for(;(e=a+c*++h)>b;)f.push(e/g);else for(;(e=a+c*++h)<b;)f.push(e/g);return f},jg.map=function(a){var b=new f;for(var c in a)b.set(c,a[c]);return b},e(f,{has:function(a){return qg+a in this},get:function(a){return this[qg+a]},set:function(a,b){return this[qg+a]=b},remove:function(a){return a=qg+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===rg&&a.call(this,b.substring(1),this[b])}});var qg="\x00",rg=qg.charCodeAt(0);jg.nest=function(){function a(b,h,i){if(i>=g.length)return d?d.call(e,h):c?h.sort(c):h;for(var j,k,l,m,n=-1,o=h.length,p=g[i++],q=new f;++n<o;)(m=q.get(j=p(k=h[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,i))}):(k={},l=function(c,d){k[c]=a(b,d,i)}),q.forEach(l),k}function b(a,c){if(c>=g.length)return a;var d=[],e=h[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},g=[],h=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(jg.map,c,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return h[g.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},jg.set=function(a){var b=new g;if(a)for(var c=0;c<a.length;c++)b.add(a[c]);return b},e(g,{has:function(a){return qg+a in this},add:function(a){return this[qg+a]=!0,a},remove:function(a){return a=qg+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===rg&&a.call(this,b.substring(1))}}),jg.behavior={},jg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=h(a,b,b[c]);return a},jg.dispatch=function(){for(var a=new i,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=j(a);return a},i.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.substring(c+1),a=a.substring(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},jg.event=null,jg.mouse=function(a){return o(a,l())
};var sg=/WebKit/.test(lg.navigator.userAgent)?-1:0,tg=q;try{tg(kg.documentElement.childNodes)[0].nodeType}catch(ug){tg=p}var vg=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};jg.touches=function(a,b){return arguments.length<2&&(b=l().touches),b?tg(b).map(function(b){var c=o(a,b);return c.identifier=b.identifier,c}):[]},jg.behavior.drag=function(){function a(){this.on("mousedown.drag",b).on("touchstart.drag",b)}function b(){function a(){var a=g.parentNode;return null!=j?jg.touches(a).filter(function(a){return a.identifier===j})[0]:jg.mouse(a)}function b(){if(!g.parentNode)return e();var b=a(),c=b[0]-l[0],d=b[1]-l[1];n|=c|d,l=b,k(),h({type:"drag",x:b[0]+f[0],y:b[1]+f[1],dx:c,dy:d})}function e(){h({type:"dragend"}),n&&(k(),jg.event.target===i&&m(o,"click")),o.on(null!=j?"touchmove.drag-"+j:"mousemove.drag",null).on(null!=j?"touchend.drag-"+j:"mouseup.drag",null)}var f,g=this,h=c.of(g,arguments),i=jg.event.target,j=jg.event.touches?jg.event.changedTouches[0].identifier:null,l=a(),n=0,o=jg.select(lg).on(null!=j?"touchmove.drag-"+j:"mousemove.drag",b).on(null!=j?"touchend.drag-"+j:"mouseup.drag",e,!0);d?(f=d.apply(g,arguments),f=[f.x-l[0],f.y-l[1]]):f=[0,0],null==j&&k(),h({type:"dragstart"})}var c=n(a,"drag","dragstart","dragend"),d=null;return a.origin=function(b){return arguments.length?(d=b,a):d},jg.rebind(a,c,"on")};var wg=function(a,b){return b.querySelector(a)},xg=function(a,b){return b.querySelectorAll(a)},yg=kg.documentElement,zg=yg.matchesSelector||yg.webkitMatchesSelector||yg.mozMatchesSelector||yg.msMatchesSelector||yg.oMatchesSelector,Ag=function(a,b){return zg.call(a,b)};"function"==typeof Sizzle&&(wg=function(a,b){return Sizzle(a,b)[0]||null},xg=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Ag=Sizzle.matchesSelector);var Bg=[];jg.selection=function(){return Gg},jg.selection.prototype=Bg,Bg.select=function(a){var b,c,d,e,f=[];"function"!=typeof a&&(a=s(a));for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return r(f)},Bg.selectAll=function(a){var b,c,d=[];"function"!=typeof a&&(a=t(a));for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=tg(a.call(c,c.__data__,h))),b.parentNode=c);return r(d)};var Cg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};jg.ns={prefix:Cg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),Cg.hasOwnProperty(c)?{space:Cg[c],local:a}:a}},Bg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=jg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(u(b,a[b]));return this}return this.each(u(a,b))},jg.requote=function(a){return a.replace(Dg,"\\$&")};var Dg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Bg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!w(a[e]).test(b))return!1;return!0}for(b in a)this.each(x(b,a[b]));return this}return this.each(x(a,b))},Bg.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(z(c,a[c],b));return this}if(2>d)return lg.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(z(a,b,c))},Bg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(A(b,a[b]));return this}return this.each(A(a,b))},Bg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Bg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Bg.append=function(a){function b(){return this.appendChild(kg.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(kg.createElementNS(a.space,a.local))}return a=jg.ns.qualify(a),this.select(a.local?c:b)},Bg.insert=function(a,b){function c(c,d){return this.insertBefore(kg.createElementNS(this.namespaceURI,a),b.call(this,c,d))}function d(c,d){return this.insertBefore(kg.createElementNS(a.space,a.local),b.call(this,c,d))}return a=jg.ns.qualify(a),"function"!=typeof b&&(b=s(b)),this.select(a.local?d:c)},Bg.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},Bg.data=function(a,b){function c(a,c){var d,e,g,h=a.length,l=c.length,m=Math.min(h,l),n=new Array(l),o=new Array(l),p=new Array(h);if(b){var q,r=new f,s=new f,t=[];for(d=-1;++d<h;)q=b.call(e=a[d],e.__data__,d),r.has(q)?p[d]=e:r.set(q,e),t.push(q);for(d=-1;++d<l;)q=b.call(c,g=c[d],d),(e=r.get(q))?(n[d]=e,e.__data__=g):s.has(q)||(o[d]=B(g)),s.set(q,g),r.remove(q);for(d=-1;++d<h;)r.has(t[d])&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],g=c[d],e?(e.__data__=g,n[d]=e):o[d]=B(g);for(;l>d;++d)o[d]=B(c[d]);for(;h>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,i.push(o),j.push(n),k.push(p)}var d,e,g=-1,h=this.length;if(!arguments.length){for(a=new Array(h=(d=this[0]).length);++g<h;)(e=d[g])&&(a[g]=e.__data__);return a}var i=J([]),j=r([]),k=r([]);if("function"==typeof a)for(;++g<h;)c(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<h;)c(d=this[g],a);return j.enter=function(){return i},j.exit=function(){return k},j},Bg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Bg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=C(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return r(e)},Bg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Bg.sort=function(a){a=D.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Bg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(F(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(F(a,b,c))};var Eg=jg.map({mouseenter:"mouseover",mouseleave:"mouseout"});Eg.forEach(function(a){"on"+a in kg&&Eg.remove(a)}),Bg.each=function(a){return I(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Bg.call=function(a){var b=tg(arguments);return a.apply(b[0]=this,b),this},Bg.empty=function(){return!this.node()},Bg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null};var Fg=[];jg.selection.enter=J,jg.selection.enter.prototype=Fg,Fg.append=Bg.append,Fg.insert=Bg.insert,Fg.empty=Bg.empty,Fg.node=Bg.node,Fg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j)),c.__data__=f.__data__):b.push(null)}return r(g)},Bg.transition=function(){var a,b,c=di||++hi,d=[],e=Object.create(ii);e.time=Date.now();for(var f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&vf(b,i,c,e),a.push(b)}return sf(d,c)};var Gg=r([[kg]]);Gg[0].parentNode=yg,jg.select=function(a){return"string"==typeof a?Gg.select(a):r([[a]])},jg.selectAll=function(a){return"string"==typeof a?Gg.selectAll(a):r([tg(a)])},jg.behavior.zoom=function(){function a(){this.on("mousedown.zoom",h).on("mousemove.zoom",j).on(Jg+".zoom",i).on("dblclick.zoom",l).on("touchstart.zoom",o).on("touchmove.zoom",p).on("touchend.zoom",o)}function b(a){return[(a[0]-x[0])/y,(a[1]-x[1])/y]}function c(a){return[a[0]*y+x[0],a[1]*y+x[1]]}function d(a){y=Math.max(z[0],Math.min(z[1],a))}function e(a,b){b=c(b),x[0]+=a[0]-b[0],x[1]+=a[1]-b[1]}function f(){t&&t.domain(s.range().map(function(a){return(a-x[0])/y}).map(s.invert)),v&&v.domain(u.range().map(function(a){return(a-x[1])/y}).map(u.invert))}function g(a){f(),jg.event.preventDefault(),a({type:"zoom",scale:y,translate:x})}function h(){function a(){i=1,e(jg.mouse(d),l),g(f)}function c(){i&&k(),j.on("mousemove.zoom",null).on("mouseup.zoom",null),i&&jg.event.target===h&&m(j,"click.zoom")}var d=this,f=A.of(d,arguments),h=jg.event.target,i=0,j=jg.select(lg).on("mousemove.zoom",a).on("mouseup.zoom",c),l=b(jg.mouse(d));lg.focus(),k()}function i(){q||(q=b(jg.mouse(this))),d(Math.pow(2,.002*Hg())*y),e(jg.mouse(this),q),g(A.of(this,arguments))}function j(){q=null}function l(){var a=jg.mouse(this),c=b(a),f=Math.log(y)/Math.LN2;d(Math.pow(2,jg.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),e(a,c),g(A.of(this,arguments))}function o(){var a=jg.touches(this),c=Date.now();if(r=y,q={},a.forEach(function(a){q[a.identifier]=b(a)}),k(),1===a.length){if(500>c-w){var f=a[0],h=b(a[0]);d(2*y),e(f,h),g(A.of(this,arguments))}w=c}}function p(){var a=jg.touches(this),b=a[0],c=q[b.identifier];if(f=a[1]){var f,h=q[f.identifier];b=[(b[0]+f[0])/2,(b[1]+f[1])/2],c=[(c[0]+h[0])/2,(c[1]+h[1])/2],d(jg.event.scale*r)}e(b,c),w=null,g(A.of(this,arguments))}var q,r,s,t,u,v,w,x=[0,0],y=1,z=Ig,A=n(a,"zoom");return a.translate=function(b){return arguments.length?(x=b.map(Number),f(),a):x},a.scale=function(b){return arguments.length?(y=+b,f(),a):y},a.scaleExtent=function(b){return arguments.length?(z=null==b?Ig:b.map(Number),a):z},a.x=function(b){return arguments.length?(t=b,s=b.copy(),x=[0,0],y=1,a):t},a.y=function(b){return arguments.length?(v=b,u=b.copy(),x=[0,0],y=1,a):v},jg.rebind(a,A,"on")};var Hg,Ig=[0,1/0],Jg="onwheel"in kg?(Hg=function(){return-jg.event.deltaY*(jg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in kg?(Hg=function(){return jg.event.wheelDelta},"mousewheel"):(Hg=function(){return-jg.event.detail},"MozMousePixelScroll");K.prototype.toString=function(){return this.rgb()+""},jg.hsl=function(a,b,c){return 1===arguments.length?a instanceof M?L(a.h,a.s,a.l):fb(""+a,gb,L):L(+a,+b,+c)};var Kg=M.prototype=new K;Kg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),L(this.h,this.s,this.l/a)},Kg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),L(this.h,this.s,a*this.l)},Kg.rgb=function(){return N(this.h,this.s,this.l)};var Lg=Math.PI,Mg=1e-6,Ng=Lg/180,Og=180/Lg;jg.hcl=function(a,b,c){return 1===arguments.length?a instanceof V?U(a.h,a.c,a.l):a instanceof Y?$(a.l,a.a,a.b):$((a=hb((a=jg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):U(+a,+b,+c)};var Pg=V.prototype=new K;Pg.brighter=function(a){return U(this.h,this.c,Math.min(100,this.l+Qg*(arguments.length?a:1)))},Pg.darker=function(a){return U(this.h,this.c,Math.max(0,this.l-Qg*(arguments.length?a:1)))},Pg.rgb=function(){return W(this.h,this.c,this.l).rgb()},jg.lab=function(a,b,c){return 1===arguments.length?a instanceof Y?X(a.l,a.a,a.b):a instanceof V?W(a.l,a.c,a.h):hb((a=jg.rgb(a)).r,a.g,a.b):X(+a,+b,+c)};var Qg=18,Rg=.95047,Sg=1,Tg=1.08883,Ug=Y.prototype=new K;Ug.brighter=function(a){return X(Math.min(100,this.l+Qg*(arguments.length?a:1)),this.a,this.b)},Ug.darker=function(a){return X(Math.max(0,this.l-Qg*(arguments.length?a:1)),this.a,this.b)},Ug.rgb=function(){return Z(this.l,this.a,this.b)},jg.rgb=function(a,b,c){return 1===arguments.length?a instanceof db?cb(a.r,a.g,a.b):fb(""+a,cb,N):cb(~~a,~~b,~~c)};var Vg=db.prototype=new K;Vg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),cb(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))):cb(e,e,e)},Vg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),cb(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))},Vg.hsl=function(){return gb(this.r,this.g,this.b)},Vg.toString=function(){return"#"+eb(this.r)+eb(this.g)+eb(this.b)};var Wg=jg.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Wg.forEach(function(a,b){Wg.set(a,fb(b,cb,N))}),jg.functor=kb,jg.xhr=function(a,b,c){function d(){var a=i.status;!a&&i.responseText||a>=200&&300>a||304===a?f.load.call(e,h.call(e,i)):f.error.call(e,i)}var e={},f=jg.dispatch("progress","load","error"),g={},h=lb,i=new(lg.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in i?i.onload=i.onerror=d:i.onreadystatechange=function(){i.readyState>3&&d()},i.onprogress=function(a){var b=jg.event;jg.event=a;try{f.progress.call(e,i)}finally{jg.event=b}},e.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?g[a]:(null==b?delete g[a]:g[a]=b+"",e)},e.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",e):b},e.response=function(a){return h=a,e},["get","post"].forEach(function(a){e[a]=function(){return e.send.apply(e,[a].concat(tg(arguments)))}}),e.send=function(c,d,f){if(2===arguments.length&&"function"==typeof d&&(f=d,d=null),i.open(c,a,!0),null==b||"accept"in g||(g.accept=b+",*/*"),i.setRequestHeader)for(var h in g)i.setRequestHeader(h,g[h]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=f&&e.on("error",f).on("load",function(a){f(null,a)}),i.send(null==d?null:d),e},e.abort=function(){return i.abort(),e},jg.rebind(e,f,"on"),2===arguments.length&&"function"==typeof b&&(c=b,b=null),null==c?e:e.get(mb(c))},jg.csv=nb(",","text/csv"),jg.tsv=nb("	","text/tab-separated-values");var Xg,Yg,Zg=0,$g={},_g=null;jg.timer=function(a,b,c){if(arguments.length<3){if(arguments.length<2)b=0;else if(!isFinite(b))return;c=Date.now()}var d=$g[a.id];d&&d.callback===a?(d.then=c,d.delay=b):$g[a.id=++Zg]=_g={callback:a,then:c,delay:b,next:_g},Xg||(Yg=clearTimeout(Yg),Xg=1,ah(ob))},jg.timer.flush=function(){for(var a,b=Date.now(),c=_g;c;)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;pb()};var ah=lg.requestAnimationFrame||lg.webkitRequestAnimationFrame||lg.mozRequestAnimationFrame||lg.oRequestAnimationFrame||lg.msRequestAnimationFrame||function(a){setTimeout(a,17)},bh=".",ch=",",dh=[3,3],eh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(qb);jg.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=jg.round(a,rb(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),eh[8+c/3]},jg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},jg.format=function(a){var b=fh.exec(a),c=b[1]||" ",d=b[2]||">",e=b[3]||"",f=b[4]||"",g=b[5],h=+b[6],i=b[7],j=b[8],k=b[9],l=1,m="",n=!1;switch(j&&(j=+j.substring(1)),(g||"0"===c&&"="===d)&&(g=c="0",d="=",i&&(h-=Math.floor((h-1)/4))),k){case"n":i=!0,k="g";break;case"%":l=100,m="%",k="f";break;case"p":l=100,m="%",k="r";break;case"b":case"o":case"x":case"X":f&&(f="0"+k.toLowerCase());case"c":case"d":n=!0,j=0;break;case"s":l=-1,k="r"}"#"===f&&(f=""),"r"!=k||j||(k="g"),null!=j&&("g"==k?j=Math.max(1,Math.min(21,j)):("e"==k||"f"==k)&&(j=Math.max(0,Math.min(20,j)))),k=gh.get(k)||sb;var o=g&&i;return function(a){if(n&&a%1)return"";var b=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>l){var p=jg.formatPrefix(a,j);a=p.scale(a),m=p.symbol}else a*=l;a=k(a,j),!g&&i&&(a=hh(a));var q=f.length+a.length+(o?0:b.length),r=h>q?new Array(q=h-q+1).join(c):"";return o&&(a=hh(r+a)),bh&&a.replace(".",bh),b+=f,("<"===d?b+a+r:">"===d?r+b+a:"^"===d?r.substring(0,q>>=1)+b+a+r.substring(q):b+(o?a:r+a))+m}};var fh=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,gh=jg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=jg.round(a,rb(a,b))).toFixed(Math.max(0,Math.min(20,rb(a*(1+1e-15),b))))}}),hh=lb;if(dh){var ih=dh.length;hh=function(a){for(var b=a.lastIndexOf("."),c=b>=0?"."+a.substring(b+1):(b=a.length,""),d=[],e=0,f=dh[0];b>0&&f>0;)d.push(a.substring(b-=f,b+f)),f=dh[e=(e+1)%ih];return d.reverse().join(ch||"")+c}}jg.geo={},jg.geo.stream=function(a,b){a&&jh.hasOwnProperty(a.type)?jh[a.type](a,b):tb(a,b)};var jh={Feature:function(a,b){tb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)tb(c[d].geometry,b)}},kh={Sphere:function(a,b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var c,d=a.coordinates,e=-1,f=d.length;++e<f;)c=d[e],b.point(c[0],c[1])},LineString:function(a,b){ub(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ub(c[d],b,0)},Polygon:function(a,b){vb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)vb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)tb(c[d],b)}};jg.geo.area=function(a){return lh=0,jg.geo.stream(a,oh),lh};var lh,mh,nh,oh={sphere:function(){lh+=4*Lg},point:E,lineStart:E,lineEnd:E,polygonStart:function(){mh=1,nh=0,oh.lineStart=wb},polygonEnd:function(){var a=2*Math.atan2(nh,mh);lh+=0>a?4*Lg+a:a,oh.lineStart=oh.lineEnd=oh.point=E}};jg.geo.bounds=xb(lb),jg.geo.centroid=function(a){ph=qh=rh=sh=th=0,jg.geo.stream(a,uh);var b;return qh&&Math.abs(b=Math.sqrt(rh*rh+sh*sh+th*th))>Mg?[Math.atan2(sh,rh)*Og,Math.asin(Math.max(-1,Math.min(1,th/b)))*Og]:void 0};var ph,qh,rh,sh,th,uh={sphere:function(){2>ph&&(ph=2,qh=rh=sh=th=0)},point:yb,lineStart:Ab,lineEnd:Bb,polygonStart:function(){2>ph&&(ph=2,qh=rh=sh=th=0),uh.lineStart=zb},polygonEnd:function(){uh.lineStart=Ab}},vh=Nb(Ib,Sb,Ub),wh=1e9;jg.geo.projection=$b,jg.geo.projectionMutator=_b,(jg.geo.equirectangular=function(){return $b(bc)}).raw=bc.invert=bc,jg.geo.rotation=function(a){function b(b){return b=a(b[0]*Ng,b[1]*Ng),b[0]*=Og,b[1]*=Og,b}return a=cc(a[0]%360*Ng,a[1]*Ng,a.length>2?a[2]*Ng:0),b.invert=function(b){return b=a.invert(b[0]*Ng,b[1]*Ng),b[0]*=Og,b[1]*=Og,b},b},jg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=cc(-a[0]*Ng,-a[1]*Ng,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Og,a[1]*=Og}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=gc((b=+d)*Ng,e*Ng),a):b},a.precision=function(d){return arguments.length?(c=gc(b*Ng,(e=+d)*Ng),a):e},a.angle(90)},jg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Ng,e=a[1]*Ng,f=b[1]*Ng,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},jg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return jg.range(Math.ceil(f/q)*q,e,q).map(m).concat(jg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(jg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return Math.abs(a%q)>Mg}).map(k)).concat(jg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return Math.abs(a%r)>Mg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=ic(h,g,90),l=jc(d,c,s),m=ic(j,i,90),n=jc(f,e,s),a):s},a.majorExtent([[-180,-90+Mg],[180,90-Mg]]).minorExtent([[-180,-80-Mg],[180,80+Mg]])},jg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=kc,e=lc;return a.distance=function(){return jg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},jg.geo.interpolate=function(a,b){return mc(a[0]*Ng,a[1]*Ng,b[0]*Ng,b[1]*Ng)},jg.geo.length=function(a){return xh=0,jg.geo.stream(a,yh),xh};var xh,yh={sphere:E,point:E,lineStart:nc,lineEnd:E,polygonStart:E,polygonEnd:E};(jg.geo.conicEqualArea=function(){return oc(pc)}).raw=pc,jg.geo.albersUsa=function(){function a(a){return b(a)(a)}function b(a){var b=a[0],c=a[1];return c>50?g:-140>b?h:21>c?i:f}var c,d,e,f=jg.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,45.5]),g=jg.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),h=jg.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),i=jg.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||d(a)||e(a)||f.invert(a)},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.6*b),h.scale(b),i.scale(1.5*b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=b[0],l=b[1];return f.translate(b),g.translate([k-.4*j,l+.17*j]),h.translate([k-.19*j,l+.2*j]),i.translate([k+.58*j,l+.43*j]),c=qc(g,[[-180,50],[-130,72]]),d=qc(h,[[-164,18],[-154,24]]),e=qc(i,[[-67.5,17.5],[-65,19]]),a},a.scale(1e3)};var zh,Ah,Bh={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Ah=0,Bh.lineStart=rc},polygonEnd:function(){Bh.lineStart=Bh.lineEnd=Bh.point=E,zh+=Math.abs(Ah/2)}},Ch={point:tc,lineStart:uc,lineEnd:vc,polygonStart:function(){Ch.lineStart=wc},polygonEnd:function(){Ch.point=tc,Ch.lineStart=uc,Ch.lineEnd=vc}};jg.geo.path=function(){function a(a){return a&&jg.geo.stream(a,d(e.pointRadius("function"==typeof f?+f.apply(this,arguments):f))),e.result()}var b,c,d,e,f=4.5;return a.area=function(a){return zh=0,jg.geo.stream(a,d(Bh)),zh},a.centroid=function(a){return ph=rh=sh=th=0,jg.geo.stream(a,d(Ch)),th?[rh/th,sh/th]:void 0},a.bounds=function(a){return xb(d)(a)},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||zc(c):lb,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new sc:new xc(b),a):c},a.pointRadius=function(b){return arguments.length?(f="function"==typeof b?b:+b,a):f},a.projection(jg.geo.albersUsa()).context(null)},jg.geo.albers=function(){return jg.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1e3)};var Dh=Ac(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(jg.geo.azimuthalEqualArea=function(){return $b(Dh)}).raw=Dh;var Eh=Ac(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},lb);(jg.geo.azimuthalEquidistant=function(){return $b(Eh)}).raw=Eh,(jg.geo.conicConformal=function(){return oc(Bc)}).raw=Bc,(jg.geo.conicEquidistant=function(){return oc(Cc)}).raw=Cc;var Fh=Ac(function(a){return 1/a},Math.atan);(jg.geo.gnomonic=function(){return $b(Fh)}).raw=Fh,Dc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Lg/2]},(jg.geo.mercator=function(){return Ec(Dc)}).raw=Dc;var Gh=Ac(function(){return 1},Math.asin);(jg.geo.orthographic=function(){return $b(Gh)}).raw=Gh;var Hh=Ac(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(jg.geo.stereographic=function(){return $b(Hh)}).raw=Hh,Fc.invert=function(a,b){return[Math.atan2(R(a),Math.cos(b)),Q(Math.sin(b)/S(a))]},(jg.geo.transverseMercator=function(){return Ec(Fc)}).raw=Fc,jg.geom={},jg.svg={},jg.svg.line=function(){return Gc(lb)};var Ih=jg.map({linear:Jc,"linear-closed":Kc,"step-before":Lc,"step-after":Mc,basis:Sc,"basis-open":Tc,"basis-closed":Uc,bundle:Vc,cardinal:Pc,"cardinal-open":Nc,"cardinal-closed":Oc,monotone:_c});Ih.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Jh=[0,2/3,1/3,0],Kh=[0,1/3,2/3,0],Lh=[0,1/6,2/3,1/6];jg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e,f,g,h,i,j,k,l,m,n,o,p=kb(c),q=kb(d),r=a.length,s=r-1,t=[],u=[],v=0;if(p===Hc&&d===Ic)b=a;else for(f=0,b=[];r>f;++f)b.push([+p.call(this,e=a[f],f),+q.call(this,e,f)]);for(f=1;r>f;++f)b[f][1]<b[v][1]?v=f:b[f][1]==b[v][1]&&(v=b[f][0]<b[v][0]?f:v);for(f=0;r>f;++f)f!==v&&(i=b[f][1]-b[v][1],h=b[f][0]-b[v][0],t.push({angle:Math.atan2(i,h),index:f}));for(t.sort(function(a,b){return a.angle-b.angle}),n=t[0].angle,m=t[0].index,l=0,f=1;s>f;++f)g=t[f].index,n==t[f].angle?(h=b[m][0]-b[v][0],i=b[m][1]-b[v][1],j=b[g][0]-b[v][0],k=b[g][1]-b[v][1],h*h+i*i>=j*j+k*k?t[f].index=-1:(t[l].index=-1,n=t[f].angle,l=f,m=g)):(n=t[f].angle,l=f,m=g);for(u.push(v),f=0,g=0;2>f;++g)-1!==t[g].index&&(u.push(t[g].index),f++);for(o=u.length;s>g;++g)if(-1!==t[g].index){for(;!ad(u[o-2],u[o-1],t[g].index,b);)--o;u[o++]=t[g].index}var w=[];for(f=0;o>f;++f)w.push(a[u[f]]);return w}var c=Hc,d=Ic;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},jg.geom.polygon=function(a){return a.area=function(){for(var b=0,c=a.length,d=a[c-1][1]*a[0][0]-a[c-1][0]*a[0][1];++b<c;)d+=a[b-1][1]*a[b][0]-a[b-1][0]*a[b][1];return.5*d},a.centroid=function(b){var c,d,e=-1,f=a.length,g=0,h=0,i=a[f-1];for(arguments.length||(b=-1/(6*a.area()));++e<f;)c=i,i=a[e],d=c[0]*i[1]-i[0]*c[1],g+=(c[0]+i[0])*d,h+=(c[1]+i[1])*d;return[g*b,h*b]},a.clip=function(b){for(var c,d,e,f,g,h,i=-1,j=a.length,k=a[j-1];++i<j;){for(c=b.slice(),b.length=0,f=a[i],g=c[(e=c.length)-1],d=-1;++d<e;)h=c[d],bd(h,k,f)?(bd(g,k,f)||b.push(cd(g,h,k,f)),b.push(h)):bd(g,k,f)&&b.push(cd(g,h,k,f)),g=h;k=f}return b},a},jg.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return dd(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)}),b.sort(function(a,b){return a.angle-b.angle});for(var h=0,i=b.length-1;i>h;h++)c.push([e,b[h],b[h+1]])}),c},jg.geom.voronoi=function(a){function b(a){var b,d,g,h=a.map(function(){return[]}),i=kb(e),j=kb(f),k=a.length,l=1e6;if(i===Hc&&j===Ic)b=a;else for(b=[],g=0;k>g;++g)b.push([+i.call(this,d=a[g],g),+j.call(this,d,g)]);if(dd(b,function(a){var b,c,d,e,f,g;1===a.a&&a.b>=0?(b=a.ep.r,c=a.ep.l):(b=a.ep.l,c=a.ep.r),1===a.a?(f=b?b.y:-l,d=a.c-a.b*f,g=c?c.y:l,e=a.c-a.b*g):(d=b?b.x:-l,f=a.c-a.a*d,e=c?c.x:l,g=a.c-a.a*e);var i=[d,f],j=[e,g];h[a.region.l.index].push(i,j),h[a.region.r.index].push(i,j)}),h=h.map(function(a,c){var d=b[c][0],e=b[c][1],f=a.map(function(a){return Math.atan2(a[0]-d,a[1]-e)}),g=jg.range(a.length).sort(function(a,b){return f[a]-f[b]});return g.filter(function(a,b){return!b||f[a]-f[g[b-1]]>Mg}).map(function(b){return a[b]})}),h.forEach(function(a,c){var d=a.length;if(!d)return a.push([-l,-l],[-l,l],[l,l],[l,-l]);if(!(d>2)){var e=b[c],f=a[0],g=a[1],h=e[0],i=e[1],j=f[0],k=f[1],m=g[0],n=g[1],o=Math.abs(m-j),p=n-k;if(Math.abs(p)<Mg){var q=k>i?-l:l;a.push([-l,q],[l,q])}else if(Mg>o){var r=j>h?-l:l;a.push([r,-l],[r,l])}else{var q=(j-h)*(n-k)>(m-j)*(k-i)?l:-l,s=Math.abs(p)-o;Math.abs(s)<Mg?a.push([0>p?q:-q,q]):(s>0&&(q*=-1),a.push([-l,q],[l,q]))}}}),c)for(g=0;k>g;++g)c(h[g]);for(g=0;k>g;++g)h[g].point=a[g];return h}var c,d=null,e=Hc,f=Ic;return arguments.length?b(a):(b.x=function(a){return arguments.length?(e=a,b):e},b.y=function(a){return arguments.length?(f=a,b):f},b.size=function(a){return arguments.length?(null==a?c=null:(d=[+a[0],+a[1]],c=jg.geom.polygon([[0,0],[0,d[1]],d,[d[0],0]]).clip),b):d},b.links=function(a){var b,c,d,g=a.map(function(){return[]}),h=[],i=kb(e),j=kb(f),k=a.length;if(i===Hc&&j===Ic)b=a;else for(d=0;k>d;++d)b.push([+i.call(this,c=a[d],d),+j.call(this,c,d)]);return dd(b,function(b){var c=b.region.l.index,d=b.region.r.index;g[c][d]||(g[c][d]=g[d][c]=!0,h.push({source:a[c],target:a[d]}))}),h},b.triangles=function(a){if(e===Hc&&f===Ic)return jg.geom.delaunay(a);var b,c,d,g,h,i=kb(e),j=kb(f);for(g=0,b=[],h=a.length;h>g;++g)c=[+i.call(this,d=a[g],g),+j.call(this,d,g)],c.data=d,b.push(c);return jg.geom.delaunay(b).map(function(a){return a.map(function(a){return a.data})})},b)};var Mh={l:"r",r:"l"};jg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(Math.abs(i-c)+Math.abs(k-d)<.01)j(a,b,c,d,e,f,g,h);
else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=gd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=kb(h),u=kb(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=gd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){hd(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Hc,i=Ic;return(g=arguments.length)?(h=ed,i=fd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d,e]},f)},jg.interpolateRgb=id,jg.transform=function(a){var b=kg.createElementNS(jg.ns.prefix.svg,"g");return(jg.transform=function(a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate();return new jd(c?c.matrix:Nh)})(a)},jd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Nh={a:1,b:0,c:0,d:1,e:0,f:0};jg.interpolateNumber=nd,jg.interpolateTransform=od,jg.interpolateObject=pd,jg.interpolateString=qd;var Oh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;jg.interpolate=rd,jg.interpolators=[function(a,b){var c=typeof b;return("string"===c||c!==typeof a?Wg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?id:qd:b instanceof K?id:"object"===c?Array.isArray(b)?td:pd:nd)(a,b)}],jg.interpolateArray=td;var Ph=function(){return lb},Qh=jg.map({linear:Ph,poly:Ad,quad:function(){return xd},cubic:function(){return yd},sin:function(){return Bd},exp:function(){return Cd},circle:function(){return Dd},elastic:Ed,back:Fd,bounce:function(){return Gd}}),Rh=jg.map({"in":lb,out:vd,"in-out":wd,"out-in":function(a){return wd(vd(a))}});jg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=Qh.get(c)||Ph,d=Rh.get(d)||lb,ud(d(c.apply(null,Array.prototype.slice.call(arguments,1))))},jg.interpolateHcl=Hd,jg.interpolateHsl=Id,jg.interpolateLab=Jd,jg.interpolateRound=Kd,jg.layout={},jg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Nd(a[c]));return b}},jg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=jg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(jg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(2*Lg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},jg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=1/Math.sqrt(f*f+g*g);if(p>(e-c)*h){var i=b.charge*h*h;return a.px-=f*i,a.py-=g*i,!0}if(b.point&&isFinite(h)){var i=b.pointCharge*h*h;a.px-=f*i,a.py-=g*i}}return!b.charge}}function b(a){a.px=jg.event.x,a.py=jg.event.y,h.resume()}var c,d,e,f,g,h={},i=jg.dispatch("start","tick","end"),j=[1,1],k=.9,l=Sh,m=Th,n=-30,o=.1,p=.8,q=[],r=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,p,s,t,u,v=q.length,w=r.length;for(c=0;w>c;++c)h=r[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(p=t*t+u*u)&&(p=d*f[c]*((p=Math.sqrt(p))-e[c])/p,t*=p,u*=p,m.x-=t*(s=l.weight/(m.weight+l.weight)),m.y-=u*s,l.x+=t*(s=1-s),l.y+=u*s);if((s=d*o)&&(t=j[0]/2,u=j[1]/2,c=-1,s))for(;++c<v;)h=q[c],h.x+=(t-h.x)*s,h.y+=(u-h.y)*s;if(n)for(Ud(b=jg.geom.quadtree(q),d,g),c=-1;++c<v;)(h=q[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=q[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(q=a,h):q},h.links=function(a){return arguments.length?(r=a,h):r},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.gravity=function(a){return arguments.length?(o=+a,h):o},h.theta=function(a){return arguments.length?(p=+a,h):p},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),jg.timer(h.tick)),h):d},h.start=function(){function a(a,d){for(var e,f=b(c),g=-1,h=f.length;++g<h;)if(!isNaN(e=f[g][a]))return e;return Math.random()*d}function b(){if(!i){for(i=[],d=0;o>d;++d)i[d]=[];for(d=0;p>d;++d){var a=r[d];i[a.source.index].push(a.target),i[a.target.index].push(a.source)}}return i[c]}var c,d,i,k,o=q.length,p=r.length,s=j[0],t=j[1];for(c=0;o>c;++c)(k=q[c]).index=c,k.weight=0;for(c=0;p>c;++c)k=r[c],"number"==typeof k.source&&(k.source=q[k.source]),"number"==typeof k.target&&(k.target=q[k.target]),++k.source.weight,++k.target.weight;for(c=0;o>c;++c)k=q[c],isNaN(k.x)&&(k.x=a("x",s)),isNaN(k.y)&&(k.y=a("y",t)),isNaN(k.px)&&(k.px=k.x),isNaN(k.py)&&(k.py=k.y);if(e=[],"function"==typeof l)for(c=0;p>c;++c)e[c]=+l.call(this,r[c],c);else for(c=0;p>c;++c)e[c]=l;if(f=[],"function"==typeof m)for(c=0;p>c;++c)f[c]=+m.call(this,r[c],c);else for(c=0;p>c;++c)f[c]=m;if(g=[],"function"==typeof n)for(c=0;o>c;++c)g[c]=+n.call(this,q[c],c);else for(c=0;o>c;++c)g[c]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=jg.behavior.drag().origin(lb).on("dragstart.force",Qd).on("drag.force",b).on("dragend.force",Rd)),arguments.length?void this.on("mouseover.force",Sd).on("mouseout.force",Td).call(c):c},jg.rebind(h,i,"on")};var Sh=20,Th=1;jg.layout.hierarchy=function(){function a(b,g,h){var i=e.call(c,b,g);if(b.depth=g,h.push(b),i&&(j=i.length)){for(var j,k,l=-1,m=b.children=[],n=0,o=g+1;++l<j;)k=a(i[l],o,h),k.parent=b,m.push(k),n+=k.value;d&&m.sort(d),f&&(b.value=n)}else f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var h,i=-1,j=d+1;++i<h;)g+=b(e[i],j);else f&&(g=+f.call(c,a,d)||0);return f&&(a.value=g),g}function c(b){var c=[];return a(b,0,c),c}var d=Yd,e=Wd,f=Xd;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c},jg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=jg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Vd(c,d)},jg.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/jg.sum(g),j=jg.range(f.length);null!=c&&j.sort(c===Uh?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=Uh,d=0,e=2*Lg;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Uh={};jg.layout.stack=function(){function a(h,i){var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=jg.permute(j,l),k=jg.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;r>n;++n)for(e.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;q>m;++m)e.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return h}var b=lb,c=be,d=ce,e=ae,f=$d,g=_d;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:Vh.get(b)||be,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:Wh.get(b)||ce,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var Vh=jg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(de),f=a.map(ee),g=jg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return jg.range(a.length).reverse()},"default":be}),Wh=jg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:ce});jg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[jg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ie,e=ge;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=kb(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return he(a,b)}:kb(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},jg.layout.tree=function(){function a(a,e){function f(a,b){var d=a.children,e=a._tree;if(d&&(g=d.length)){for(var g,i,j,k=d[0],l=k,m=-1;++m<g;)j=d[m],f(j,i),l=h(j,i,l),i=j;re(a);var n=.5*(k._tree.prelim+j._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-n):e.prelim=n}else b&&(e.prelim=b._tree.prelim+c(a,b))}function g(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)g(c[e],b)}}function h(a,b,d){if(b){for(var e,f=a,g=a,h=b,i=a.parent.children[0],j=f._tree.mod,k=g._tree.mod,l=h._tree.mod,m=i._tree.mod;h=le(h),f=ke(f),h&&f;)i=ke(i),g=le(g),g._tree.ancestor=a,e=h._tree.prelim+l-f._tree.prelim-j+c(h,f),e>0&&(se(te(h,a,d),a,e),j+=e,k+=e),l+=h._tree.mod,j+=f._tree.mod,m+=i._tree.mod,k+=g._tree.mod;h&&!le(g)&&(g._tree.thread=h,g._tree.mod+=l-k),f&&!ke(i)&&(i._tree.thread=f,i._tree.mod+=j-m,d=a)}return d}var i=b.call(this,a,e),j=i[0];qe(j,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}}),f(j),g(j,-j._tree.prelim);var k=me(j,oe),l=me(j,ne),m=me(j,pe),n=k.x-c(k,l)/2,o=l.x+c(l,k)/2,p=m.depth||1;return qe(j,function(a){a.x=(a.x-n)/(o-n)*d[0],a.y=a.depth/p*d[1],delete a._tree}),i}var b=jg.layout.hierarchy().sort(null).value(null),c=je,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},Vd(a,b)},jg.layout.pack=function(){function a(a,e){var f=b.call(this,a,e),g=f[0];g.x=0,g.y=0,qe(g,function(a){a.r=Math.sqrt(a.value)}),qe(g,ye);var h=d[0],i=d[1],j=Math.max(2*g.r/h,2*g.r/i);if(c>0){var k=c*j/2;qe(g,function(a){a.r+=k}),qe(g,ye),qe(g,function(a){a.r-=k}),j=Math.max(2*g.r/h,2*g.r/i)}return Be(g,h/2,i/2,1/j),f}var b=jg.layout.hierarchy().sort(ue),c=0,d=[1,1];return a.size=function(b){return arguments.length?(d=b,a):d},a.padding=function(b){return arguments.length?(c=+b,a):c},Vd(a,b)},jg.layout.cluster=function(){function a(a,e){var f,g=b.call(this,a,e),h=g[0],i=0;qe(h,function(a){var b=a.children;b&&b.length?(a.x=Ee(b),a.y=De(b)):(a.x=f?i+=c(a,f):0,a.y=0,f=a)});var j=Fe(h),k=Ge(h),l=j.x-c(j,k)/2,m=k.x+c(k,j)/2;return qe(h,function(a){a.x=(a.x-l)/(m-l)*d[0],a.y=(1-(h.y?a.y/h.y:1))*d[1]}),g}var b=jg.layout.hierarchy().sort(null).value(null),c=je,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},Vd(a,b)},jg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=jg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=He,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?He(b):Ie(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Ie(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?He:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Vd(f,h)},jg.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=jg.random.normal.apply(jg,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b/a}}},jg.scale={},jg.scale.linear=function(){return Oe([0,1],[0,1],rd,!1)},jg.scale.log=function(){return Ue(jg.scale.linear().domain([0,Math.LN10]),10,Ve,We)};var Xh=jg.format(".0e");jg.scale.pow=function(){return $e(jg.scale.linear(),1)},jg.scale.sqrt=function(){return jg.scale.pow().exponent(.5)},jg.scale.ordinal=function(){return af([],{t:"range",a:[[]]})},jg.scale.category10=function(){return jg.scale.ordinal().range(Yh)},jg.scale.category20=function(){return jg.scale.ordinal().range(Zh)},jg.scale.category20b=function(){return jg.scale.ordinal().range($h)},jg.scale.category20c=function(){return jg.scale.ordinal().range(_h)};var Yh=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Zh=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],$h=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],_h=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];jg.scale.quantile=function(){return bf([],[])},jg.scale.quantize=function(){return cf(0,1,[0,1])},jg.scale.threshold=function(){return df([.5],[0,1])},jg.scale.identity=function(){return ef([0,1])},jg.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+ai,h=e.apply(this,arguments)+ai,i=(g>h&&(i=g,g=h,h=i),h-g),j=Lg>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=bi?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=ff,c=gf,d=hf,e=jf;return a.innerRadius=function(c){return arguments.length?(b=kb(c),a):b},a.outerRadius=function(b){return arguments.length?(c=kb(b),a):c},a.startAngle=function(b){return arguments.length?(d=kb(b),a):d},a.endAngle=function(b){return arguments.length?(e=kb(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+ai;return[Math.cos(f)*a,Math.sin(f)*a]},a};var ai=-Lg/2,bi=2*Lg-1e-6;jg.svg.line.radial=function(){var a=Gc(kf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},Lc.reverse=Mc,Mc.reverse=Lc,jg.svg.area=function(){return lf(lb)},jg.svg.area.radial=function(){var a=lf(kf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},jg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+ai,k=j.call(a,e,d)+ai;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Lg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=kc,g=lc,h=mf,i=hf,j=jf;return a.radius=function(b){return arguments.length?(h=kb(b),a):h},a.source=function(b){return arguments.length?(f=kb(b),a):f},a.target=function(b){return arguments.length?(g=kb(b),a):g},a.startAngle=function(b){return arguments.length?(i=kb(b),a):i},a.endAngle=function(b){return arguments.length?(j=kb(b),a):j},a},jg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=kc,c=lc,d=nf;return a.source=function(c){return arguments.length?(b=kb(c),a):b},a.target=function(b){return arguments.length?(c=kb(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},jg.svg.diagonal.radial=function(){var a=jg.svg.diagonal(),b=nf,c=a.projection;return a.projection=function(a){return arguments.length?c(of(b=a)):b},a},jg.svg.symbol=function(){function a(a,d){return(ci.get(b.call(this,a,d))||rf)(c.call(this,a,d))}var b=qf,c=pf;return a.type=function(c){return arguments.length?(b=kb(c),a):b},a.size=function(b){return arguments.length?(c=kb(b),a):c},a};var ci=jg.map({circle:rf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*fi)),c=b*fi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/ei),c=b*ei/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/ei),c=b*ei/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});jg.svg.symbolTypes=ci.keys();var di,ei=Math.sqrt(3),fi=Math.tan(30*Ng),gi=[],hi=0,ii={ease:zd,delay:0,duration:250};gi.call=Bg.call,gi.empty=Bg.empty,gi.node=Bg.node,jg.transition=function(a){return arguments.length?di?a.transition():a:Gg.transition()},jg.transition.prototype=gi,gi.select=function(a){var b,c,d,e=this.id,f=[];"function"!=typeof a&&(a=s(a));for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j))?("__data__"in d&&(c.__data__=d.__data__),vf(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return sf(f,e)},gi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];"function"!=typeof a&&(a=t(a));for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)vf(e=c[n],n,g,f),b.push(e)}return sf(h,g)},gi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=C(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return sf(e,this.id,this.time).ease(this.ease())},gi.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):I(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},gi.attr=function(a,b){function c(){this.removeAttribute(f)}function d(){this.removeAttributeNS(f.space,f.local)}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var e=sd(a),f=jg.ns.qualify(a);return tf(this,"attr."+a,b,function(a){function b(){var b,c=this.getAttribute(f);return c!==a&&(b=e(c,a),function(a){this.setAttribute(f,b(a))})}function g(){var b,c=this.getAttributeNS(f.space,f.local);return c!==a&&(b=e(c,a),function(a){this.setAttributeNS(f.space,f.local,b(a))})}return null==a?f.local?d:c:(a+="",f.local?g:b)})},gi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=jg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},gi.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}var f=sd(a);return tf(this,"style."+a,b,function(b){function e(){var d,e=lg.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=f(e,b),function(b){this.style.setProperty(a,d(b),c)})}return null==b?d:(b+="",e)})},gi.styleTween=function(a,b,c){return arguments.length<3&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,lg.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})},gi.text=function(a){return tf(this,"text",a,uf)},gi.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})},gi.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=jg.ease.apply(jg,arguments)),I(this,function(c){c.__transition__[b].ease=a}))},gi.delay=function(a){var b=this.id;return I(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=0|a.call(c,c.__data__,d,e)}:(a|=0,function(c){c.__transition__[b].delay=a}))},gi.duration=function(a){var b=this.id;return I(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,0|a.call(c,c.__data__,d,e))}:(a=Math.max(1,0|a),function(c){c.__transition__[b].duration=a}))},gi.each=function(a,b){var c=this.id;if(arguments.length<2){var d=ii,e=di;di=c,I(this,function(b,d,e){ii=b.__transition__[c],a.call(b,b.__data__,d,e)}),ii=d,di=e}else I(this,function(d){d.__transition__[c].event.on(a,b)});return this},gi.transition=function(){for(var a,b,c,d,e=this.id,f=++hi,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,vf(c,j,f,d)),a.push(c)}return sf(g,f)},jg.svg.axis=function(){function a(a){a.each(function(){var a,l=jg.select(this),m=null==j?c.ticks?c.ticks.apply(c,i):c.domain():j,n=null==b?c.tickFormat?c.tickFormat.apply(c,i):String:b,o=yf(c,m,k),p=l.selectAll(".tick.minor").data(o,String),q=p.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),r=jg.transition(p.exit()).style("opacity",1e-6).remove(),s=jg.transition(p).style("opacity",1),t=l.selectAll(".tick.major").data(m,String),u=t.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),v=jg.transition(t.exit()).style("opacity",1e-6).remove(),w=jg.transition(t).style("opacity",1),x=Ke(c),y=l.selectAll(".domain").data([0]),z=(y.enter().append("path").attr("class","domain"),jg.transition(y)),A=c.copy(),B=this.__chart__||A;this.__chart__=A,u.append("line"),u.append("text");var C=u.select("line"),D=w.select("line"),E=t.select("text").text(n),F=u.select("text"),G=w.select("text");switch(d){case"bottom":a=wf,q.attr("y2",f),s.attr("x2",0).attr("y2",f),C.attr("y2",e),F.attr("y",Math.max(e,0)+h),D.attr("x2",0).attr("y2",e),G.attr("x",0).attr("y",Math.max(e,0)+h),E.attr("dy",".71em").style("text-anchor","middle"),z.attr("d","M"+x[0]+","+g+"V0H"+x[1]+"V"+g);break;case"top":a=wf,q.attr("y2",-f),s.attr("x2",0).attr("y2",-f),C.attr("y2",-e),F.attr("y",-(Math.max(e,0)+h)),D.attr("x2",0).attr("y2",-e),G.attr("x",0).attr("y",-(Math.max(e,0)+h)),E.attr("dy","0em").style("text-anchor","middle"),z.attr("d","M"+x[0]+","+-g+"V0H"+x[1]+"V"+-g);break;case"left":a=xf,q.attr("x2",-f),s.attr("x2",-f).attr("y2",0),C.attr("x2",-e),F.attr("x",-(Math.max(e,0)+h)),D.attr("x2",-e).attr("y2",0),G.attr("x",-(Math.max(e,0)+h)).attr("y",0),E.attr("dy",".32em").style("text-anchor","end"),z.attr("d","M"+-g+","+x[0]+"H0V"+x[1]+"H"+-g);break;case"right":a=xf,q.attr("x2",f),s.attr("x2",f).attr("y2",0),C.attr("x2",e),F.attr("x",Math.max(e,0)+h),D.attr("x2",e).attr("y2",0),G.attr("x",Math.max(e,0)+h).attr("y",0),E.attr("dy",".32em").style("text-anchor","start"),z.attr("d","M"+g+","+x[0]+"H0V"+x[1]+"H"+g)}if(c.ticks)u.call(a,B),w.call(a,A),v.call(a,A),q.call(a,B),s.call(a,A),r.call(a,A);else{var H=A.rangeBand()/2,I=function(a){return A(a)+H};u.call(a,I),w.call(a,I)}})}var b,c=jg.scale.linear(),d=ji,e=6,f=6,g=6,h=3,i=[10],j=null,k=0;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in ki?b+"":ji,a):d},a.ticks=function(){return arguments.length?(i=arguments,a):i},a.tickValues=function(b){return arguments.length?(j=b,a):j},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b,c){if(!arguments.length)return e;var d=arguments.length-1;return e=+b,f=d>1?+c:e,g=d>0?+arguments[d]:e,a},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(b){return arguments.length?(k=+b,a):k},a};var ji="bottom",ki={top:1,right:1,bottom:1,left:1};jg.svg.brush=function(){function a(f){f.each(function(){var f,g=jg.select(this),k=g.selectAll(".background").data([0]),l=g.selectAll(".extent").data([0]),m=g.selectAll(".resize").data(j,String);g.style("pointer-events","all").on("mousedown.brush",e).on("touchstart.brush",e),k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),l.enter().append("rect").attr("class","extent").style("cursor","move"),m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return li[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),m.style("display",a.empty()?"none":null),m.exit().remove(),h&&(f=Ke(h),k.attr("x",f[0]).attr("width",f[1]-f[0]),c(g)),i&&(f=Ke(i),k.attr("y",f[0]).attr("height",f[1]-f[0]),d(g)),b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)][0]+","+l[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",l[0][0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1][0]-l[0][0])}function d(a){a.select(".extent").attr("y",l[0][1]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1][1]-l[0][1])}function e(){function e(){var a=jg.event.changedTouches;return a?jg.touches(s,a)[0]:jg.mouse(s)}function j(){32==jg.event.keyCode&&(z||(q=null,A[0]-=l[1][0],A[1]-=l[1][1],z=2),k())}function m(){32==jg.event.keyCode&&2==z&&(A[0]+=l[1][0],A[1]+=l[1][1],z=0,k())}function n(){var a=e(),f=!1;r&&(a[0]+=r[0],a[1]+=r[1]),z||(jg.event.altKey?(q||(q=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]),A[0]=l[+(a[0]<q[0])][0],A[1]=l[+(a[1]<q[1])][1]):q=null),x&&o(a,h,0)&&(c(v),f=!0),y&&o(a,i,1)&&(d(v),f=!0),f&&(b(v),u({type:"brush",mode:z?"move":"resize"}))}function o(a,b,c){var d,e,g=Ke(b),h=g[0],i=g[1],j=A[c],k=l[1][c]-l[0][c];return z&&(h-=j,i-=k+j),d=Math.max(h,Math.min(i,a[c])),z?e=(d+=j)+k:(q&&(j=Math.max(h,Math.min(i,2*q[c]-d))),d>j?(e=d,d=j):e=j),l[0][c]!==d||l[1][c]!==e?(f=null,l[0][c]=d,l[1][c]=e,!0):void 0}function p(){n(),v.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),jg.select("body").style("cursor",null),B.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),u({type:"brushend"}),k()}var q,r,s=this,t=jg.select(jg.event.target),u=g.of(s,arguments),v=jg.select(s),w=t.datum(),x=!/^(n|s)$/.test(w)&&h,y=!/^(e|w)$/.test(w)&&i,z=t.classed("extent"),A=e(),B=jg.select(lg).on("mousemove.brush",n).on("mouseup.brush",p).on("touchmove.brush",n).on("touchend.brush",p).on("keydown.brush",j).on("keyup.brush",m);if(z)A[0]=l[0][0]-A[0],A[1]=l[0][1]-A[1];else if(w){var C=+/w$/.test(w),D=+/^n/.test(w);r=[l[1-C][0]-A[0],l[1-D][1]-A[1]],A[0]=l[C][0],A[1]=l[D][1]}else jg.event.altKey&&(q=A.slice());v.style("pointer-events","none").selectAll(".resize").style("display",null),jg.select("body").style("cursor",t.style("cursor")),u({type:"brushstart"}),n(),k()}var f,g=n(a,"brushstart","brush","brushend"),h=null,i=null,j=mi[0],l=[[0,0],[0,0]];
return a.x=function(b){return arguments.length?(h=b,j=mi[!h<<1|!i],a):h},a.y=function(b){return arguments.length?(i=b,j=mi[!h<<1|!i],a):i},a.extent=function(b){var c,d,e,g,j;return arguments.length?(f=[[0,0],[0,0]],h&&(c=b[0],d=b[1],i&&(c=c[0],d=d[0]),f[0][0]=c,f[1][0]=d,h.invert&&(c=h(c),d=h(d)),c>d&&(j=c,c=d,d=j),l[0][0]=0|c,l[1][0]=0|d),i&&(e=b[0],g=b[1],h&&(e=e[1],g=g[1]),f[0][1]=e,f[1][1]=g,i.invert&&(e=i(e),g=i(g)),e>g&&(j=e,e=g,g=j),l[0][1]=0|e,l[1][1]=0|g),a):(b=f||l,h&&(c=b[0][0],d=b[1][0],f||(c=l[0][0],d=l[1][0],h.invert&&(c=h.invert(c),d=h.invert(d)),c>d&&(j=c,c=d,d=j))),i&&(e=b[0][1],g=b[1][1],f||(e=l[0][1],g=l[1][1],i.invert&&(e=i.invert(e),g=i.invert(g)),e>g&&(j=e,e=g,g=j))),h&&i?[[c,e],[d,g]]:h?[c,d]:i&&[e,g])},a.clear=function(){return f=null,l[0][0]=l[0][1]=l[1][0]=l[1][1]=0,a},a.empty=function(){return h&&l[0][0]===l[1][0]||i&&l[0][1]===l[1][1]},jg.rebind(a,g,"on")};var li={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},mi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];jg.time={};var ni=Date,oi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];zf.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){pi.setUTCDate.apply(this._,arguments)},setDay:function(){pi.setUTCDay.apply(this._,arguments)},setFullYear:function(){pi.setUTCFullYear.apply(this._,arguments)},setHours:function(){pi.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){pi.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){pi.setUTCMinutes.apply(this._,arguments)},setMonth:function(){pi.setUTCMonth.apply(this._,arguments)},setSeconds:function(){pi.setUTCSeconds.apply(this._,arguments)},setTime:function(){pi.setTime.apply(this._,arguments)}};var pi=Date.prototype,qi="%a %b %e %X %Y",ri="%m/%d/%Y",si="%H:%M:%S",ti=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ui=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],vi=["January","February","March","April","May","June","July","August","September","October","November","December"],wi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];jg.time.year=Af(function(a){return a=jg.time.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),jg.time.years=jg.time.year.range,jg.time.years.utc=jg.time.year.utc.range,jg.time.day=Af(function(a){var b=new ni(1970,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),jg.time.days=jg.time.day.range,jg.time.days.utc=jg.time.day.utc.range,jg.time.dayOfYear=function(a){var b=jg.time.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},oi.forEach(function(a,b){a=a.toLowerCase(),b=7-b;var c=jg.time[a]=Af(function(a){return(a=jg.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=jg.time.year(a).getDay();return Math.floor((jg.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});jg.time[a+"s"]=c.range,jg.time[a+"s"].utc=c.utc.range,jg.time[a+"OfYear"]=function(a){var c=jg.time.year(a).getDay();return Math.floor((jg.time.dayOfYear(a)+(c+b)%7)/7)}}),jg.time.week=jg.time.sunday,jg.time.weeks=jg.time.sunday.range,jg.time.weeks.utc=jg.time.sunday.utc.range,jg.time.weekOfYear=jg.time.sundayOfYear,jg.time.format=function(a){function b(b){for(var d,e,f,g=[],h=-1,i=0;++h<c;)37===a.charCodeAt(h)&&(g.push(a.substring(i,h)),null!=(e=Di[d=a.charAt(++h)])&&(d=a.charAt(++h)),(f=Ei[d])&&(d=f(b,null==e?"e"===d?" ":"0":e)),g.push(d),i=h+1);return g.push(a.substring(i,h)),g.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},d=Cf(c,a,b,0);if(d!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var e=new ni;return e.setFullYear(c.y,c.m,c.d),e.setHours(c.H,c.M,c.S,c.L),e},b.toString=function(){return a},b};var xi=Df(ti),yi=Df(ui),zi=Df(vi),Ai=Ef(vi),Bi=Df(wi),Ci=Ef(wi),Di={"-":"",_:" ",0:"0"},Ei={a:function(a){return ui[a.getDay()]},A:function(a){return ti[a.getDay()]},b:function(a){return wi[a.getMonth()]},B:function(a){return vi[a.getMonth()]},c:jg.time.format(qi),d:function(a,b){return Ff(a.getDate(),b,2)},e:function(a,b){return Ff(a.getDate(),b,2)},H:function(a,b){return Ff(a.getHours(),b,2)},I:function(a,b){return Ff(a.getHours()%12||12,b,2)},j:function(a,b){return Ff(1+jg.time.dayOfYear(a),b,3)},L:function(a,b){return Ff(a.getMilliseconds(),b,3)},m:function(a,b){return Ff(a.getMonth()+1,b,2)},M:function(a,b){return Ff(a.getMinutes(),b,2)},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a,b){return Ff(a.getSeconds(),b,2)},U:function(a,b){return Ff(jg.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ff(jg.time.mondayOfYear(a),b,2)},x:jg.time.format(ri),X:jg.time.format(si),y:function(a,b){return Ff(a.getFullYear()%100,b,2)},Y:function(a,b){return Ff(a.getFullYear()%1e4,b,4)},Z:Xf,"%":function(){return"%"}},Fi={a:Gf,A:Hf,b:If,B:Jf,c:Kf,d:Rf,e:Rf,H:Sf,I:Sf,L:Vf,m:Qf,M:Tf,p:Wf,S:Uf,x:Lf,X:Mf,y:Of,Y:Nf},Gi=/^\s*\d+/,Hi=jg.map({am:0,pm:1});jg.time.format.utc=function(a){function b(a){try{ni=zf;var b=new ni;return b._=a,c(b)}finally{ni=Date}}var c=jg.time.format(a);return b.parse=function(a){try{ni=zf;var b=c.parse(a);return b&&b._}finally{ni=Date}},b.toString=c.toString,b};var Ii=jg.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");jg.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yf:Ii,Yf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Yf.toString=Ii.toString,jg.time.second=Af(function(a){return new ni(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),jg.time.seconds=jg.time.second.range,jg.time.seconds.utc=jg.time.second.utc.range,jg.time.minute=Af(function(a){return new ni(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),jg.time.minutes=jg.time.minute.range,jg.time.minutes.utc=jg.time.minute.utc.range,jg.time.hour=Af(function(a){var b=a.getTimezoneOffset()/60;return new ni(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),jg.time.hours=jg.time.hour.range,jg.time.hours.utc=jg.time.hour.utc.range,jg.time.month=Af(function(a){return a=jg.time.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),jg.time.months=jg.time.month.range,jg.time.months.utc=jg.time.month.utc.range;var Ji=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ki=[[jg.time.second,1],[jg.time.second,5],[jg.time.second,15],[jg.time.second,30],[jg.time.minute,1],[jg.time.minute,5],[jg.time.minute,15],[jg.time.minute,30],[jg.time.hour,1],[jg.time.hour,3],[jg.time.hour,6],[jg.time.hour,12],[jg.time.day,1],[jg.time.day,2],[jg.time.week,1],[jg.time.month,1],[jg.time.month,3],[jg.time.year,1]],Li=[[jg.time.format("%Y"),Ib],[jg.time.format("%B"),function(a){return a.getMonth()}],[jg.time.format("%b %d"),function(a){return 1!=a.getDate()}],[jg.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[jg.time.format("%I %p"),function(a){return a.getHours()}],[jg.time.format("%I:%M"),function(a){return a.getMinutes()}],[jg.time.format(":%S"),function(a){return a.getSeconds()}],[jg.time.format(".%L"),function(a){return a.getMilliseconds()}]],Mi=jg.scale.linear(),Ni=ag(Li);Ki.year=function(a,b){return Mi.domain(a.map(cg)).ticks(b).map(bg)},jg.time.scale=function(){return Zf(jg.scale.linear(),Ki,Ni)};var Oi=Ki.map(function(a){return[a[0].utc,a[1]]}),Pi=[[jg.time.format.utc("%Y"),Ib],[jg.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[jg.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[jg.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[jg.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[jg.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[jg.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[jg.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Qi=ag(Pi);return Oi.year=function(a,b){return Mi.domain(a.map(eg)).ticks(b).map(dg)},jg.time.scale.utc=function(){return Zf(jg.scale.linear(),Oi,Qi)},jg.text=function(){return jg.xhr.apply(jg,arguments).response(fg)},jg.json=function(a,b){return jg.xhr(a,"application/json",b).response(gg)},jg.html=function(a,b){return jg.xhr(a,"text/html",b).response(hg)},jg.xml=function(){return jg.xhr.apply(jg,arguments).response(ig)},jg}(),/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery-1.10.2.min.map
*/
function(a,b){function c(a){var b=a.length,c=kb.type(a);return kb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=zb[a]={};return kb.each(a.match(mb)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(kb.acceptData(a)){var f,g,h=kb.expando,i=a.nodeType,j=i?kb.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=bb.pop()||kb.guid++:h),j[k]||(j[k]=i?{}:{toJSON:kb.noop}),("object"==typeof c||"function"==typeof c)&&(e?j[k]=kb.extend(j[k],c):j[k].data=kb.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[kb.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[kb.camelCase(c)])):f=g,f}}function f(a,b,c){if(kb.acceptData(a)){var d,e,f=a.nodeType,g=f?kb.cache:a,i=f?a[kb.expando]:kb.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){kb.isArray(b)?b=b.concat(kb.map(b,kb.camelCase)):b in d?b=[b]:(b=kb.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!h(d):!kb.isEmptyObject(d))return}(c||(delete g[i].data,h(g[i])))&&(f?kb.cleanData([a],!0):kb.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Bb,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Ab.test(d)?kb.parseJSON(d):d}catch(f){}kb.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!kb.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return Y.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(kb.isFunction(b))return kb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return kb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Qb.test(b))return kb.filter(b,a,c);b=kb.filter(b,a)}return kb.grep(a,function(a){return kb.inArray(a,b)>=0!==c})}function n(a){var b=Ub.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){return kb.nodeName(a,"table")&&kb.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==kb.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=ec.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)kb._data(c,"globalEval",!b||kb._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&kb.hasData(a)){var c,d,e,f=kb._data(a),g=kb._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)kb.event.add(b,c,h[c][d])}g.data&&(g.data=kb.extend({},g.data))}}function t(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!kb.support.noCloneEvent&&b[kb.expando]){e=kb._data(b);for(d in e.events)kb.removeEvent(b,d,e.handle);b.removeAttribute(kb.expando)}"script"===c&&b.text!==a.text?(p(b).text=a.text,q(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),kb.support.html5Clone&&a.innerHTML&&!kb.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bc.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function u(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==W?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==W?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||kb.nodeName(e,c)?g.push(e):kb.merge(g,u(e,c));return c===b||c&&kb.nodeName(a,c)?kb.merge([a],g):g}function v(a){bc.test(a.type)&&(a.defaultChecked=a.checked)}function w(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yc.length;e--;)if(b=yc[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===kb.css(a,"display")||!kb.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=kb._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&x(d)&&(f[g]=kb._data(d,"olddisplay",C(d.nodeName)))):f[g]||(e=x(d),(c&&"none"!==c||!e)&&kb._data(d,"olddisplay",e?c:kb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function z(a,b,c){var d=rc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=kb.css(a,c+xc[f],!0,e)),d?("content"===c&&(g-=kb.css(a,"padding"+xc[f],!0,e)),"margin"!==c&&(g-=kb.css(a,"border"+xc[f]+"Width",!0,e))):(g+=kb.css(a,"padding"+xc[f],!0,e),"padding"!==c&&(g+=kb.css(a,"border"+xc[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kc(a),g=kb.support.boxSizing&&"border-box"===kb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lc(a,b,f),(0>e||null==e)&&(e=a.style[b]),sc.test(e))return e;d=g&&(kb.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a){var b=Y,c=uc[a];return c||(c=D(a,b),"none"!==c&&c||(jc=(jc||kb("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jc[0].contentWindow||jc[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=D(a,b),jc.detach()),uc[a]=c),c}function D(a,b){var c=kb(b.createElement(a)).appendTo(b.body),d=kb.css(c[0],"display");return c.remove(),d}function E(a,b,c,d){var e;if(kb.isArray(b))kb.each(b,function(b,e){c||Ac.test(a)?d(a,e):E(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==kb.type(b))d(a,b);else for(e in b)E(a+"["+e+"]",b[e],c,d)}function F(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(mb)||[];if(kb.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,c,d,e){function f(i){var j;return g[i]=!0,kb.each(a[i]||[],function(a,i){var k=i(c,d,e);return"string"!=typeof k||h||g[k]?h?!(j=k):b:(c.dataTypes.unshift(k),f(k),!1)}),j}var g={},h=a===Rc;return f(c.dataTypes[0])||!g["*"]&&f("*")}function H(a,c){var d,e,f=kb.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&kb.extend(!0,a,d),a}function I(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):b}function J(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function K(){try{return new a.XMLHttpRequest}catch(b){}}function L(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function M(){return setTimeout(function(){$c=b}),$c=kb.now()}function N(a,b,c){for(var d,e=(ed[b]||[]).concat(ed["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function O(a,b,c){var d,e,f=0,g=dd.length,h=kb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$c||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:kb.extend({},b),opts:kb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$c||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=kb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(P(k,j.opts.specialEasing);g>f;f++)if(d=dd[f].call(j,a,k,j.opts))return d;return kb.map(k,N,j),kb.isFunction(j.opts.start)&&j.opts.start.call(a,j),kb.fx.timer(kb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function P(a,b){var c,d,e,f,g;for(c in a)if(d=kb.camelCase(c),e=b[d],f=a[c],kb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=kb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Q(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&x(a),n=kb._data(a,"fxshow");c.queue||(h=kb._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,kb.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===kb.css(a,"display")&&"none"===kb.css(a,"float")&&(kb.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",kb.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ad.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||kb.style(a,d)}if(!kb.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=kb._data(a,"fxshow",{}),f&&(n.hidden=!m),m?kb(a).show():j.done(function(){kb(a).hide()}),j.done(function(){var b;kb._removeData(a,"fxshow");for(b in k)kb.style(a,b,k[b])});for(d in k)g=N(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function S(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function T(a){return kb.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var U,V,W=typeof b,X=a.location,Y=a.document,Z=Y.documentElement,$=a.jQuery,_=a.$,ab={},bb=[],cb="1.10.2",db=bb.concat,eb=bb.push,fb=bb.slice,gb=bb.indexOf,hb=ab.toString,ib=ab.hasOwnProperty,jb=cb.trim,kb=function(a,b){return new kb.fn.init(a,b,V)},lb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,mb=/\S+/g,nb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ob=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,qb=/^[\],:{}\s]*$/,rb=/(?:^|:|,)(?:\s*\[)+/g,sb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,tb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ub=/^-ms-/,vb=/-([\da-z])/gi,wb=function(a,b){return b.toUpperCase()},xb=function(a){(Y.addEventListener||"load"===a.type||"complete"===Y.readyState)&&(yb(),kb.ready())},yb=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",xb,!1),a.removeEventListener("load",xb,!1)):(Y.detachEvent("onreadystatechange",xb),a.detachEvent("onload",xb))};kb.fn=kb.prototype={jquery:cb,constructor:kb,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ob.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof kb?c[0]:c,kb.merge(this,kb.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),pb.test(e[1])&&kb.isPlainObject(c))for(e in c)kb.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Y.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):kb.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),kb.makeArray(a,this))},selector:"",length:0,toArray:function(){return fb.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=kb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return kb.each(this,a,b)},ready:function(a){return kb.ready.promise().done(a),this},slice:function(){return this.pushStack(fb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(kb.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:eb,sort:[].sort,splice:[].splice},kb.fn.init.prototype=kb.fn,kb.extend=kb.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||kb.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(kb.isPlainObject(d)||(c=kb.isArray(d)))?(c?(c=!1,g=a&&kb.isArray(a)?a:[]):g=a&&kb.isPlainObject(a)?a:{},h[e]=kb.extend(k,g,d)):d!==b&&(h[e]=d));return h},kb.extend({expando:"jQuery"+(cb+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===kb&&(a.$=_),b&&a.jQuery===kb&&(a.jQuery=$),kb},isReady:!1,readyWait:1,holdReady:function(a){a?kb.readyWait++:kb.ready(!0)},ready:function(a){if(a===!0?!--kb.readyWait:!kb.isReady){if(!Y.body)return setTimeout(kb.ready);kb.isReady=!0,a!==!0&&--kb.readyWait>0||(U.resolveWith(Y,[kb]),kb.fn.trigger&&kb(Y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===kb.type(a)},isArray:Array.isArray||function(a){return"array"===kb.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ab[hb.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==kb.type(a)||a.nodeType||kb.isWindow(a))return!1;try{if(a.constructor&&!ib.call(a,"constructor")&&!ib.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(kb.support.ownLast)for(c in a)return ib.call(a,c);for(c in a);return c===b||ib.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Y;var d=pb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=kb.buildFragment([a],b,e),e&&kb(e).remove(),kb.merge([],d.childNodes))},parseJSON:function(c){return a.JSON&&a.JSON.parse?a.JSON.parse(c):null===c?c:"string"==typeof c&&(c=kb.trim(c),c&&qb.test(c.replace(sb,"@").replace(tb,"]").replace(rb,"")))?Function("return "+c)():(kb.error("Invalid JSON: "+c),b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||kb.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&kb.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ub,"ms-").replace(vb,wb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:jb&&!jb.call("﻿ ")?function(a){return null==a?"":jb.call(a)}:function(a){return null==a?"":(a+"").replace(nb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?kb.merge(d,"string"==typeof a?[a]:a):eb.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(gb)return gb.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return db.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),kb.isFunction(a)?(d=fb.call(arguments,2),e=function(){return a.apply(c||this,d.concat(fb.call(arguments)))},e.guid=a.guid=a.guid||kb.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===kb.type(d)){f=!0;for(i in d)kb.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,kb.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(kb(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),kb.ready.promise=function(b){if(!U)if(U=kb.Deferred(),"complete"===Y.readyState)setTimeout(kb.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",xb,!1),a.addEventListener("load",xb,!1);else{Y.attachEvent("onreadystatechange",xb),a.attachEvent("onload",xb);var c=!1;try{c=null==a.frameElement&&Y.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!kb.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}yb(),kb.ready()}}()}return U.promise(b)},kb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){ab["[object "+b+"]"]=b.toLowerCase()}),V=kb(Y),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=tb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ab.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return ab.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wb,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=nb.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return ab.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return v(a.replace(jb,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){(!d||(e=lb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=mb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(jb," ")}),h=h.slice(d.length));for(g in z.filter)!(e=rb[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?cb.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):ab.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return cb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(jb,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}ab.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xb,yb),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=rb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xb,yb),nb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return ab.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,nb.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,ab=Z.push,bb=Z.slice,cb=Z.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},db="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",eb="[\\x20\\t\\r\\n\\f]",fb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",gb=fb.replace("w","w#"),hb="\\["+eb+"*("+fb+")"+eb+"*(?:([*^$|!~]?=)"+eb+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+gb+")|)|)"+eb+"*\\]",ib=":("+fb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+hb.replace(3,8)+")*)|.*)\\)|)",jb=RegExp("^"+eb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+eb+"+$","g"),lb=RegExp("^"+eb+"*,"+eb+"*"),mb=RegExp("^"+eb+"*([>+~]|"+eb+")"+eb+"*"),nb=RegExp(eb+"*[+~]"),ob=RegExp("="+eb+"*([^\\]'\"]*)"+eb+"*\\]","g"),pb=RegExp(ib),qb=RegExp("^"+gb+"$"),rb={ID:RegExp("^#("+fb+")"),CLASS:RegExp("^\\.("+fb+")"),TAG:RegExp("^("+fb.replace("w","w*")+")"),ATTR:RegExp("^"+hb),PSEUDO:RegExp("^"+ib),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+eb+"*(even|odd|(([+-]|)(\\d*)n|)"+eb+"*(?:([+-]|)"+eb+"*(\\d+)|))"+eb+"*\\)|)","i"),bool:RegExp("^(?:"+db+")$","i"),needsContext:RegExp("^"+eb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+eb+"*((?:-\\d)?\\d*)"+eb+"*\\)|)(?=[^-]|$)","i")},sb=/^[^{]+\{\s*\[native \w/,tb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ub=/^(?:input|select|textarea|button)$/i,vb=/^h\d$/i,wb=/'|\\/g,xb=RegExp("\\\\([\\da-f]{1,6}"+eb+"?|("+eb+")|.)","ig"),yb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(55296|d>>10,56320|1023&d)};try{ab.apply(Z=bb.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(zb){ab={apply:Z.length?function(a,b){_.apply(a,bb.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},x=c.support={},F=c.setDocument=function(a){var c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!B(c),d&&d.attachEvent&&d!==d.top&&d.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xb,yb);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xb,yb);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,c){return typeof c.getElementsByTagName!==W?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,c){return typeof c.getElementsByClassName!==W&&I?c.getElementsByClassName(a):b},K=[],J=[],(x.qsa=sb.test(c.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+eb+"*(?:value|"+db+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+eb+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sb.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ib)}),J=J.length&&RegExp(J.join("|")),K=K.length&&RegExp(K.join("|")),M=sb.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,b){if(a===b)return U=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return d?1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||M(O,a)?-1:b===c||M(O,b)?1:E?cb.call(E,a)-cb.call(E,b):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return U=!0,0;if(!f||!g)return a===c?-1:b===c?1:f?-1:g?1:E?cb.call(E,a)-cb.call(E,b):0;if(f===g)return h(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(ob,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(b)||J&&J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:rb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xb,yb),a[3]=(a[4]||a[5]||"").replace(xb,yb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return rb.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pb.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xb,yb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=RegExp("(^|"+eb+")"+a+"("+eb+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;
if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=cb.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(jb,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qb.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xb,yb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return vb.test(a.nodeName)},input:function(a){return ub.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;b>++d;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,c,d){return d?b:a.getAttribute(c,"type"===c.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,c,d){return d||"input"!==a.nodeName.toLowerCase()?b:a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(db,function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&e.specified?e.value:a[c]===!0?c.toLowerCase():null}),kb.find=c,kb.expr=c.selectors,kb.expr[":"]=kb.expr.pseudos,kb.unique=c.uniqueSort,kb.text=c.getText,kb.isXMLDoc=c.isXML,kb.contains=c.contains}(a);var zb={};kb.Callbacks=function(a){a="string"==typeof a?zb[a]||d(a):kb.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){kb.each(b,function(b,c){var e=kb.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&kb.each(arguments,function(a,b){for(var d;(d=kb.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?kb.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},kb.extend({Deferred:function(a){var b=[["resolve","done",kb.Callbacks("once memory"),"resolved"],["reject","fail",kb.Callbacks("once memory"),"rejected"],["notify","progress",kb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return kb.Deferred(function(c){kb.each(b,function(b,f){var g=f[0],h=kb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&kb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?kb.extend(a,d):d}},e={};return d.pipe=d.then,kb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=fb.call(arguments),g=f.length,h=1!==g||a&&kb.isFunction(a.promise)?g:0,i=1===h?a:kb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?fb.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&kb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),kb.support=function(b){var c,d,e,f,g,h,i,j,k,l=Y.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Y.createElement("select"),h=f.appendChild(Y.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Y.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=Y.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Y.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in kb(b))break;return b.ownLast="0"!==k,kb(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Y.getElementsByTagName("body")[0];g&&(c=Y.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",kb.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Y.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==W&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Ab=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Bb=/([A-Z])/g;kb.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?kb.cache[a[kb.expando]]:a[kb.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&kb.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),kb.fn.extend({data:function(a,c){var d,e,f=null,h=0,i=this[0];if(a===b){if(this.length&&(f=kb.data(i),1===i.nodeType&&!kb._data(i,"parsedAttrs"))){for(d=i.attributes;d.length>h;h++)e=d[h].name,0===e.indexOf("data-")&&(e=kb.camelCase(e.slice(5)),g(i,e,f[e]));kb._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){kb.data(this,a)}):arguments.length>1?this.each(function(){kb.data(this,a,c)}):i?g(i,a,kb.data(i,a)):null},removeData:function(a){return this.each(function(){kb.removeData(this,a)})}}),kb.extend({queue:function(a,c,d){var e;return a?(c=(c||"fx")+"queue",e=kb._data(a,c),d&&(!e||kb.isArray(d)?e=kb._data(a,c,kb.makeArray(d)):e.push(d)),e||[]):b},dequeue:function(a,b){b=b||"fx";var c=kb.queue(a,b),d=c.length,e=c.shift(),f=kb._queueHooks(a,b),g=function(){kb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return kb._data(a,c)||kb._data(a,c,{empty:kb.Callbacks("once memory").add(function(){kb._removeData(a,b+"queue"),kb._removeData(a,c)})})}}),kb.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),d>arguments.length?kb.queue(this[0],a):c===b?this:this.each(function(){var b=kb.queue(this,a,c);kb._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&kb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){kb.dequeue(this,a)})},delay:function(a,b){return a=kb.fx?kb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=kb.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=kb._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Cb,Db,Eb=/[\t\r\n\f]/g,Fb=/\r/g,Gb=/^(?:input|select|textarea|button|object)$/i,Hb=/^(?:a|area)$/i,Ib=/^(?:checked|selected)$/i,Jb=kb.support.getSetAttribute,Kb=kb.support.input;kb.fn.extend({attr:function(a,b){return kb.access(this,kb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){kb.removeAttr(this,a)})},prop:function(a,b){return kb.access(this,kb.prop,a,b,arguments.length>1)},removeProp:function(a){return a=kb.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(kb.isFunction(a))return this.each(function(b){kb(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(mb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Eb," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=kb.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(kb.isFunction(a))return this.each(function(b){kb(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(mb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Eb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?kb.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(kb.isFunction(a)?function(c){kb(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=kb(this),f=a.match(mb)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===W||"boolean"===c)&&(this.className&&kb._data(this,"__className__",this.className),this.className=this.className||a===!1?"":kb._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Eb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];return arguments.length?(e=kb.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,kb(this).val()):a,null==f?f="":"number"==typeof f?f+="":kb.isArray(f)&&(f=kb.map(f,function(a){return null==a?"":a+""})),d=kb.valHooks[this.type]||kb.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))})):f?(d=kb.valHooks[f.type]||kb.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Fb,""):null==c?"":c)):void 0}}),kb.extend({valHooks:{option:{get:function(a){var b=kb.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(kb.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&kb.nodeName(c.parentNode,"optgroup"))){if(b=kb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=kb.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=kb.inArray(kb(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?typeof a.getAttribute===W?kb.prop(a,c,d):(1===g&&kb.isXMLDoc(a)||(c=c.toLowerCase(),e=kb.attrHooks[c]||(kb.expr.match.bool.test(c)?Db:Cb)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=kb.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):(kb.removeAttr(a,c),b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(mb);if(f&&1===a.nodeType)for(;c=f[e++];)d=kb.propFix[c]||c,kb.expr.match.bool.test(c)?Kb&&Jb||!Ib.test(c)?a[d]=!1:a[kb.camelCase("default-"+c)]=a[d]=!1:kb.attr(a,c,""),a.removeAttribute(Jb?c:d)},attrHooks:{type:{set:function(a,b){if(!kb.support.radioValue&&"radio"===b&&kb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?(g=1!==h||!kb.isXMLDoc(a),g&&(c=kb.propFix[c]||c,f=kb.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]):void 0},propHooks:{tabIndex:{get:function(a){var b=kb.find.attr(a,"tabindex");return b?parseInt(b,10):Gb.test(a.nodeName)||Hb.test(a.nodeName)&&a.href?0:-1}}}}),Db={set:function(a,b,c){return b===!1?kb.removeAttr(a,c):Kb&&Jb||!Ib.test(c)?a.setAttribute(!Jb&&kb.propFix[c]||c,c):a[kb.camelCase("default-"+c)]=a[c]=!0,c}},kb.each(kb.expr.match.bool.source.match(/\w+/g),function(a,c){var d=kb.expr.attrHandle[c]||kb.find.attr;kb.expr.attrHandle[c]=Kb&&Jb||!Ib.test(c)?function(a,c,e){var f=kb.expr.attrHandle[c],g=e?b:(kb.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return kb.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[kb.camelCase("default-"+c)]?c.toLowerCase():null}}),Kb&&Jb||(kb.attrHooks.value={set:function(a,c,d){return kb.nodeName(a,"input")?(a.defaultValue=c,b):Cb&&Cb.set(a,c,d)}}),Jb||(Cb={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},kb.expr.attrHandle.id=kb.expr.attrHandle.name=kb.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},kb.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Cb.set},kb.attrHooks.contenteditable={set:function(a,b,c){Cb.set(a,""===b?!1:b,c)}},kb.each(["width","height"],function(a,c){kb.attrHooks[c]={set:function(a,d){return""===d?(a.setAttribute(c,"auto"),d):b}}})),kb.support.hrefNormalized||kb.each(["href","src"],function(a,b){kb.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),kb.support.style||(kb.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),kb.support.optSelected||(kb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),kb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){kb.propFix[this.toLowerCase()]=this}),kb.support.enctype||(kb.propFix.enctype="encoding"),kb.each(["radio","checkbox"],function(){kb.valHooks[this]={set:function(a,c){return kb.isArray(c)?a.checked=kb.inArray(kb(a).val(),c)>=0:b}},kb.support.checkOn||(kb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Lb=/^(?:input|select|textarea)$/i,Mb=/^key/,Nb=/^(?:mouse|contextmenu)|click/,Ob=/^(?:focusinfocus|focusoutblur)$/,Pb=/^([^.]*)(?:\.(.+)|)$/;kb.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=kb._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=kb.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof kb===W||a&&kb.event.triggered===a.type?b:kb.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(mb)||[""],i=c.length;i--;)g=Pb.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=kb.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=kb.event.special[o]||{},m=kb.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&kb.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),kb.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=kb.hasData(a)&&kb._data(a);if(q&&(k=q.events)){for(b=(b||"").match(mb)||[""],j=b.length;j--;)if(h=Pb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=kb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||kb.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)kb.event.remove(a,n+b[j],c,d,!0);kb.isEmptyObject(k)&&(delete q.handle,kb._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Y],o=ib.call(c,"type")?c.type:c,p=ib.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Y,3!==e.nodeType&&8!==e.nodeType&&!Ob.test(o+kb.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=0>o.indexOf(":")&&"on"+o,c=c[kb.expando]?c:new kb.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:kb.makeArray(d,[c]),k=kb.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!kb.isWindow(e)){for(j=k.delegateType||o,Ob.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Y)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(kb._data(i,"events")||{})[c.type]&&kb._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&kb.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&kb.acceptData(e)&&h&&e[o]&&!kb.isWindow(e)){l=e[h],l&&(e[h]=null),kb.event.triggered=o;try{e[o]()}catch(q){}kb.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=kb.event.fix(a);var c,d,e,f,g,h=[],i=fb.call(arguments),j=(kb._data(this,"events")||{})[a.type]||[],k=kb.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=kb.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((kb.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?kb(d,this).index(j)>=0:kb.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return c.length>i&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[kb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Nb.test(e)?this.mouseHooks:Mb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new kb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Y,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===k()&&this.blur?(this.blur(),!1):b},delegateType:"focusout"},click:{trigger:function(){return kb.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):b},_default:function(a){return kb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=kb.extend(new kb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?kb.event.trigger(e,null,b):kb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},kb.removeEvent=Y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===W&&(a[d]=null),a.detachEvent(d,c))},kb.Event=function(a,c){return this instanceof kb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,c&&kb.extend(this,c),this.timeStamp=a&&a.timeStamp||kb.now(),this[kb.expando]=!0,b):new kb.Event(a,c)},kb.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},kb.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){kb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!kb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),kb.support.submitBubbles||(kb.event.special.submit={setup:function(){return kb.nodeName(this,"form")?!1:(kb.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=kb.nodeName(c,"input")||kb.nodeName(c,"button")?c.form:b;d&&!kb._data(d,"submitBubbles")&&(kb.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),kb._data(d,"submitBubbles",!0))}),b)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&kb.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return kb.nodeName(this,"form")?!1:(kb.event.remove(this,"._submit"),b)}}),kb.support.changeBubbles||(kb.event.special.change={setup:function(){return Lb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(kb.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),kb.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),kb.event.simulate("change",this,a,!0)})),!1):(kb.event.add(this,"beforeactivate._change",function(a){var b=a.target;Lb.test(b.nodeName)&&!kb._data(b,"changeBubbles")&&(kb.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||kb.event.simulate("change",this.parentNode,a,!0)}),kb._data(b,"changeBubbles",!0))}),b)},handle:function(a){var c=a.target;return this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type?a.handleObj.handler.apply(this,arguments):b},teardown:function(){return kb.event.remove(this,"._change"),!Lb.test(this.nodeName)}}),kb.support.focusinBubbles||kb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){kb.event.simulate(b,a.target,kb.event.fix(a),!0)};kb.event.special[b]={setup:function(){0===c++&&Y.addEventListener(a,d,!0)},teardown:function(){0===--c&&Y.removeEventListener(a,d,!0)}}}),kb.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return kb().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=kb.guid++)),this.each(function(){kb.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,kb(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){kb.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){kb.event.trigger(a,b,this)})},triggerHandler:function(a,c){var d=this[0];return d?kb.event.trigger(a,c,d,!0):b}});var Qb=/^.[^:#\[\.,]*$/,Rb=/^(?:parents|prev(?:Until|All))/,Sb=kb.expr.match.needsContext,Tb={children:!0,contents:!0,next:!0,prev:!0};kb.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(kb(a).filter(function(){for(b=0;e>b;b++)if(kb.contains(d[b],this))return!0}));for(b=0;e>b;b++)kb.find(a,d[b],c);return c=this.pushStack(e>1?kb.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=kb(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(kb.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&Sb.test(a)?kb(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sb.test(a)||"string"!=typeof a?kb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?g.index(c)>-1:1===c.nodeType&&kb.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?kb.unique(f):f)},index:function(a){return a?"string"==typeof a?kb.inArray(this[0],kb(a)):kb.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?kb(a,b):kb.makeArray(a&&a.nodeType?[a]:a),d=kb.merge(this.get(),c);return this.pushStack(kb.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),kb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return kb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return kb.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return kb.dir(a,"nextSibling")
},prevAll:function(a){return kb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return kb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return kb.dir(a,"previousSibling",c)},siblings:function(a){return kb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return kb.sibling(a.firstChild)},contents:function(a){return kb.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:kb.merge([],a.childNodes)}},function(a,b){kb.fn[a]=function(c,d){var e=kb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=kb.filter(d,e)),this.length>1&&(Tb[a]||(e=kb.unique(e)),Rb.test(a)&&(e=e.reverse())),this.pushStack(e)}}),kb.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?kb.find.matchesSelector(d,a)?[d]:[]:kb.find.matches(a,kb.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!kb(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ub="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vb=/ jQuery\d+="(?:null|\d+)"/g,Wb=RegExp("<(?:"+Ub+")[\\s/>]","i"),Xb=/^\s+/,Yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Zb=/<([\w:]+)/,$b=/<tbody/i,_b=/<|&#?\w+;/,ac=/<(?:script|style|link)/i,bc=/^(?:checkbox|radio)$/i,cc=/checked\s*(?:[^=]|=\s*.checked.)/i,dc=/^$|\/(?:java|ecma)script/i,ec=/^true\/(.*)/,fc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gc={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:kb.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hc=n(Y),ic=hc.appendChild(Y.createElement("div"));gc.optgroup=gc.option,gc.tbody=gc.tfoot=gc.colgroup=gc.caption=gc.thead,gc.th=gc.td,kb.fn.extend({text:function(a){return kb.access(this,function(a){return a===b?kb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?kb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||kb.cleanData(u(c)),c.parentNode&&(b&&kb.contains(c.ownerDocument,c)&&r(u(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&kb.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&kb.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return kb.clone(this,a,b)})},html:function(a){return kb.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Vb,""):b;if(!("string"!=typeof a||ac.test(a)||!kb.support.htmlSerialize&&Wb.test(a)||!kb.support.leadingWhitespace&&Xb.test(a)||gc[(Zb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Yb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(kb.cleanData(u(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=kb.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),kb(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=db.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=kb.isFunction(n);if(o||!(1>=k||"string"!=typeof n||kb.support.checkClone)&&cc.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=kb.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=kb.map(u(i,"script"),p),f=g.length;k>j;j++)e=i,j!==m&&(e=kb.clone(e,!0,!0),f&&kb.merge(g,u(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,kb.map(g,q),j=0;f>j;j++)e=g[j],dc.test(e.type||"")&&!kb._data(e,"globalEval")&&kb.contains(h,e)&&(e.src?kb._evalUrl(e.src):kb.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fc,"")));i=d=null}return this}}),kb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){kb.fn[a]=function(a){for(var c,d=0,e=[],f=kb(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),kb(f[d])[b](c),eb.apply(e,c.get());return this.pushStack(e)}}),kb.extend({clone:function(a,b,c){var d,e,f,g,h,i=kb.contains(a.ownerDocument,a);if(kb.support.html5Clone||kb.isXMLDoc(a)||!Wb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ic.innerHTML=a.outerHTML,ic.removeChild(f=ic.firstChild)),!(kb.support.noCloneEvent&&kb.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||kb.isXMLDoc(a)))for(d=u(f),h=u(a),g=0;null!=(e=h[g]);++g)d[g]&&t(e,d[g]);if(b)if(c)for(h=h||u(a),d=d||u(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=u(f,"script"),d.length>0&&r(d,!i&&u(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=n(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===kb.type(f))kb.merge(o,f.nodeType?[f]:f);else if(_b.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Zb.exec(f)||["",""])[1].toLowerCase(),k=gc[i]||gc._default,h.innerHTML=k[1]+f.replace(Yb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!kb.support.leadingWhitespace&&Xb.test(f)&&o.push(b.createTextNode(Xb.exec(f)[0])),!kb.support.tbody)for(f="table"!==i||$b.test(f)?"<table>"!==k[1]||$b.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)kb.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(kb.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else o.push(b.createTextNode(f));for(h&&m.removeChild(h),kb.support.appendChecked||kb.grep(u(o,"input"),v),p=0;f=o[p++];)if((!d||-1===kb.inArray(f,d))&&(g=kb.contains(f.ownerDocument,f),h=u(m.appendChild(f),"script"),g&&r(h),c))for(e=0;f=h[e++];)dc.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=kb.expando,i=kb.cache,j=kb.support.deleteExpando,k=kb.event.special;null!=(c=a[g]);g++)if((b||kb.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?kb.event.remove(c,d):kb.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==W?c.removeAttribute(h):c[h]=null,bb.push(e))}},_evalUrl:function(a){return kb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),kb.fn.extend({wrapAll:function(a){if(kb.isFunction(a))return this.each(function(b){kb(this).wrapAll(a.call(this,b))});if(this[0]){var b=kb(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(kb.isFunction(a)?function(b){kb(this).wrapInner(a.call(this,b))}:function(){var b=kb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=kb.isFunction(a);return this.each(function(c){kb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){kb.nodeName(this,"body")||kb(this).replaceWith(this.childNodes)}).end()}});var jc,kc,lc,mc=/alpha\([^)]*\)/i,nc=/opacity\s*=\s*([^)]*)/,oc=/^(top|right|bottom|left)$/,pc=/^(none|table(?!-c[ea]).+)/,qc=/^margin/,rc=RegExp("^("+lb+")(.*)$","i"),sc=RegExp("^("+lb+")(?!px)[a-z%]+$","i"),tc=RegExp("^([+-])=("+lb+")","i"),uc={BODY:"block"},vc={position:"absolute",visibility:"hidden",display:"block"},wc={letterSpacing:0,fontWeight:400},xc=["Top","Right","Bottom","Left"],yc=["Webkit","O","Moz","ms"];kb.fn.extend({css:function(a,c){return kb.access(this,function(a,c,d){var e,f,g={},h=0;if(kb.isArray(c)){for(f=kc(a),e=c.length;e>h;h++)g[c[h]]=kb.css(a,c[h],!1,f);return g}return d!==b?kb.style(a,c,d):kb.css(a,c)},a,c,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){x(this)?kb(this).show():kb(this).hide()})}}),kb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":kb.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=kb.camelCase(c),j=a.style;if(c=kb.cssProps[i]||(kb.cssProps[i]=w(j,i)),h=kb.cssHooks[c]||kb.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(kb.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||kb.cssNumber[i]||(d+="px"),kb.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=kb.camelCase(c);return c=kb.cssProps[i]||(kb.cssProps[i]=w(a.style,i)),h=kb.cssHooks[c]||kb.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lc(a,c,e)),"normal"===g&&c in wc&&(g=wc[c]),""===d||d?(f=parseFloat(g),d===!0||kb.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(kc=function(b){return a.getComputedStyle(b,null)},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||kb.contains(a.ownerDocument,a)||(i=kb.style(a,c)),sc.test(i)&&qc.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Y.documentElement.currentStyle&&(kc=function(a){return a.currentStyle},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sc.test(i)&&!oc.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),kb.each(["height","width"],function(a,c){kb.cssHooks[c]={get:function(a,d,e){return d?0===a.offsetWidth&&pc.test(kb.css(a,"display"))?kb.swap(a,vc,function(){return B(a,c,e)}):B(a,c,e):b},set:function(a,b,d){var e=d&&kc(a);return z(a,b,d?A(a,c,d,kb.support.boxSizing&&"border-box"===kb.css(a,"boxSizing",!1,e),e):0)}}}),kb.support.opacity||(kb.cssHooks.opacity={get:function(a,b){return nc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=kb.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===kb.trim(f.replace(mc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mc.test(f)?f.replace(mc,e):f+" "+e)}}),kb(function(){kb.support.reliableMarginRight||(kb.cssHooks.marginRight={get:function(a,c){return c?kb.swap(a,{display:"inline-block"},lc,[a,"marginRight"]):b}}),!kb.support.pixelPosition&&kb.fn.position&&kb.each(["top","left"],function(a,c){kb.cssHooks[c]={get:function(a,d){return d?(d=lc(a,c),sc.test(d)?kb(a).position()[c]+"px":d):b}}})}),kb.expr&&kb.expr.filters&&(kb.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!kb.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||kb.css(a,"display"))},kb.expr.filters.visible=function(a){return!kb.expr.filters.hidden(a)}),kb.each({margin:"",padding:"",border:"Width"},function(a,b){kb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xc[d]+b]=f[d]||f[d-2]||f[0];return e}},qc.test(a)||(kb.cssHooks[a+b].set=z)});var zc=/%20/g,Ac=/\[\]$/,Bc=/\r?\n/g,Cc=/^(?:submit|button|image|reset|file)$/i,Dc=/^(?:input|select|textarea|keygen)/i;kb.fn.extend({serialize:function(){return kb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=kb.prop(this,"elements");return a?kb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!kb(this).is(":disabled")&&Dc.test(this.nodeName)&&!Cc.test(a)&&(this.checked||!bc.test(a))}).map(function(a,b){var c=kb(this).val();return null==c?null:kb.isArray(c)?kb.map(c,function(a){return{name:b.name,value:a.replace(Bc,"\r\n")}}):{name:b.name,value:c.replace(Bc,"\r\n")}}).get()}}),kb.param=function(a,c){var d,e=[],f=function(a,b){b=kb.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=kb.ajaxSettings&&kb.ajaxSettings.traditional),kb.isArray(a)||a.jquery&&!kb.isPlainObject(a))kb.each(a,function(){f(this.name,this.value)});else for(d in a)E(d,a[d],c,f);return e.join("&").replace(zc,"+")},kb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){kb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),kb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ec,Fc,Gc=kb.now(),Hc=/\?/,Ic=/#.*$/,Jc=/([?&])_=[^&]*/,Kc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mc=/^(?:GET|HEAD)$/,Nc=/^\/\//,Oc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pc=kb.fn.load,Qc={},Rc={},Sc="*/".concat("*");try{Fc=X.href}catch(Tc){Fc=Y.createElement("a"),Fc.href="",Fc=Fc.href}Ec=Oc.exec(Fc.toLowerCase())||[],kb.fn.load=function(a,c,d){if("string"!=typeof a&&Pc)return Pc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),kb.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&kb.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?kb("<div>").append(kb.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},kb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){kb.fn[b]=function(a){return this.on(b,a)}}),kb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fc,type:"GET",isLocal:Lc.test(Ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":kb.parseJSON,"text xml":kb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,kb.ajaxSettings),b):H(kb.ajaxSettings,a)},ajaxPrefilter:F(Qc),ajaxTransport:F(Rc),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&300>a||304===a,d&&(t=I(m,w,d)),t=J(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(kb.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(kb.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--kb.active||kb.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=kb.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?kb(n):kb.event,p=kb.Deferred(),q=kb.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kc.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fc)+"").replace(Ic,"").replace(Nc,Ec[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=kb.trim(m.dataType||"*").toLowerCase().match(mb)||[""],null==m.crossDomain&&(e=Oc.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Ec[1]&&e[2]===Ec[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Ec[3]||("http:"===Ec[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=kb.param(m.data,m.traditional)),G(Qc,m,c,w),2===u)return w;j=m.global,j&&0===kb.active++&&kb.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mc.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hc.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jc.test(g)?g.replace(Jc,"$1_="+Gc++):g+(Hc.test(g)?"&":"?")+"_="+Gc++)),m.ifModified&&(kb.lastModified[g]&&w.setRequestHeader("If-Modified-Since",kb.lastModified[g]),kb.etag[g]&&w.setRequestHeader("If-None-Match",kb.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sc+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=G(Rc,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return kb.get(a,b,c,"json")},getScript:function(a,c){return kb.get(a,b,c,"script")}}),kb.each(["get","post"],function(a,c){kb[c]=function(a,d,e,f){return kb.isFunction(d)&&(f=f||e,e=d,d=b),kb.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),kb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return kb.globalEval(a),a}}}),kb.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),kb.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Y.head||kb("head")[0]||Y.documentElement;return{send:function(b,e){c=Y.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Uc=[],Vc=/(=)\?(?=&|$)|\?\?/;kb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Uc.pop()||kb.expando+"_"+Gc++;return this[a]=!0,a}}),kb.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vc.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vc.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=kb.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vc,"$1"+f):c.jsonp!==!1&&(c.url+=(Hc.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||kb.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Uc.push(f)),h&&kb.isFunction(g)&&g(h[0]),h=g=b}),"script"):b});var Wc,Xc,Yc=0,Zc=a.ActiveXObject&&function(){var a;for(a in Wc)Wc[a](b,!0)};kb.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&K()||L()}:K,Xc=kb.ajaxSettings.xhr(),kb.support.cors=!!Xc&&"withCredentials"in Xc,Xc=kb.support.ajax=!!Xc,Xc&&kb.ajaxTransport(function(c){if(!c.crossDomain||kb.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=kb.noop,Zc&&delete Wc[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yc,Zc&&(Wc||(Wc={},kb(a).unload(Zc)),Wc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $c,_c,ad=/^(?:toggle|show|hide)$/,bd=RegExp("^(?:([+-])=|)("+lb+")([a-z%]*)$","i"),cd=/queueHooks$/,dd=[Q],ed={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bd.exec(b),f=e&&e[3]||(kb.cssNumber[a]?"":"px"),g=(kb.cssNumber[a]||"px"!==f&&+d)&&bd.exec(kb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,kb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};kb.Animation=kb.extend(O,{tweener:function(a,b){kb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ed[c]=ed[c]||[],ed[c].unshift(b)},prefilter:function(a,b){b?dd.unshift(a):dd.push(a)}}),kb.Tween=R,R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(kb.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.pos=b=this.options.duration?kb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=kb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){kb.fx.step[a.prop]?kb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[kb.cssProps[a.prop]]||kb.cssHooks[a.prop])?kb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},kb.each(["toggle","show","hide"],function(a,b){var c=kb.fn[b];kb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(S(b,!0),a,d,e)}}),kb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=kb.isEmptyObject(a),f=kb.speed(b,c,d),g=function(){var b=O(this,kb.extend({},a),f);(e||kb._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=kb.timers,g=kb._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&kb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=kb._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=kb.timers,g=d?d.length:0;for(c.finish=!0,kb.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),kb.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){kb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),kb.speed=function(a,b,c){var d=a&&"object"==typeof a?kb.extend({},a):{complete:c||!c&&b||kb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!kb.isFunction(b)&&b};return d.duration=kb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in kb.fx.speeds?kb.fx.speeds[d.duration]:kb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){kb.isFunction(d.old)&&d.old.call(this),d.queue&&kb.dequeue(this,d.queue)},d},kb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},kb.timers=[],kb.fx=R.prototype.init,kb.fx.tick=function(){var a,c=kb.timers,d=0;for($c=kb.now();c.length>d;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||kb.fx.stop(),$c=b},kb.fx.timer=function(a){a()&&kb.timers.push(a)&&kb.fx.start()},kb.fx.interval=13,kb.fx.start=function(){_c||(_c=setInterval(kb.fx.tick,kb.fx.interval))},kb.fx.stop=function(){clearInterval(_c),_c=null},kb.fx.speeds={slow:600,fast:200,_default:400},kb.fx.step={},kb.expr&&kb.expr.filters&&(kb.expr.filters.animated=function(a){return kb.grep(kb.timers,function(b){return a===b.elem}).length}),kb.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){kb.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;return g?(c=g.documentElement,kb.contains(c,f)?(typeof f.getBoundingClientRect!==W&&(e=f.getBoundingClientRect()),d=T(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e):void 0},kb.offset={setOffset:function(a,b,c){var d=kb.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=kb(a),h=g.offset(),i=kb.css(a,"top"),j=kb.css(a,"left"),k=("absolute"===d||"fixed"===d)&&kb.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),kb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},kb.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===kb.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),kb.nodeName(a[0],"html")||(c=a.offset()),c.top+=kb.css(a[0],"borderTopWidth",!0),c.left+=kb.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-kb.css(d,"marginTop",!0),left:b.left-c.left-kb.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Z;a&&!kb.nodeName(a,"html")&&"static"===kb.css(a,"position");)a=a.offsetParent;return a||Z})}}),kb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);kb.fn[a]=function(e){return kb.access(this,function(a,e,f){var g=T(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:(g?g.scrollTo(d?kb(g).scrollLeft():f,d?f:kb(g).scrollTop()):a[e]=f,b)},a,e,arguments.length,null)}}),kb.each({Height:"height",Width:"width"},function(a,c){kb.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){kb.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return kb.access(this,function(c,d,e){var f;return kb.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?kb.css(c,d,h):kb.style(c,d,e,h)},c,g?e:b,g,null)}})}),kb.fn.size=function(){return this.length},kb.fn.andSelf=kb.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=kb:(a.jQuery=a.$=kb,"function"==typeof define&&define.amd&&define("jquery",[],function(){return kb}))}(window),/*! jQuery UI - v1.10.4 - 2014-04-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.datepicker.js, jquery.ui.slider.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||c:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)
})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},a.ui.ddmanager.droppables[c.scope]=a.ui.ddmanager.droppables[c.scope]||[],a.ui.ddmanager.droppables[c.scope].push(this),c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=(a.positionAbs||a.position.absolute).top,i=g+a.helperProportions.width,j=h+a.helperProportions.height,k=c.offset.left,l=c.offset.top,m=k+c.proportions().width,n=l+c.proportions().height;switch(d){case"fit":return g>=k&&m>=i&&h>=l&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&m>i-a.helperProportions.width/2&&h+a.helperProportions.height/2>l&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,l,c.proportions().height)&&b(e,k,c.proportions().width);case"touch":return(h>=l&&n>=h||j>=l&&n>=j||l>h&&j>n)&&(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=Math.abs(g.parentData.left)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(n-j>0?(b.size.height=n,b.position.top=f.top-l):(b.size.height=j,b.position.top=f.top+e.height-j),m-i>0?(b.size.width=m,b.position.left=f.left-k):(b.size.width=i,b.position.left=f.left+e.width-i))}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})
}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.4"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0
}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,ab=a.drawYear;if(0>_&&(_+=12,ab--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(ab,_,1))>b;)_--,0>_&&(_=11,ab--);for(a.drawMonth=_,a.drawYear=ab,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(ab,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,ab,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(ab,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,ab,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(ab,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,ab,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(ab,_),ab===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(ab,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(ab,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,ab++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.4"}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))
},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),// Knockout JavaScript library v3.0.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,f=b.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],a):a(b.ko={})}(function(g){function h(a,b){return null===a||typeof a in k?a===b:!1}function i(a,b,c,d){j.d[a]={init:function(a){return j.a.f.set(a,p,{}),{controlsDescendantBindings:!0}},update:function(a,e,f,g,h){f=j.a.f.get(a,p),e=j.a.c(e()),g=!c!=!e;var i=!f.ob;(i||b||g!==f.Db)&&(i&&(f.ob=j.a.Ya(j.e.childNodes(a),!0)),g?(i||j.e.S(a,j.a.Ya(f.ob)),j.Ta(d?d(h,e):h,a)):j.e.Z(a),f.Db=g)}},j.g.Y[a]=!1,j.e.P[a]=!0}var j="undefined"!=typeof g?g:{};j.b=function(a,b){for(var c=a.split("."),d=j,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},j.s=function(a,b,c){a[b]=c},j.version="3.0.0",j.b("version",j.version),j.a=function(){function g(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if("input"!==j.a.v(a)||!a.type||"click"!=b.toLowerCase())return!1;var c=a.type;return"checkbox"==c||"radio"==c}var i={},k={};i[d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],i.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),g(i,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)k[b[c]]=a});var l={propertychange:!0},m=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];);return b>4?b:a}();return{$a:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],n:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c])},l:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},Ua:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d]))return a[d];return null},ia:function(a,b){var c=j.a.l(a,b);c>=0&&a.splice(c,1)},Va:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>j.a.l(b,a[c])&&b.push(a[c]);return b},ha:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d]));return c},ga:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d])&&c.push(a[d]);return c},X:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},V:function(a,b,c){var d=j.a.l(j.a.Ha(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},K:g,Da:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},wa:function(a){for(;a.firstChild;)j.removeNode(a.firstChild)},Vb:function(a){a=j.a.Q(a);for(var b=c.createElement("div"),d=0,e=a.length;e>d;d++)b.appendChild(j.L(a[d]));return b},Ya:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?j.L(f):f)}return e},S:function(a,b){if(j.a.wa(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},nb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)j.removeNode(c[f])}},$:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},qb:function(a,b){7>m?a.setAttribute("selected",b):a.selected=b},la:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ec:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=j.a.la(d[e]);""!==g&&c.push(g)}return c},ac:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},Gb:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},va:function(a){return j.a.Gb(a,a.ownerDocument.documentElement)},Ra:function(a){return!!j.a.Ua(a,j.a.va)},v:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},r:function(a,b,c){var d=m&&l[b];if(d||"undefined"==typeof e)if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,f),j.a.C.ea(a,function(){a.detachEvent(g,f)})}else a.addEventListener(b,c,!1);else{if(h(a,b)){var i=c;c=function(a,b){var c=this.checked;b&&(this.checked=!0!==b.Ab),i.call(this,a),this.checked=c}}e(a).bind(b,c)}},da:function(a,d){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof e){var f=[];h(a,d)&&f.push({Ab:a.checked}),e(a).trigger(d,f)}else if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");f=c.createEvent(k[d]||"HTMLEvents"),f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(f)}else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");h(a,d)&&(a.checked=!0!==a.checked),a.fireEvent("on"+d)}},c:function(a){return j.M(a)?a():a},Ha:function(a){return j.M(a)?a.t():a},ma:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];j.a.n(b.match(d),function(a){j.a.V(e,a,c)}),a.className=e.join(" ")}},Ma:function(b,d){var e=j.a.c(d);(null===e||e===a)&&(e="");var f=j.e.firstChild(b);!f||3!=f.nodeType||j.e.nextSibling(f)?j.e.S(b,[c.createTextNode(e)]):f.data=e,j.a.Jb(b)},pb:function(a,b){if(a.name=b,7>=m)try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},Jb:function(a){m>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Hb:function(a){if(m){var b=a.style.width;a.style.width=0,a.style.width=b}},Zb:function(a,b){a=j.a.c(a),b=j.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},Q:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},cc:6===m,dc:7===m,ja:m,ab:function(a,b){for(var c=j.a.Q(a.getElementsByTagName("input")).concat(j.a.Q(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},Wb:function(a){return"string"==typeof a&&(a=j.a.la(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},Na:function(a,b,c){if(!f||!f.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(j.a.c(a),b,c)},Xb:function(a,b,d){d=d||{};var e=d.params||{},f=d.includeFields||this.$a,h=a;if("object"==typeof a&&"form"===j.a.v(a))for(var h=a.action,i=f.length-1;i>=0;i--)for(var k=j.a.ab(a,f[i]),l=k.length-1;l>=0;l--)e[k[l].name]=k[l].value;b=j.a.c(b);var m=c.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in b)a=c.createElement("input"),a.name=n,a.value=j.a.Na(j.a.c(b[n])),m.appendChild(a);g(e,function(a,b){var d=c.createElement("input");d.name=a,d.value=b,m.appendChild(d)}),c.body.appendChild(m),d.submitter?d.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),j.b("utils",j.a),j.b("utils.arrayForEach",j.a.n),j.b("utils.arrayFirst",j.a.Ua),j.b("utils.arrayFilter",j.a.ga),j.b("utils.arrayGetDistinctValues",j.a.Va),j.b("utils.arrayIndexOf",j.a.l),j.b("utils.arrayMap",j.a.ha),j.b("utils.arrayPushAll",j.a.X),j.b("utils.arrayRemoveItem",j.a.ia),j.b("utils.extend",j.a.extend),j.b("utils.fieldsIncludedWithJsonPost",j.a.$a),j.b("utils.getFormFields",j.a.ab),j.b("utils.peekObservable",j.a.Ha),j.b("utils.postJson",j.a.Xb),j.b("utils.parseJson",j.a.Wb),j.b("utils.registerEventHandler",j.a.r),j.b("utils.stringifyJson",j.a.Na),j.b("utils.range",j.a.Zb),j.b("utils.toggleDomNodeCssClass",j.a.ma),j.b("utils.triggerEvent",j.a.da),j.b("utils.unwrapObservable",j.a.c),j.b("utils.objectForEach",j.a.K),j.b("utils.addOrRemoveItem",j.a.V),j.b("unwrap",j.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),j.a.f=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){(e!==a||b(c,!1)!==a)&&(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},D:function(){return c++ +d}}},j.b("utils.domData",j.a.f),j.b("utils.domData.clear",j.a.f.clear),j.a.C=new function(){function b(b,c){var e=j.a.f.get(b,d);return e===a&&c&&(e=[],j.a.f.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),f=0;f<d.length;f++)d[f](a);if(j.a.f.clear(a),"function"==typeof e&&"function"==typeof e.cleanData&&e.cleanData([a]),g[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=j.a.f.D(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ea:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},mb:function(c,e){var f=b(c,!1);f&&(j.a.ia(f,e),0==f.length&&j.a.f.set(c,d,a))},L:function(a){if(f[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];j.a.X(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++)c(b[d])}return a},removeNode:function(a){j.L(a),a.parentNode&&a.parentNode.removeChild(a)}}},j.L=j.a.C.L,j.removeNode=j.a.C.removeNode,j.b("cleanNode",j.L),j.b("removeNode",j.removeNode),j.b("utils.domNodeDisposal",j.a.C),j.b("utils.domNodeDisposal.addDisposeCallback",j.a.C.ea),j.b("utils.domNodeDisposal.removeDisposeCallback",j.a.C.mb),function(){j.a.Fa=function(a){var d;if("undefined"!=typeof e){if(e.parseHTML)d=e.parseHTML(a)||[];else if((d=e.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var f=j.a.la(a).toLowerCase();for(d=c.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+f[1]+a+f[2]+"</div>","function"==typeof b.innerShiv?d.appendChild(b.innerShiv(a)):d.innerHTML=a;f[0]--;)d=d.lastChild;d=j.a.Q(d.lastChild.childNodes)}return d},j.a.Ka=function(b,c){if(j.a.wa(b),c=j.a.c(c),null!==c&&c!==a)if("string"!=typeof c&&(c=c.toString()),"undefined"!=typeof e)e(b).html(c);else for(var d=j.a.Fa(c),f=0;f<d.length;f++)b.appendChild(d[f])}}(),j.b("utils.parseHtmlFragment",j.a.Fa),j.b("utils.setHtml",j.a.Ka),j.u=function(){function b(a,c){if(a)if(8==a.nodeType){var d=j.u.jb(a.nodeValue);null!=d&&c.push({Fb:a,Tb:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;f>d;d++)b(e[d],c)}var c={};return{Ca:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},ub:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},vb:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].Fb,h=[g];c&&j.a.X(h,c),j.u.ub(d[e].Tb,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},jb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),j.b("memoization",j.u),j.b("memoization.memoize",j.u.Ca),j.b("memoization.unmemoize",j.u.ub),j.b("memoization.parseMemoText",j.u.jb),j.b("memoization.unmemoizeDomNodeAndDescendants",j.u.vb),j.xa={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return j.h({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},notify:function(a,b){a.equalityComparer="always"==b?null:h}};var k={undefined:1,"boolean":1,number:1,string:1};j.b("extenders",j.xa),j.sb=function(a,b,c){this.target=a,this.qa=b,this.Eb=c,j.s(this,"dispose",this.B)},j.sb.prototype.B=function(){this.Qb=!0,this.Eb()},j.ca=function(){this.F={},j.a.extend(this,j.ca.fn),j.s(this,"subscribe",this.T),j.s(this,"extend",this.extend),j.s(this,"getSubscriptionsCount",this.Lb)};var l="change";j.ca.fn={T:function(a,b,c){c=c||l;var d=new j.sb(this,b?a.bind(b):a,function(){j.a.ia(this.F[c],d)}.bind(this));return this.F[c]||(this.F[c]=[]),this.F[c].push(d),d},notifySubscribers:function(a,b){if(b=b||l,this.cb(b))try{j.i.Wa();for(var c,d=this.F[b].slice(0),e=0;c=d[e];++e)c&&!0!==c.Qb&&c.qa(a)}finally{j.i.end()}},cb:function(a){return this.F[a]&&this.F[a].length},Lb:function(){var a=0;return j.a.K(this.F,function(b,c){a+=c.length}),a},extend:function(a){var b=this;return a&&j.a.K(a,function(a,c){var d=j.xa[a];"function"==typeof d&&(b=d(b,c)||b)}),b}},j.fb=function(a){return null!=a&&"function"==typeof a.T&&"function"==typeof a.notifySubscribers},j.b("subscribable",j.ca),j.b("isSubscribable",j.fb),j.i=function(){var a=[];return{Wa:function(b){a.push(b&&{qa:b,Za:[]})},end:function(){a.pop()},lb:function(b){if(!j.fb(b))throw Error("Only subscribable things can act as dependencies");if(0<a.length){var c=a[a.length-1];!c||0<=j.a.l(c.Za,b)||(c.Za.push(b),c.qa(b))}},p:function(b,c,d){try{return a.push(null),b.apply(c,d||[])}finally{a.pop()}}}}(),j.q=function(a){function b(){return 0<arguments.length?(b.equalityComparer&&b.equalityComparer(c,arguments[0])||(b.O(),c=arguments[0],b.N()),this):(j.i.lb(b),c)}var c=a;return j.ca.call(b),b.t=function(){return c},b.N=function(){b.notifySubscribers(c)},b.O=function(){b.notifySubscribers(c,"beforeChange")},j.a.extend(b,j.q.fn),j.s(b,"peek",b.t),j.s(b,"valueHasMutated",b.N),j.s(b,"valueWillMutate",b.O),b},j.q.fn={equalityComparer:h};var m=j.q.Yb="__ko_proto__";j.q.fn[m]=j.q,j.ya=function(b,c){return null===b||b===a||b[m]===a?!1:b[m]===c?!0:j.ya(b[m],c)},j.M=function(a){return j.ya(a,j.q)},j.gb=function(a){return"function"==typeof a&&a[m]===j.q||"function"==typeof a&&a[m]===j.h&&a.Nb?!0:!1},j.b("observable",j.q),j.b("isObservable",j.M),j.b("isWriteableObservable",j.gb),j.ba=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=j.q(a),j.a.extend(a,j.ba.fn),a.extend({trackArrayChanges:!0})},j.ba.fn={remove:function(a){for(var b=this.t(),c=[],d="function"!=typeof a||j.M(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.O(),c.push(f),b.splice(e,1),e--)}return c.length&&this.N(),c},removeAll:function(b){if(b===a){var c=this.t(),d=c.slice(0);return this.O(),c.splice(0,c.length),this.N(),d}return b?this.remove(function(a){return 0<=j.a.l(b,a)}):[]},destroy:function(a){var b=this.t(),c="function"!=typeof a||j.M(a)?function(b){return b===a}:a;this.O();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.N()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=j.a.l(b,a)}):[]},indexOf:function(a){var b=this();return j.a.l(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.O(),this.t()[c]=b,this.N())}},j.a.n("pop push reverse shift sort splice unshift".split(" "),function(a){j.ba.fn[a]=function(){var b=this.t();return this.O(),this.Xa(b,a,arguments),b=b[a].apply(b,arguments),this.N(),b}}),j.a.n(["slice"],function(a){j.ba.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),j.b("observableArray",j.ba);var n="arrayChange";j.xa.trackArrayChanges=function(a){function b(){if(!c){c=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==l||++e,b.apply(this,arguments)};var f=[].concat(a.t()||[]);d=null,a.T(function(b){if(b=[].concat(b||[]),a.cb(n)){var c;(!d||e>1)&&(d=j.a.ra(f,b,{sparse:!0})),c=d,c.length&&a.notifySubscribers(c,n)}f=b,d=null,e=0})}}if(!a.Xa){var c=!1,d=null,e=0,f=a.T;a.T=a.subscribe=function(a,c,d){return d===n&&b(),f.apply(this,arguments)},a.Xa=function(a,b,f){function g(a,b,c){h.push({status:a,value:b,index:c})}if(c&&!e){var h=[],i=a.length,j=f.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;j>b;b++)g("added",f[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>f[0]?i+f[0]:f[0]),i);for(var i=1===j?i:Math.min(b+(f[1]||0),i),j=b+j-2,k=Math.max(i,j),l=2;k>b;++b,++l)i>b&&g("deleted",a[b],b),j>b&&g("added",f[l],b);break;default:return}d=h}}}},j.h=function(b,c,d){function e(){j.a.n(u,function(a){a.B()}),u=[]}function f(){var a=h.throttleEvaluation;a&&a>=0?(clearTimeout(v),v=setTimeout(g,a)):g()}function g(){if(!m){if(s&&s()){if(!n)return t(),void(l=!0)}else n=!1;m=!0;try{var b=j.a.ha(u,function(a){return a.target});j.i.Wa(function(c){var d;0<=(d=j.a.l(b,c))?b[d]=a:u.push(c.T(f))});for(var d=c?o.call(c):o(),e=b.length-1;e>=0;e--)b[e]&&u.splice(e,1)[0].B();l=!0,h.equalityComparer&&h.equalityComparer(k,d)||(h.notifySubscribers(k,"beforeChange"),k=d,h.notifySubscribers(k))}finally{j.i.end(),m=!1}u.length||t()}}function h(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return p.apply(c,arguments),this}return l||g(),j.i.lb(h),k}function i(){return!l||0<u.length}var k,l=!1,m=!1,n=!1,o=b;if(o&&"object"==typeof o?(d=o,o=d.read):(d=d||{},o||(o=d.read)),"function"!=typeof o)throw Error("Pass a function that returns the value of the ko.computed");var p=d.write,q=d.disposeWhenNodeIsRemoved||d.I||null,r=d.disposeWhen||d.ua,s=r,t=e,u=[],v=null;return c||(c=d.owner),h.t=function(){return l||g(),k},h.Kb=function(){return u.length},h.Nb="function"==typeof d.write,h.B=function(){t()},h.aa=i,j.ca.call(h),j.a.extend(h,j.h.fn),j.s(h,"peek",h.t),j.s(h,"dispose",h.B),j.s(h,"isActive",h.aa),j.s(h,"getDependenciesCount",h.Kb),q&&(n=!0,q.nodeType&&(s=function(){return!j.a.va(q)||r&&r()})),!0!==d.deferEvaluation&&g(),q&&i()&&(t=function(){j.a.C.mb(q,t),e()},j.a.C.ea(q,t)),h},j.Pb=function(a){return j.ya(a,j.h)},g=j.q.Yb,j.h[g]=j.q,j.h.fn={equalityComparer:h},j.h.fn[g]=j.h,j.b("dependentObservable",j.h),j.b("computed",j.h),j.b("isComputed",j.Pb),function(){function b(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.Qa=[]}j.tb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;j.M(a)&&10>b;b++)a=a();return a})},j.toJSON=function(a,b,c){return a=j.tb(a),j.a.Na(a,b,c)},d.prototype={save:function(a,b){var c=j.a.l(this.keys,a);c>=0?this.Qa[c]=b:(this.keys.push(a),this.Qa.push(b))},get:function(b){return b=j.a.l(this.keys,b),b>=0?this.Qa[b]:a}}}(),j.b("toJS",j.tb),j.b("toJSON",j.toJSON),function(){j.k={o:function(b){switch(j.a.v(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?j.a.f.get(b,j.d.options.Ea):7>=j.a.ja?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?j.k.o(b.options[b.selectedIndex]):a;default:return b.value}},na:function(b,c){switch(j.a.v(b)){case"option":switch(typeof c){case"string":j.a.f.set(b,j.d.options.Ea,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:j.a.f.set(b,j.d.options.Ea,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":""===c&&(c=a),(null===c||c===a)&&(b.selectedIndex=-1);for(var d=b.options.length-1;d>=0;d--)if(j.k.o(b.options[d])==c){b.selectedIndex=d;break}1<b.size||-1!==b.selectedIndex||(b.selectedIndex=0);break;default:(null===c||c===a)&&(c=""),b.value=c}}}}(),j.b("selectExtensions",j.k),j.b("selectExtensions.readValue",j.k.o),j.b("selectExtensions.writeValue",j.k.na),j.g=function(){function a(a){a=j.a.la(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c,g=[],h=a.match(d),i=0;if(h){h.push(",");for(var k,l=0;k=h[l];++l){var m=k.charCodeAt(0);if(44===m){if(0>=i){b&&g.push(c?{key:b,value:c.join("")}:{unknown:b}),b=c=i=0;continue}}else if(58===m){if(!c)continue}else if(47===m&&l&&1<k.length)(m=h[l-1].match(e))&&!f[m[0]]&&(a=a.substr(a.indexOf(k)+1),h=a.match(d),h.push(","),l=-1,k="/");else if(40===m||123===m||91===m)++i;else if(41===m||125===m||93===m)--i;else if(!b&&!c){b=34===m||39===m?k.slice(1,-1):k;continue}c?c.push(k):c=[k]}}return g}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={"in":1,"return":1,"typeof":1},g={};return{Y:[],U:g,Ga:a,ka:function(d,e){function f(a,d){var e,l=j.getBindingHandler(a);(l&&l.preprocess?d=l.preprocess(d,a,f):1)&&((l=g[a])&&(e=d,0<=j.a.l(b,e)?e=!1:(l=e.match(c),e=null===l?!1:l[1]?"Object("+l[1]+")"+l[2]:e),l=e),l&&i.push("'"+a+"':function(_z){"+e+"=_z}"),k&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d))}e=e||{};var h=[],i=[],k=e.valueAccessors,l="string"==typeof d?a(d):d;return j.a.n(l,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+"}"),h.join(",")},Sb:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},oa:function(a,b,c,d,e){a&&j.M(a)?!j.gb(a)||e&&a.t()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),j.b("expressionRewriting",j.g),j.b("expressionRewriting.bindingRewriteValidators",j.g.Y),j.b("expressionRewriting.parseObjectLiteral",j.g.Ga),j.b("expressionRewriting.preProcessBindings",j.g.ka),j.b("expressionRewriting._twoWayBindings",j.g.U),j.b("jsonExpressionRewriting",j.g),j.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",j.g.ka),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=c&&"<!--test-->"===c.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};j.e={P:{},childNodes:function(b){return a(b)?d(b):b.childNodes},Z:function(b){if(a(b)){b=j.e.childNodes(b);for(var c=0,d=b.length;d>c;c++)j.removeNode(b[c])}else j.a.wa(b)},S:function(b,c){if(a(b)){j.e.Z(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else j.a.S(b,c)},kb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},eb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):j.e.kb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},Mb:a,bc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},ib:function(c){if(i[j.a.v(c)]){var d=c.firstChild;if(d)do if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f]);while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}while(d=d.nextSibling)}}}}(),j.b("virtualElements",j.e),j.b("virtualElements.allowedBindings",j.e.P),j.b("virtualElements.emptyNode",j.e.Z),j.b("virtualElements.insertAfter",j.e.eb),j.b("virtualElements.prepend",j.e.kb),j.b("virtualElements.setDomNodeChildren",j.e.S),function(){j.H=function(){this.zb={}},j.a.extend(j.H.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return j.e.Mb(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return j.e.bc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.zb,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+j.g.ka(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(k){throw k.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+k.message,k}}}),j.H.instance=new j.H}(),j.b("bindingProvider",j.H),function(){function c(a){return function(){return a}}function d(a){return a()}function e(a){return j.a.Da(j.i.p(a),function(b,c){return function(){return a()[c]}})}function f(a,b){return e(this.getBindings.bind(this,a,b))}function g(a,b,c){var d,e=j.e.firstChild(b),f=j.H.instance,g=f.preprocessNode;if(g){for(;d=e;)e=j.e.nextSibling(d),g.call(f,d);e=j.e.firstChild(b)}for(;d=e;)e=j.e.nextSibling(d),h(a,d,c)}function h(a,b,c){var d=!0,e=1===b.nodeType;e&&j.e.ib(b),(e&&c||j.H.instance.nodeHasBindings(b))&&(d=k(b,null,a,c).shouldBindDescendants),d&&!m[j.a.v(b)]&&g(a,b,!e)}function i(a){var b=[],c={},d=[];return j.a.K(a,function e(f){if(!c[f]){var g=j.getBindingHandler(f);g&&(g.after&&(d.push(f),j.a.n(g.after,function(b){if(a[b]){if(-1!==j.a.l(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.pop()),b.push({key:f,bb:g})),c[f]=!0}}),b}function k(b,c,e,g){var h=j.a.f.get(b,n);if(!c){if(h)throw Error("You cannot apply bindings multiple times to the same element.");j.a.f.set(b,n,!0)}!h&&g&&j.rb(b,e);var k;if(c&&"function"!=typeof c)k=c;else{var l=j.H.instance,m=l.getBindingAccessors||f;if(c||e.A){var o=j.h(function(){return(k=c?c(e,b):m.call(l,b,e))&&e.A&&e.A(),k},null,{I:b});k&&o.aa()||(o=null)}else k=j.i.p(m,l,[b,e])}var p;if(k){var q=o?function(a){return function(){return d(o()[a])}}:function(a){return k[a]},r=function(){return j.a.Da(o?o():k,d)};r.get=function(a){return k[a]&&d(q(a))},r.has=function(a){return a in k},g=i(k),j.a.n(g,function(c){var d=c.bb.init,f=c.bb.update,g=c.key;if(8===b.nodeType&&!j.e.P[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&j.i.p(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(p!==a)throw Error("Multiple bindings ("+p+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=g}}),"function"==typeof f&&j.h(function(){f(b,q(g),r,e.$data,e)},null,{I:b})}catch(h){throw h.message='Unable to process binding "'+g+": "+k[g]+'"\nMessage: '+h.message,h}})}return{shouldBindDescendants:p===a}}function l(a){return a&&a instanceof j.G?a:new j.G(a)}j.d={};var m={script:!0};j.getBindingHandler=function(a){return j.d[a]},j.G=function(b,c,d,e){var f,g=this,h="function"==typeof b,i=j.h(function(){var a=h?b():b;return c?(c.A&&c.A(),j.a.extend(g,c),i&&(g.A=i)):(g.$parents=[],g.$root=a,g.ko=j),g.$rawData=b,g.$data=a,d&&(g[d]=a),e&&e(g,c,a),g.$data},null,{ua:function(){return f&&!j.a.Ra(f)},I:!0});i.aa()&&(g.A=i,i.equalityComparer=null,f=[],i.wb=function(b){f.push(b),j.a.C.ea(b,function(b){j.a.ia(f,b),f.length||(i.B(),g.A=i=a)})})},j.G.prototype.createChildContext=function(a,b,c){return new j.G(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},j.G.prototype.extend=function(a){return new j.G(this.$rawData,this,null,function(b){j.a.extend(b,"function"==typeof a?a():a)})};var n=j.a.f.D(),o=j.a.f.D();j.rb=function(a,b){return 2!=arguments.length?j.a.f.get(a,o):(j.a.f.set(a,o,b),void(b.A&&b.A.wb(a)))},j.pa=function(a,b,c){return 1===a.nodeType&&j.e.ib(a),k(a,b,l(c),!0)},j.xb=function(a,b,d){return d=l(d),j.pa(a,"function"==typeof b?e(b.bind(null,d,a)):j.a.Da(b,c),d)},j.Ta=function(a,b){1!==b.nodeType&&8!==b.nodeType||g(l(a),b,!0)},j.Sa=function(a,c){if(c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||b.document.body,h(l(a),c,!0)},j.ta=function(b){switch(b.nodeType){case 1:case 8:var c=j.rb(b);if(c)return c;if(b.parentNode)return j.ta(b.parentNode)}return a},j.Cb=function(b){return(b=j.ta(b))?b.$data:a},j.b("bindingHandlers",j.d),j.b("applyBindings",j.Sa),j.b("applyBindingsToDescendants",j.Ta),j.b("applyBindingAccessorsToNode",j.pa),j.b("applyBindingsToNode",j.xb),j.b("contextFor",j.ta),j.b("dataFor",j.Cb)}();var o={"class":"className","for":"htmlFor"};j.d.attr={update:function(b,c){var d=j.a.c(c())||{};j.a.K(d,function(c,d){d=j.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=j.a.ja&&c in o?(c=o[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&j.a.pb(b,e?"":d.toString())})}},function(){j.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?j.a.c(d.get("checkedValue")):b.value}function f(){var a=b.checked,f=m?e():a;if(n&&(!i||a)){var g=j.i.p(c);k?l!==f?(a&&(j.a.V(g,f,!0),j.a.V(g,l,!1)),l=f):j.a.V(g,f,a):j.g.oa(g,d,"checked",f,!0)}}function g(){var a=j.a.c(c());b.checked=k?0<=j.a.l(a,e()):h?a:e()===a}var h="checkbox"==b.type,i="radio"==b.type;if(h||i){var k=h&&j.a.c(c())instanceof Array,l=k?e():a,m=i||k,n=!1;i&&!b.name&&j.d.uniqueName.init(b,function(){return!0}),j.h(f,null,{I:b}),j.a.r(b,"click",f),j.h(g,null,{I:b}),n=!0}}},j.g.U.checked=!0,j.d.checkedValue={update:function(a,b){a.value=j.a.c(b())}}}(),j.d.css={update:function(a,b){var c=j.a.c(b());"object"==typeof c?j.a.K(c,function(b,c){c=j.a.c(c),j.a.ma(a,b,c)}):(c=String(c||""),j.a.ma(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,j.a.ma(a,c,!0))}},j.d.enable={update:function(a,b){var c=j.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},j.d.disable={update:function(a,b){j.d.enable.update(a,function(){return!j.a.c(b())})}},j.d.event={init:function(a,b,c,d,e){var f=b()||{};j.a.K(f,function(f){"string"==typeof f&&j.a.r(a,f,function(a){var g,h=b()[f];if(h){try{var i=j.a.Q(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},j.d.foreach={hb:function(a){return function(){var b=a(),c=j.a.Ha(b);return c&&"number"!=typeof c.length?(j.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:j.J.Aa}):{foreach:b,templateEngine:j.J.Aa}}},init:function(a,b){return j.d.template.init(a,j.d.foreach.hb(b))},update:function(a,b,c,d,e){return j.d.template.update(a,j.d.foreach.hb(b),c,d,e)}},j.g.Y.foreach=!1,j.e.P.foreach=!0,j.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;
try{f=e.activeElement}catch(g){f=e.body}d=f===a}e=b(),j.g.oa(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);j.a.r(a,"focus",e),j.a.r(a,"focusin",e),j.a.r(a,"blur",f),j.a.r(a,"focusout",f)},update:function(a,b){var c=!!j.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),j.i.p(j.a.da,null,[a,c?"focusin":"focusout"]))}},j.g.U.hasfocus=!0,j.d.hasFocus=j.d.hasfocus,j.g.U.hasFocus=!0,j.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){j.a.Ka(a,b())}};var p=j.a.f.D();i("if"),i("ifnot",!1,!0),i("with",!0,!1,function(a,b){return a.createChildContext(b)}),j.d.options={init:function(a){if("select"!==j.a.v(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,d,e){function f(){return j.a.ga(b.options,function(a){return a.selected})}function g(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function h(a,c){if(k.length){var d=0<=j.a.l(k,j.k.o(c[0]));j.a.qb(c[0],d),o&&!d&&j.i.p(j.a.da,null,[b,"change"])}}var i=0!=b.length&&b.multiple?b.scrollTop:null;d=j.a.c(d());var k,l=e.get("optionsIncludeDestroyed"),m={};if(k=b.multiple?j.a.ha(f(),j.k.o):0<=b.selectedIndex?[j.k.o(b.options[b.selectedIndex])]:[],d){"undefined"==typeof d.length&&(d=[d]);var n=j.a.ga(d,function(b){return l||b===a||null===b||!j.a.c(b._destroy)});e.has("optionsCaption")&&(d=j.a.c(e.get("optionsCaption")),null!==d&&d!==a&&n.unshift(m))}else d=[];var o=!1;d=h,e.has("optionsAfterRender")&&(d=function(b,c){h(0,c),j.i.p(e.get("optionsAfterRender"),null,[c[0],b!==m?b:a])}),j.a.Ja(b,n,function(b,d,f){return f.length&&(k=f[0].selected?[j.k.o(f[0])]:[],o=!0),d=c.createElement("option"),b===m?(j.a.Ma(d,e.get("optionsCaption")),j.k.na(d,a)):(f=g(b,e.get("optionsValue"),b),j.k.na(d,j.a.c(f)),b=g(b,e.get("optionsText"),f),j.a.Ma(d,b)),[d]},null,d),(b.multiple?k.length&&f().length<k.length:k.length&&0<=b.selectedIndex?j.k.o(b.options[b.selectedIndex])!==k[0]:k.length||0<=b.selectedIndex)&&j.i.p(j.a.da,null,[b,"change"]),j.a.Hb(b),i&&20<Math.abs(i-b.scrollTop)&&(b.scrollTop=i)}},j.d.options.Ea=j.a.f.D(),j.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){j.a.r(a,"change",function(){var d=b(),e=[];j.a.n(a.getElementsByTagName("option"),function(a){a.selected&&e.push(j.k.o(a))}),j.g.oa(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=j.a.v(a))throw Error("values binding applies only to SELECT elements");var c=j.a.c(b());c&&"number"==typeof c.length&&j.a.n(a.getElementsByTagName("option"),function(a){var b=0<=j.a.l(c,j.k.o(a));j.a.qb(a,b)})}},j.g.U.selectedOptions=!0,j.d.style={update:function(a,b){var c=j.a.c(b()||{});j.a.K(c,function(b,c){c=j.a.c(c),a.style[b]=c||""})}},j.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");j.a.r(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},j.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){j.a.Ma(a,b())}},j.e.P.text=!0,j.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++j.d.uniqueName.Bb;j.a.pb(a,c)}}},j.d.uniqueName.Bb=0,j.d.value={after:["options","foreach"],init:function(a,b,c){function d(){g=!1;var d=b(),e=j.k.o(a);j.g.oa(d,c,"value",e)}var e=["change"],f=c.get("valueUpdate"),g=!1;f&&("string"==typeof f&&(f=[f]),j.a.X(e,f),e=j.a.Va(e)),!j.a.ja||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=j.a.l(e,"propertychange")||(j.a.r(a,"propertychange",function(){g=!0}),j.a.r(a,"blur",function(){g&&d()})),j.a.n(e,function(b){var c=d;j.a.ac(b,"after")&&(c=function(){setTimeout(d,0)},b=b.substring(5)),j.a.r(a,b,c)})},update:function(a,b){var c="select"===j.a.v(a),d=j.a.c(b()),e=j.k.o(a);d!==e&&(e=function(){j.k.na(a,d)},e(),c&&(d!==j.k.o(a)?j.i.p(j.a.da,null,[a,"change"]):setTimeout(e,0)))}},j.g.U.value=!0,j.d.visible={update:function(a,b){var c=j.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){j.d[a]={init:function(b,c,d,e,f){return j.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),j.w=function(){},j.w.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},j.w.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},j.w.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new j.m.j(d)}if(1==a.nodeType||8==a.nodeType)return new j.m.W(a);throw Error("Unknown template type: "+a)},j.w.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},j.w.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},j.w.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},j.b("templateEngine",j.w),j.Oa=function(){function a(a,b,c,d){a=j.g.Ga(a);for(var e=j.g.Y,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+j.g.ka(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ib:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return j.Oa.Ub(a,b)},c)},Ub:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"<!-- ko -->","#comment",e)})},yb:function(a,b){return j.u.Ca(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&j.pa(e,a,d)})}}}(),j.b("__tr_ambtns",j.Oa.yb),function(){j.m={},j.m.j=function(a){this.j=a},j.m.j.prototype.text=function(){var a=j.a.v(this.j),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.j[a];var b=arguments[0];"innerHTML"===a?j.a.Ka(this.j,b):this.j[a]=b};var b=j.a.f.D()+"_";j.m.j.prototype.data=function(a){return 1===arguments.length?j.a.f.get(this.j,b+a):void j.a.f.set(this.j,b+a,arguments[1])};var c=j.a.f.D();j.m.W=function(a){this.j=a},j.m.W.prototype=new j.m.j,j.m.W.prototype.text=function(){if(0==arguments.length){var b=j.a.f.get(this.j,c)||{};return b.Pa===a&&b.sa&&(b.Pa=b.sa.innerHTML),b.Pa}j.a.f.set(this.j,c,{Pa:arguments[0]})},j.m.j.prototype.nodes=function(){return 0==arguments.length?(j.a.f.get(this.j,c)||{}).sa:void j.a.f.set(this.j,c,{sa:arguments[0]})},j.b("templateSources",j.m),j.b("templateSources.domElement",j.m.j),j.b("templateSources.anonymousTemplate",j.m.W)}(),function(){function b(a,b,c){var d;for(b=j.e.nextSibling(b);a&&(d=a)!==b;)a=j.e.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=j.H.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),j.a.$(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||j.Sa(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||j.u.vb(a,[c])}),j.a.$(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};var i=a&&d(a),i=i&&i.ownerDocument,k=h.templateEngine||f;if(j.Oa.Ib(e,k,i),e=k.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":j.e.S(a,e),i=!0;break;case"replaceNode":j.a.nb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&j.i.p(h.afterRender,null,[e,g.$data])),e}var f;j.La=function(b){if(b!=a&&!(b instanceof j.w))throw Error("templateEngine must inherit from ko.templateEngine");f=b},j.Ia=function(b,c,g,h,i){if(g=g||{},(g.templateEngine||f)==a)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var k=d(h);return j.h(function(){var a=c&&c instanceof j.G?c:new j.G(j.a.c(c)),f="function"==typeof b?b(a.$data,a):b,a=e(h,i,f,a,g);"replaceNode"==i&&(h=a,k=d(h))},null,{ua:function(){return!k||!j.a.va(k)},I:k&&"replaceNode"==i?k.parentNode:k})}return j.u.Ca(function(a){j.Ia(b,c,g,a,"replaceNode")})},j.$b=function(b,d,f,g,h){function i(a,b){c(b,l),f.afterRender&&f.afterRender(b,a)}function k(a,c){l=h.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,l):b;return e(null,"ignoreTargetNode",d,l,f)}var l;return j.h(function(){var b=j.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=j.a.ga(b,function(b){return f.includeDestroyed||b===a||null===b||!j.a.c(b._destroy)}),j.i.p(j.a.Ja,null,[g,b,k,f,i])},null,{I:g})};var g=j.a.f.D();j.d.template={init:function(a,b){var c=j.a.c(b());return"string"==typeof c||c.name?j.e.Z(a):(c=j.e.childNodes(a),c=j.a.Vb(c),new j.m.W(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){c=j.a.c(c()),d={},e=!0;var h,i=null;"string"!=typeof c&&(d=c,c=j.a.c(d.name),"if"in d&&(e=j.a.c(d["if"])),e&&"ifnot"in d&&(e=!j.a.c(d.ifnot)),h=j.a.c(d.data)),"foreach"in d?i=j.$b(c||b,e&&d.foreach||[],d,b,f):e?(f="data"in d?f.createChildContext(h,d.as):f,i=j.Ia(c||b,f,d,b)):j.e.Z(b),f=i,(h=j.a.f.get(b,g))&&"function"==typeof h.B&&h.B(),j.a.f.set(b,g,f&&f.aa()?f:a)}},j.g.Y.template=function(a){return a=j.g.Ga(a),1==a.length&&a[0].unknown||j.g.Sb(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},j.e.P.template=!0}(),j.b("setTemplateEngine",j.La),j.b("renderTemplate",j.Ia),j.a.ra=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,l=Math.max,m=[],n=a.length,o=b.length,p=o-n||1,q=n+o+1;for(f=0;n>=f;f++)for(i=h,m.push(h=[]),j=k(o,f+p),g=l(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||q,h[g-1]||q)+1:g+1:f+1;for(k=[],l=[],p=[],f=n,g=o;f||g;)o=m[f][g]-1,g&&o===m[f][g-1]?l.push(k[k.length]={status:c,value:b[--g],index:g}):f&&o===m[f-1][g]?p.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));if(l.length&&p.length){a=10*n;var r;for(b=c=0;(e.dontLimitMoves||a>b)&&(r=l[c]);c++){for(d=0;m=p[d];d++)if(r.value===m.value){r.moved=m.index,m.moved=r.index,p.splice(d,1),b=d=0;break}b+=d}}return k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),j.b("utils.compareArrays",j.a.ra),function(){function b(b,c,d,e,f){var g=[],h=j.h(function(){var a=c(d,f,j.a.$(g,b))||[];0<g.length&&(j.a.nb(g,a),e&&j.i.p(e,null,[d,a,f])),g.splice(0,g.length),j.a.X(g,a)},null,{I:b,ua:function(){return!j.a.Ra(g)}});return{R:g,h:h.aa()?h:a}}var c=j.a.f.D();j.a.Ja=function(d,e,f,g,h){function i(a,b){u=m[b],r!==b&&(x[a]=u),u.za(r++),j.a.$(u.R,d),p.push(u),t.push(u)}function k(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&j.a.n(b[c].R,function(d){a(d,c,b[c].fa)})}e=e||[],g=g||{};var l=j.a.f.get(d,c)===a,m=j.a.f.get(d,c)||[],n=j.a.ha(m,function(a){return a.fa}),o=j.a.ra(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=m[q],u.h&&u.h.B(),s.push.apply(s,j.a.$(u.R,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={fa:v.value,za:j.q(r++)},p.push(u),t.push(u),l||(n[y]=u))}k(g.beforeMove,x),j.a.n(s,g.beforeRemove?j.L:j.removeNode);for(var z,y=0,l=j.e.firstChild(d);u=t[y];y++){for(u.R||j.a.extend(u,b(d,f,u.fa,h,u.za)),q=0;o=u.R[q];l=o.nextSibling,z=o,q++)o!==l&&j.e.eb(d,o,z);!u.Ob&&h&&(h(u.fa,u.R,u.za),u.Ob=!0)}k(g.beforeRemove,e),k(g.afterMove,x),k(g.afterAdd,n),j.a.f.set(d,c,p)}}(),j.b("utils.setDomNodeChildrenFromArrayMapping",j.a.Ja),j.J=function(){this.allowTemplateRewriting=!1},j.J.prototype=new j.w,j.J.prototype.renderTemplateSource=function(a){var b=(9>j.a.ja?0:a.nodes)?a.nodes():null;return b?j.a.Q(b.cloneNode(!0).childNodes):(a=a.text(),j.a.Fa(a))},j.J.Aa=new j.J,j.La(j.J.Aa),j.b("nativeTemplateEngine",j.J),function(){j.Ba=function(){var a=this.Rb=function(){if("undefined"==typeof e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f){if(f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var g=b.data("precompiled");return g||(g=b.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g)),b=[d.$data],d=e.extend({koBindingContext:d},f.templateOptions),d=e.tmpl(g,b,d),d.appendTo(c.createElement("div")),e.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},j.Ba.prototype=new j.w;var a=new j.Ba;0<a.Rb&&j.La(a),j.b("jqueryTmplTemplateEngine",j.Ba)}()})}()}(),/*=============================================================================
	Author:			Eric M. Barnard - @ericmbarnard								
	License:		MIT (http://opensource.org/licenses/mit-license.php)		
																				
	Description:	Validation Library for KnockoutJS							
===============================================================================
*/
!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.validation={})}(function(a,b){function c(a){var b="max"===a;return function(c,d){if(f.utils.isEmptyVal(c))return!0;var e,g;void 0===d.typeAttr?(g="text",e=d):(g=d.typeAttr,e=d.value),isNaN(e)||(g="number");var h,i,j;switch(g.toLowerCase()){case"week":if(h=/^(\d{4})-W(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"month":if(h=/^(\d{4})-(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"number":case"range":return b?!isNaN(c)&&parseFloat(c)<=parseFloat(e):!isNaN(c)&&parseFloat(c)>=parseFloat(e);default:return b?e>=c:c>=e}}}function d(a,b,c){return b.validator(a(),void 0===c.params?!0:h(c.params))?!0:(a.setError(f.formatMessage(c.message||b.message,h(c.params),a)),!1)}function e(a,b,c){a.isValidating(!0);var d=function(d){var e=!1,g="";return a.__valid__()?(d.message?(e=d.isValid,g=d.message):e=d,e||(a.error(f.formatMessage(g||c.message||b.message,h(c.params),a)),a.__valid__(e)),void a.isValidating(!1)):void a.isValidating(!1)};b.validator(a(),h(c.params||!0),d)}if(void 0===typeof a)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";a.validation=b;var f=a.validation,g=a.utils,h=g.unwrapObservable,i=g.arrayForEach,j=g.extend,k={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},l=j({},k);l.html5Attributes=["required","pattern","min","max","step"],l.html5InputTypes=["email","number","date"],l.reset=function(){j(l,k)},f.configuration=l,f.utils=function(){var a=(new Date).getTime(),b={},c="__ko_validation__";return{isArray:function(a){return a.isArray||"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return null!==a&&"object"==typeof a},isObservableArray:function(a){return!!a&&"function"==typeof a.remove&&"function"==typeof a.removeAll&&"function"==typeof a.destroy&&"function"==typeof a.destroyAll&&"function"==typeof a.indexOf&&"function"==typeof a.replace},values:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getValue:function(a){return"function"==typeof a?a():a},hasAttribute:function(a,b){return null!==a.getAttribute(b)},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){return a.setAttribute(b,c)},isValidatable:function(a){return!!(a&&a.rules&&a.isValid&&a.isModified)},insertAfter:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},newId:function(){return a+=1},getConfigOptions:function(a){var b=f.utils.contextFor(a);return b||f.configuration},setDomData:function(a,d){var e=a[c];e||(a[c]=e=f.utils.newId()),b[e]=d},getDomData:function(a){var d=a[c];return d?b[d]:void 0},contextFor:function(a){switch(a.nodeType){case 1:case 8:var b=f.utils.getDomData(a);if(b)return b;if(a.parentNode)return f.utils.contextFor(a.parentNode)}return void 0},isEmptyVal:function(a){return void 0===a?!0:null===a?!0:""===a?!0:void 0},getOriginalElementTitle:function(a){var b=f.utils.getAttribute(a,"data-orig-title"),c=a.title,d=f.utils.hasAttribute(a,"data-orig-title");return d?b:c},async:function(a){window.setImmediate?window.setImmediate(a):window.setTimeout(a,0)},forEach:function(a,b){if(f.utils.isArray(a))return i(a,b);for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}}}();var m=function(){function b(a){i(a.subscriptions,function(a){a.dispose()}),a.subscriptions=[]}function c(a){a.options.deep&&(i(a.flagged,function(a){delete a.__kv_traversed}),a.flagged.length=0),a.options.live||b(a)}function d(a,d){d.validatables=[],b(d),e(a,d),c(d)}function e(b,c,d){var f=[],g=b.peek?b.peek():b;b.__kv_traversed!==!0&&(c.options.deep&&(b.__kv_traversed=!0,c.flagged.push(b)),d=void 0!==d?d:c.options.deep?1:-1,a.isObservable(b)&&(b.isValid||b.extend({validatable:!0}),c.validatables.push(b),c.options.live&&n.isObservableArray(b)&&c.subscriptions.push(b.subscribe(function(){c.graphMonitor.valueHasMutated()}))),g&&!g._destroy&&(n.isArray(g)?f=g:n.isObject(g)&&(f=n.values(g))),0!==d&&n.forEach(f,function(a){a&&!a.nodeType&&e(a,c,d+1)}))}function k(a){var b=[];return i(a,function(a){a.isValid()||b.push(a.error())}),b}var l=0,m=f.configuration,n=f.utils;return{init:function(a,b){l>0&&!b||(a=a||{},a.errorElementClass=a.errorElementClass||a.errorClass||m.errorElementClass,a.errorMessageClass=a.errorMessageClass||a.errorClass||m.errorMessageClass,j(m,a),m.registerExtenders&&f.registerExtenders(),l=1)},configure:function(a){f.init(a)},reset:f.configuration.reset,group:function(b,c){c=j(j({},m.grouping),c);var e={options:c,graphMonitor:a.observable(),flagged:[],subscriptions:[],validatables:[]},f=null;return c.observable?(d(b,e),f=a.computed(function(){return e.graphMonitor(),d(b,e),k(e.validatables)})):f=function(){return d(b,e),k(e.validatables)},f.showAllMessages=function(a){void 0===a&&(a=!0),f(),i(e.validatables,function(b){b.isModified(a)})},b.errors=f,b.isValid=function(){return 0===b.errors().length},b.isAnyMessageShown=function(){var a=!1;return f(),a=!!g.arrayFirst(e.validatables,function(a){return!a.isValid()&&a.isModified()})},f},formatMessage:function(a,b,c){return"function"==typeof a?a(b,c):a.replace(/\{0\}/gi,h(b))},addRule:function(a,b){return a.extend({validatable:!0}),a.rules.push(b),a},addAnonymousRule:function(a,b){void 0===b.message&&(b.message="Error"),b.onlyIf&&(b.condition=b.onlyIf),f.addRule(a,b)},addExtender:function(b){a.extenders[b]=function(a,c){return c&&(c.message||c.onlyIf)?f.addRule(a,{rule:b,message:c.message,params:n.isEmptyVal(c.params)?!0:c.params,condition:c.onlyIf}):f.addRule(a,{rule:b,params:c})}},registerExtenders:function(){if(m.registerExtenders)for(var b in f.rules)f.rules.hasOwnProperty(b)&&(a.extenders[b]||f.addExtender(b))},insertValidationMessage:function(a){var b=document.createElement("SPAN");return b.className=n.getConfigOptions(a).errorMessageClass,n.insertAfter(a,b),b},parseInputValidationAttributes:function(a,b){i(f.configuration.html5Attributes,function(c){if(n.hasAttribute(a,c)){var d=a.getAttribute(c)||!0;if("min"===c||"max"===c){var e=a.getAttribute("type");"undefined"!=typeof e&&e||(e="text"),d={typeAttr:e,value:d}}f.addRule(b(),{rule:c,params:d})}});var c=a.getAttribute("type");i(f.configuration.html5InputTypes,function(a){a===c&&f.addRule(b(),{rule:"date"===a?"dateISO":a,params:!0})})},writeInputValidationAttributes:function(a,b){var c=b();if(c&&c.rules){var d=c.rules();i(f.configuration.html5Attributes,function(b){var c,e=g.arrayFirst(d,function(a){return a.rule.toLowerCase()===b.toLowerCase()});e&&(c=e.params,"pattern"===e.rule&&e.params instanceof RegExp&&(c=e.params.source),a.setAttribute(b,c))}),d=null}},makeBindingHandlerValidatable:function(b){var c=a.bindingHandlers[b].init;a.bindingHandlers[b].init=function(b,d,e,f,g){return c(b,d,e,f,g),a.bindingHandlers.validationCore.init(b,d,e,f,g)}},setRules:function(b,c){var d=function(b,c){if(b&&c)for(var e in c)if(c.hasOwnProperty(e)){var g=c[e];if(b[e]){var i=b[e],j=h(i),k={},l={};for(var m in g)g.hasOwnProperty(m)&&(f.rules[m]?k[m]=g[m]:l[m]=g[m]);if(a.isObservable(i)&&i.extend(k),j&&n.isArray(j))for(var o=0;o<j.length;o++)d(j[o],l);else d(j,l)}}};d(b,c)}}}();j(a.validation,m),f.rules={},f.rules.required={validator:function(a,b){var c,d=/^\s+|\s+$/g;return void 0===a||null===a?!b:(c=a,"string"==typeof a&&(c=a.replace(d,"")),b?(c+"").length>0:!0)},message:"This field is required."},f.rules.min={validator:c("min"),message:"Please enter a value greater than or equal to {0}."},f.rules.max={validator:c("max"),message:"Please enter a value less than or equal to {0}."},f.rules.minLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length>=b},message:"Please enter at least {0} characters."},f.rules.maxLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length<=b},message:"Please enter no more than {0} characters."},f.rules.pattern={validator:function(a,b){return f.utils.isEmptyVal(a)||null!==a.toString().match(b)},message:"Please check this value."},f.rules.step={validator:function(a,b){if(f.utils.isEmptyVal(a)||"any"===b)return!0;var c=100*a%(100*b);return Math.abs(c)<1e-5||Math.abs(1-c)<1e-5},message:"The value must increment by {0}"},f.rules.email={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a):!0},message:"Please enter a proper email address"},f.rules.date={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&!/Invalid|NaN/.test(new Date(a)):!0},message:"Please enter a proper date"},f.rules.dateISO={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a):!0},message:"Please enter a proper date"},f.rules.number={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a):!0},message:"Please enter a number"},f.rules.digit={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d+$/.test(a):!0},message:"Please enter a digit"},f.rules.phoneUS={validator:function(a,b){return b?f.utils.isEmptyVal(a)?!0:"string"!=typeof a?!1:(a=a.replace(/\s+/g,""),b&&a.length>9&&a.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Please specify a valid phone number"},f.rules.equal={validator:function(a,b){var c=b;return a===f.utils.getValue(c)},message:"Values must equal"},f.rules.notEqual={validator:function(a,b){var c=b;return a!==f.utils.getValue(c)},message:"Please choose another value."},f.rules.unique={validator:function(a,b){var c=f.utils.getValue(b.collection),d=f.utils.getValue(b.externalValue),e=0;return a&&c?(g.arrayFilter(c,function(c){a===(b.valueAccessor?b.valueAccessor(c):c)&&e++}),(d?1:2)>e):!0},message:"Please make sure the value is unique."},function(){f.registerExtenders()}(),a.bindingHandlers.validationCore=function(){return{init:function(b,c){var d=f.utils.getConfigOptions(b),e=c();if(d.parseInputAttributes&&f.utils.async(function(){f.parseInputValidationAttributes(b,c)}),d.insertMessages&&f.utils.isValidatable(e)){var g=f.insertValidationMessage(b);d.messageTemplate?a.renderTemplate(d.messageTemplate,{field:e},null,g,"replaceNode"):a.applyBindingsToNode(g,{validationMessage:e})}d.writeInputAttributes&&f.utils.isValidatable(e)&&f.writeInputValidationAttributes(b,c),d.decorateInputElement&&f.utils.isValidatable(e)&&a.applyBindingsToNode(b,{validationElement:e})}}}(),f.makeBindingHandlerValidatable("value"),f.makeBindingHandlerValidatable("checked"),a.bindingHandlers.validationMessage={update:function(b,c){var d=c(),e=f.utils.getConfigOptions(b),i=(h(d),!1),j=!1;if(!d.isValid||!d.isModified)throw new Error("Observable is not validatable");i=d.isModified(),j=d.isValid();var k=null;(!e.messagesOnModified||i)&&(k=j?null:d.error);var l=!e.messagesOnModified||i?!j:!1,m="none"!==b.style.display;e.allowHtmlMessages?g.setHtml(b,k):a.bindingHandlers.text.update(b,function(){return k}),m&&!l?b.style.display="none":!m&&l&&(b.style.display="")}},a.bindingHandlers.validationElement={update:function(b,c,d){var e=c(),g=f.utils.getConfigOptions(b),i=(h(e),!1),j=!1;if(!e.isValid||!e.isModified)throw new Error("Observable is not validatable");i=e.isModified(),j=e.isValid();var k=function(){var a={},b=!g.decorateElementOnModified||i?!j:!1;return a[g.errorElementClass]=b,a};a.bindingHandlers.css.update(b,k,d),g.errorsAsTitle&&a.bindingHandlers.attr.update(b,function(){var a=!g.errorsAsTitleOnModified||i,c=f.utils.getOriginalElementTitle(b);return a&&!j?{title:e.error,"data-orig-title":c}:!a||j?{title:c,"data-orig-title":null}:void 0})}},a.bindingHandlers.validationOptions=function(){return{init:function(a,b){var c=h(b());if(c){var d=j({},f.configuration);j(d,c),f.utils.setDomData(a,d)}}}}(),a.extenders.validation=function(a,b){return i(f.utils.isArray(b)?b:[b],function(b){f.addAnonymousRule(a,b)}),a},a.extenders.validatable=function(b,c){if(f.utils.isObject(c)||(c={enable:c}),"enable"in c||(c.enable=!0),c.enable&&!f.utils.isValidatable(b)){var d=f.configuration.validate||{},e={throttleEvaluation:c.throttle||d.throttle};b.error=a.observable(null),b.rules=a.observableArray(),b.isValidating=a.observable(!1),b.__valid__=a.observable(!0),b.isModified=a.observable(!1),b.isValid=a.computed(b.__valid__),b.setError=function(a){b.error(a),b.__valid__(!1)},b.clearError=function(){return b.error(null),b.__valid__(!0),b};var g=b.subscribe(function(){b.isModified(!0)}),h=a.computed(j({read:function(){return b(),b.rules(),f.validateObservable(b),!0}},e));j(h,e),b._disposeValidation=function(){b.isValid.dispose(),b.rules.removeAll(),b.isModified.getSubscriptionsCount()>0&&(b.isModified._subscriptions.change=[]),b.isValidating.getSubscriptionsCount()>0&&(b.isValidating._subscriptions.change=[]),b.__valid__.getSubscriptionsCount()>0&&(b.__valid__._subscriptions.change=[]),g.dispose(),h.dispose(),delete b.rules,delete b.error,delete b.isValid,delete b.isValidating,delete b.__valid__,delete b.isModified}}else c.enable===!1&&b._disposeValidation&&b._disposeValidation();return b},f.validateObservable=function(a){for(var b,c,g=0,h=a.rules(),i=h.length;i>g;g++)if(c=h[g],!c.condition||c.condition())if(b=c.rule?f.rules[c.rule]:c,b.async||c.async)e(a,b,c);else if(!d(a,b,c))return!1;return a.clearError(),!0},f.localize=function(a){var b;for(b in a)f.rules.hasOwnProperty(b)&&(f.rules[b].message=a[b])},a.applyBindingsWithValidation=function(b,c,d){var e,g,h=arguments.length;h>2?(e=c,g=d):2>h?e=document.body:arguments[1].nodeType?e=c:g=arguments[1],f.init(),g&&f.utils.setDomData(e,g),a.applyBindings(b,c)};var n=a.applyBindings;a.applyBindings=function(a,b){f.init(),n(a,b)},a.validatedObservable=function(b){if(!f.utils.isObject(b))return a.observable(b).extend({validatable:!0});var c=a.observable(b);return c.errors=f.group(b),c.isValid=a.observable(b.isValid()),c.errors.subscribe(function(a){c.isValid(0===a.length)}),c}}),window.Modernizr=function(a,b,c){function d(a){o.cssText=a}function e(a,b){return typeof a===b}function f(){j.input=function(c){for(var d=0,e=c.length;e>d;d++)r[c[d]]=c[d]in p;return r.list&&(r.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),r}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var g,h,i="2.6.2",j={},k=!0,l=b.documentElement,m="modernizr",n=b.createElement(m),o=n.style,p=b.createElement("input"),q=({}.toString,{}),r={},s=[],t=s.slice,u={}.hasOwnProperty;h=e(u,"undefined")||e(u.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return u.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=t.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(t.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(t.call(arguments)))};return d});for(var v in q)h(q,v)&&(g=v.toLowerCase(),j[g]=q[v](),s.push((j[g]?"":"no-")+g));return j.input||f(),j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof k&&k&&(l.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),n=p=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=r.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b=q[a[o]];return b||(b={},p++,a[o]=p,q[p]=b),b}function f(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=e(c));var f;return f=d.cache[a]?d.cache[a].cloneNode():n.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),f.canHaveChildren&&!m.test(a)?d.frag.appendChild(f):f}function g(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||e(a);for(var f=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)f.createElement(h[g]);return f}function h(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?f(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function i(a){a||(a=b);var d=e(a);return r.shivCSS&&!j&&!d.hasCSS&&(d.hasCSS=!!c(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),k||h(a,d),a}var j,k,l=a.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,n=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,o="_html5shiv",p=0,q={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",j="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){j=!0,k=!0}}();var r={elements:l.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:l.shivCSS!==!1,supportsUnknownElements:k,shivMethods:l.shivMethods!==!1,type:"default",shivDocument:i,createElement:f,createDocumentFragment:g};a.html5=r,i(b)}(this,b),j._version=i,l.className=l.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(k?" js "+s.join(" "):""),j}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},$(document).ready(function(){function a(a){a.wrap("<div class='table-wrapper' />");var b=a.clone();b.find("td:not(:first-child), th:not(:first-child)").css("display","none"),b.removeClass("responsive"),a.closest(".table-wrapper").append(b),b.wrap("<div class='pinned' />"),a.wrap("<div class='scrollable' />"),c(a,b)}function b(a){a.closest(".table-wrapper").find(".pinned").remove(),a.unwrap(),a.unwrap()}function c(a,b){var c=a.find("tr"),d=b.find("tr"),e=[];c.each(function(a){var b=$(this),c=b.find("th, td");c.each(function(){var b=$(this).outerHeight(!0);e[a]=e[a]||0,b>e[a]&&(e[a]=b)})}),d.each(function(a){$(this).height(e[a])})}var d=!1,e=function(){return $(window).width()<767&&!d?(d=!0,$("table.responsive").each(function(b,c){a($(c))}),!0):void(d&&$(window).width()>767&&(d=!1,$("table.responsive").each(function(a,c){b($(c))})))};$(window).load(e),$(window).on("redraw",function(){d=!1,e()}),// An event to listen for
$(window).on("resize",e)}),//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.2";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return arguments.length<2||c?a[x.random(a.length-1)]:x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={},f=null==c?x.identity:B(c);return y(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};x.groupBy=C(function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),//# sourceMappingURL=underscore-min.map  
function(b,c){var d=function(a){var b={},c=a;this.data=function(a,c){return c?void(b[a]=c):b[a]},this.text=function(a){return a?void(c=a):c}},e=function(){var a={},c=new b.nativeTemplateEngine;return c.makeTemplateSource=function(b){return a[b]},c.addTemplate=function(b,c){a[b]=new d(c)},c};b.stringTemplateEngine=e,b.subscribable.fn.subscribeChanged=function(a){var b;this.subscribe(function(a){b=a},this,"beforeChange"),this.subscribe(function(c){a(c,b)})};var f=new b.stringTemplateEngine,g=['<div style="position:relative">','<ul id="combolist" class="combolist no-bullet" style="display:none">',"<!-- ko foreach: filteredOptions -->",'<li data-bind="value: $data, text: $data, click: $parent.selectItem"></li>',"<!-- /ko -->","</ul>",'<input type="text" id="txtInput" data-bind="enable: enabled,value:selectedValue,attr:{placeholder:optionsCaption}"></input>',"</div>"].join(""),h=['<div class="row collapse">','<select class="combo-dd columns" data-bind="enable: enabled,value: selectedPrefix, options: prefixOptions">',"</select>",'<div class="combo-txt columns" data-bind="template : {name: \'comboTemplate\', data : $data}">',"</div>","</div>"].join(""),i=['<div class="edit-label" data-bind="css: {\'edit\': editingTitle}">','<div class="title-display">',"<a data-bind=\"visible: href(), text:title, attr: {'href': href}\"></a>",'<span data-bind="visible: !href(), text:title, click: editTitle"></span>','<span class="edit-icon icon-pencil" data-bind="click: editTitle"></span>',"</div>",'<div class="row collapse title-edit">','<div class="small-8 columns">','<input type="text" data-bind="value: overrideTitle"></input>',"</div>",'<div class="small-2 columns" data-bind="click: acceptEdit">','<span class="postfix">','<i class="icon-checkmark"></i>',"</span>","</div>",'<div class="small-2 columns" data-bind="click: cancelEdit">','<span class="postfix">','<i class="icon-close"></i>',"</span>","</div>","</div>","</div>"].join(""),j=['<div class="chk-dd" style="position:relative">','<div id="lblSelectedValues" class="chk-dd-label" data-bind="text: displayValuesList"></div>','<ul id="combolist" class="combolist no-bullet" style="display:none; margin-top:0" data-bind="foreach: options">',"<li>","<input type=\"checkbox\" data-bind=\"attr:{'id': 'chkdd' + $index()}, checkedValue: $parent.optionsValue ? $data[$parent.optionsValue] : $data, checked: $parent.selectedOptions\" />","<label data-bind=\"attr:{'for': 'chkdd'+ $index()}, text: $parent.optionsText ? $data[$parent.optionsText] : $data\"></label>","</li>","</ul>",'<span class="chk-dd-arrow icon-arrow-down5"></span>',"</div>"].join("");f.addTemplate("comboTemplateStr",g),f.addTemplate("ddComboTemplateStr",h),f.addTemplate("editLabelTemplateStr",i),f.addTemplate("checkboxDropdownTemplateStr",j);/********** KO TEMPLATES ******************/
var k=function(a){var d=this;d.selectedValue=a.selectedValue,d.availableOptions=b.isObservable(a.options)?a.options:b.observableArray(a.options),d.filteredOptions=b.observableArray(d.availableOptions()),d.availableOptions.subscribe(function(a){d.filteredOptions(a)}),d.optionsCaption=a.optionsCaption,d.enabled=b.isObservable(a.enabled)?a.enabled:b.observable(a.enabled);var e,f,g=function(){if(f.hide(),f.css("top","2.3125rem"),!a.allowCustom){var b,c=d.selectedValue();//need to fix property casing
c&&(c=c.toLowerCase(),b=d.availableOptions().some(function(a){return a.toLowerCase().indexOf(c)>-1})),b||(d.selectedValue(""),e.removeClass("combo-error"))}},h=function(){d.filteredOptions()&&0!==d.filteredOptions().length&&(f.show(),f.height()+f.offset().top-c(window).scrollTop()>c(window).height()?f.css("top","-"+f.height()+"px"):f.css("top","2.3125rem"))},i=function(){var b=e.val(),c=d.availableOptions().filter(function(a){return a.toLowerCase().indexOf(b)>-1});a.allowCustom?(h(),d.filteredOptions(c)):0===c.length?(e.addClass("combo-error"),f.hide(),f.css("top","2.3125rem"),d.filteredOptions(d.availableOptions())):(e.removeClass("combo-error"),h(),d.filteredOptions(c))};d.selectItem=function(a){d.selectedValue(a),//self.selecting(false);
g(),c(document).off(".comboSelections")},d.accessComboElements=function(b){//var toplevelNode = nodes[0];
e=c(b).find("#txtInput"),f=c(b).find("#combolist"),e.keyup(function(){//self.selecting(true);
i(),c(document).on("click.comboSelections",function(){arguments[0].target!==e[0]&&g()})}),e.click(function(){h(),c(document).on("click.comboSelections",function(){arguments[0].target!==e[0]&&g()})});c(a.element)}},l={init:function(a,c){var d=c(),e="comboTemplateStr",g={selectedValue:d.selectedValue||b.observable(),element:a,options:d.options,optionsCaption:d.optionsCaption||"Select..",enabled:void 0===d.enabled?!0:d.enabled,allowCustom:void 0===d.allowCustom?!0:d.allowCustom},h=new k(g);return b.renderTemplate(e,h,{templateEngine:f,afterRender:h.accessComboElements.bind(h)},a,"replaceChildren"),{controlsDescendantBindings:!0}}},m=function(a){var d=this;c.extend(d,new k(a)),d.prefixOptions=b.isObservable(a.prefixOptions)?a.prefixOptions:b.observableArray(a.prefixOptions),d.selectedPrefix=b.isObservable(a.selectedPrefix)?a.selectedPrefix:b.observable(a.selectedPrefix),void 0===d.selectedPrefix()&&d.selectedPrefix(d.prefixOptions()[0])},n={init:function(a,c){var d=c(),e="ddComboTemplateStr";drata.utils.createTemplate("comboTemplate",g);var h={selectedValue:d.selectedValue||b.observable(),element:a,options:d.options||[],selectedPrefix:d.selectedPrefix||b.observable(),prefixOptions:d.prefixOptions||b.observableArray(),optionsCaption:d.optionsCaption||"Select..",enabled:void 0===d.enabled?!0:d.enabled,allowCustom:void 0===d.allowCustom?!0:d.allowCustom},i=new m(h);return b.renderTemplate(e,i,{templateEngine:f,afterRender:i.accessComboElements.bind(i)},a,"replaceChildren"),{controlsDescendantBindings:!0}}},o=function(d){var e=this;e.selectedOptions=b.isObservable(d.selectedOptions)?d.selectedOptions:b.observableArray(d.selectedOptions),e.options=b.isObservable(d.options)?d.options:b.observableArray(d.options),e.optionsText=d.optionsText,e.optionsValue=d.optionsValue,e.optionsCaption=b.isObservable(d.optionsCaption)?d.optionsCaption:b.observable(d.optionsCaption),e.options.subscribe(function(){e.selectedOptions([])}),e.enabled=b.isObservable(d.enabled)?d.enabled:b.observable(d.enabled);var f,g,h=c(d.element);e.displayValuesList=b.computed(function(){if(0===e.selectedOptions().length)return e.optionsCaption();var b=e.selectedOptions(),c=e.options().filter(function(a){return e.optionsValue?b.indexOf(a[e.optionsValue])>-1:b.indexOf(a)>-1});return e.optionsText?c.map(function(a){return a[e.optionsText]}).join(", "):a.join(", ")}),e.accessComboElements=function(a){//var toplevelNode = nodes[0];
f=c(a).find("#lblSelectedValues"),g=c(a).find("#combolist"),f.click(function(){g.show(),f.addClass("glow"),c(document).on("click.comboSelections",function(){c.contains(h[0],arguments[0].target)||(g.hide(),c(document).off(".comboSelections"),f.removeClass("glow"))})})}},p={init:function(a,c){var d=c(),e="checkboxDropdownTemplateStr",g={selectedOptions:d.selectedOptions,element:a,options:d.options,optionsValue:d.optionsValue,optionsText:d.optionsText,optionsCaption:d.optionsCaption,enabled:void 0===d.enabled?!0:d.enabled},h=new o(g);return b.renderTemplate(e,h,{templateEngine:f,afterRender:h.accessComboElements.bind(h)},a,"replaceChildren"),{controlsDescendantBindings:!0}}},q=function(a){this.title=a.title,this.editingTitle=b.observable(!1),this.href=b.isObservable(a.href)?a.href:b.observable(a.href),this.overrideTitle=b.observable(),this.editTitle=function(){//temp = this.title();
return this.editingTitle(!0),this.overrideTitle(b.unwrap(this.title)),!1},this.cancelEdit=function(){//this.title(temp);
this.editingTitle(!1)},this.acceptEdit=function(){this.editingTitle(!1),this.title(this.overrideTitle())}},r={init:function(a,c){var d=c(),e="editLabelTemplateStr",g={title:d.title,href:d.href},h=new q(g);return b.renderTemplate(e,h,{templateEngine:f},a,"replaceChildren"),{controlsDescendantBindings:!0}}},s={init:function(a,d){var e=d();c(a).sortable({cursor:"move",handle:".handle",forcePlaceholderSize:!0,update:function(a,c){//retrieve our actual data item
var d=c.item.data("index"),f=b.utils.arrayIndexOf(c.item.parent().children(),c.item[0]);//remove the item and add it back in the right spot
if(f>=0){{var g=e().sort(function(a,b){return a.displayIndex()-b.displayIndex()}),h=g[d];g.length}if(d>f)for(var i=f;d>i;i++)g[i].displayIndex(i+1);if(f>d)for(var i=d+1;f>=i;i++)g[i].displayIndex(i-1);h.displayIndex(f)}}})}},t={update:function(a,d){function e(){var b={width:0,height:0},d=parseInt(9*h/10),e=0;do b=drata.utils.textToPixel(f,"font-size:"+d+"px;"),//console.log(x);
//console.log('font: ' + f);
d-=10,e++;while((b.width>g-20||b.height>h)&&10>e);c(a).css("font-size",d+"px")}var f=b.utils.unwrapObservable(d());if(f){c(a).html(f);var g=c(a).width(),h=c(a).height();e()}}},u={init:function(a,d){var e=d();c(a).toggle(b.utils.unwrapObservable(e))},update:function(a,d,e){var f=e(),g=f.slideDuration||100;b.utils.unwrapObservable(d())?c(a).slideDown(g):c(a).slideUp(g)}},v={init:function(a,b){var d=b(),e=c(a);e.click(function(){if(!e.data("dropdown")){var a=d.size||"small",b="tt"+ +new Date;e.attr("data-dropdown",b);var f=document.createElement("div");f.id=b,c(f).attr("data-dropdown-content","").addClass("f-dropdown content "+a).html(drata.nsx.toolTipContent[d.datakey]),c("body").append(f)}}),drata.globalsettings.enableToolTips()||e.hide(),drata.globalsettings.enableToolTips.subscribe(function(a){a?e.show():e.hide()})}};b.bindingHandlers.slideVisible=u,b.bindingHandlers.comboBox=l,b.bindingHandlers.ddComboBox=n,b.bindingHandlers.editLabel=r,b.bindingHandlers.sortableList=s,b.bindingHandlers.resizeText=t,b.bindingHandlers.checkboxDropdown=p,b.bindingHandlers.tooltip=v,b.virtualElements.allowedBindings.editLabel=!0,b.virtualElements.allowedBindings.sortableList=!0}(ko,jQuery),function(a){a.validation.rules.validDataFilterDate={validator:function(a){if(!a)return!1;var b=drata.utils.getValidDate(a,!0);return!b||b.setHours(0,0,0,0)>(new Date).setHours(0,0,0,0)?!1:!0}},a.validation.rules.groupingInterval={validator:function(a,b){return b._required()?a?"date"===b.intervalType()?["month","year","quarter"].indexOf(a)>-1?!0:!!drata.utils.parseTime(a):!isNaN(+a)&&+a>0:!1:!0},message:"Interval invalid"},a.validation.configure({registerExtenders:!0,decorateElement:!0,decorateInputElement:!0,errorElementClass:"error",errorClass:"error"})}(ko,this),function(a){function b(a,c){if(0===c.length)return a;var e=c.shift();return a[e]||(a[e]=Object.create(d)),b(a[e],c)}var c=a.drata={};c.ns=function(a){var d;if(arguments.length>1?d=f(arguments):e(a)?d=a:"string"==typeof a&&(d=a.split(".")),!d)throw new Error("Either pass in a single string with dot-separated namespaces, an array of namespace strings, or a separate string param for each namespace");return"drata"===d[0].toLowerCase()&&(d=d.slice(1)),b(c,d)};var d={extend:function(a){return j(this,a),this}},e=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},f=function(a,b){return Array.prototype.slice.call(a,b||0)},g=function(a){for(var b=f(arguments,1),c=0,d=b.length;d>c;c++)a=a.replace(new RegExp("\\{"+c+"\\}","g"),b[c]);return a},h=function(a,b){function c(c){$("body").append(c),d++,d===a.length&&b&&b()}var d=0;_.each(a,function(a){$.get("/templates/"+a+".html",c)})},i=function(a){return a instanceof Date?g("{0}/{1}/{2} {3}:{4}",a.getMonth()+1,a.getDate(),a.getFullYear(),a.getHours(),a.getMinutes()):"__"},j=function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);//Recursively apply additional sources
if(arguments.length>2){var d=f(arguments,2);return d.unshift(a),j.apply(this,d)}return a},k=function(a){// Handle the 3 simple types, and null or undefined
if(null==a||"object"!=typeof a)return a;// Handle Date
if(a instanceof Date){var b=new Date;return b.setTime(a.getTime()),b}// Handle Array
if(a instanceof Array){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=k(a[c]);return b}// Handle Object
if(a instanceof Object){var b={};for(var e in a)a.hasOwnProperty(e)&&(b[e]=k(a[e]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")},l=function(a){var b=new RegExp(a+"=([^&]*)","i").exec(window.location.search);return b&&b[1]||""},m=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(c){"function"==typeof b&&b(c),a(c)}}},n=function(a,b){var c=$("#lid");return 0===c.length&&(c=$(document.createElement("span")),c.attr("id","lid"),$("body").append(c)),b=b||"font-size: 12px; font-family: arial;",c.attr("style",b+" position:relative; left:-100%;visibility:hidden;"),c.html(a),{height:c.height(),width:c.width()}},o=document.getElementsByTagName("head")[0],p=function(a,b,c){if(document.getElementById(a)&&!c)return document.getElementById(a);var d=document.createElement("script");d.type="text/html",d.id=a,d.text=b;var e=o&&o.getElementsByTagName("base")[0]||null;return document.body?document.body.appendChild(d):o.insertBefore(d,e),d},q=function(a){if(!a||!isNaN(+a))return null;var b={h:36e5,m:6e4,s:1e3,d:864e5,y:31536e6,w:6048e5},c=a.split(/[^a-z]/gi).filter(function(a){return!!a&&b.hasOwnProperty(a)}),d=a.split(/\D/g).map(function(a){return+a}).filter(function(a){return!!a});if(c.length<=0||c.length!==d.length)return null;for(var e=0,f=0;f<c.length;f++)e+=b[c[f]]*d[f];return e},r=function(a){function b(a,d){if(Object(a)!==a||_.isDate(a))c[d]=a;else if(Array.isArray(a));else{var e=!0;for(var f in a)e=!1,b(a[f],d?d+"."+f:f);e&&d&&(c[d]={})}}var c={};return b(a,""),c},s=function(a,b,c){var d;switch(b){case">":d=a>c;break;case"<":d=c>a;break;case"<=":d=c>=a;break;case"=":d=a===c;break;case"!=":d=a!==c;break;case">=":d=a>=c;break;case"exists":d=void 0!==a;break;case"and":d=a&&c;break;case"or":d=a||c;break;case"+":d=+a+ +c;break;case"-":d=+a-+c;break;case"*":d=+a*+c;break;case"like":d=a.indexOf(c)>-1;break;case"not like":d=-1===a.indexOf(c);break;case"/":d=+a/+c}return d},t=function(a){var b,c,d=_.groupBy(a.data,function(d){//TODO: Clean this 
switch(b=d[a.property],a.intervalType){case"date":var e=new Date(b);switch(a.interval){case"month":c=new Date(e.getFullYear(),e.getMonth(),1);break;case"quarter":c=new Date(e.getFullYear(),3*Math.floor(e.getMonth()/3),1);break;case"year":c=new Date(e.getFullYear(),0,1);break;default:var f=q(a.interval);c=Math.floor(+e/f)*f}c=+c;break;case"numeric":case"currency":c=Math.floor(+b/+a.interval)*+a.interval;break;default:c=b}return c});return d},u=function(a){return _.isNumber(a)?"number":_.isString(a)?"string":_.isBoolean(a)?"bool":_.isDate(a)?"date":"unknown"},v=function(a,b){var c=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{4})$/.exec(a);if(null==c)return void 0;var d=b?c[2]:c[1],e=b?c[1]-1:c[2]-1,f=c[3],g=new Date(f,e,d);return g.getDate()==d&&g.getMonth()==e&&g.getFullYear()==f?g:void 0},w=function(a){var b=[];switch(a){case"day":b=[1,60];break;case"minute":b=[1,60];break;case"hour":b=[1,72];break;case"month":b=[1,24];break;case"year":b=[1,5]}return b},x=function(a){var b,c;switch(a.intervalType){case"static":b=v(a.min,!0),c=v(a.max,!0);break;case"dynamic":var d,e=w(a.intervalKind);b=e[1]-a.min,c=e[1]-a.max;var f=new Date;if(!isNaN(+b)&&!isNaN(+c))switch(a.intervalKind){case"day":d=864e5,b=new Date(+f-d*b),c=new Date(+f-d*c);break;case"minute":d=6e4,b=new Date(+f-d*b),c=new Date(+f-d*c);break;case"hour":d=36e5,b=new Date(+f-d*b),c=new Date(+f-d*c);break;case"month":var g=f.getMonth(),h=new Date(f);b=new Date(f.setMonth(g-b)),c=new Date(h.setMonth(g-c));break;case"year":var i=f.getFullYear(),h=new Date(f);b=new Date(f.setFullYear(i-b)),c=new Date(h.setFullYear(i-c))}}return{min:b,max:c}},y={month:{format:"%b %Y",mb:40,ml:60},year:{format:"%Y",mb:30,ml:30},day:{format:"%Y %b %d",mb:50,ml:60},hours:{format:"%Y %b %d %H:%M",mb:70,ml:70},get:function(a){if(!a)return this.day;var b=1728e5,c=a[1]-a[0];return b>=c?this.hours:this.day}},z=function(a){var b;switch(a.formatType){case"numeric":b=d3.format(".3s");break;case"currency":b=function(a){var b=d3.format(".2s");return"$"+b(a)};break;case"date":switch(a.formatSubType){case"month":b=d3.time.format(y.month.format);break;case"quarter":b=function(a){return a.getFullYear()+" Q "+(Math.floor(a.getMonth()/3)+1)};break;case"year":b=d3.time.format(y.year.format);break;default:intFormat=y.get(a.domain),b=d3.time.format(intFormat.format)}}return b},A=function(a){for(var b=a.map(function(a){return r(a)}),c={},d=Math.min(b.length-1,40),e=d;e>=0;e--){var f=b[e];for(var g in f)c[g]||(c[g]=[]),c[g].push(u(f[g]))}var h=[];for(var g in c){var i=_.countBy(c[g],function(a){return a}),j="unknown",k=0;for(var e in i)i.hasOwnProperty(e)&&"unknown"!==e&&k<i[e]&&(j=e,k=i[e]);h[g]=j}return h};c.ns("js").extend({logmsg:!1});var B=function(a){return a.isComplex?C(a.groups):D(a.selection)+" "+a.operation+" "+("exists"===a.operation?"":g(-1===["numeric","boolean"].indexOf(a.valType)?"'{0}'":"{0}",a.value?a.value:"__"))},C=function(a){var b="";return _.each(a,function(a,c){b+=0===c?B(a):" "+a.logic+" "+B(a)}),b?"("+b+")":""},D=function(a){return a.isComplex?E(a.groups):a.selectedProp?a.selectedProp:"__"},E=function(a,b){var c="";if(b){var d=[];return _.each(a,function(a){c=D(a),"value"!==a.groupBy&&(c=a.groupBy+"("+c+")"),d.push(c)}),d.join(", ")}return _.each(a,function(a,b){c+=0===b?D(a):" "+a.logic+" "+D(a)}),"("+c+")"},F=function(a){var b=[];return _.each(a,function(a){a.isComplex?(innerSel=F(a.groups),b=b.concat(innerSel)):b.push(a.selectedProp.split(".")[0])}),_.uniq(b)},G=function(a,b){return 0===b&&0===a?0:0===b?100:+(100*a/b-100).toFixed(2)};window.debug={},window.widgetmongo=function(a){if(!a||0===a.length)return{};var b={},c={};return b.$and=[],_.each(a,function(a){c={},c[a.property]={},c[a.property][a.operator]=a.value,b.$and.push(c)}),b},c.ns("global").extend({conditionalOperations:[">","<",">=","<=","=","!=","exists","like","not like"],arithmeticOperations:["+","-","*","/"],groupingOptions:["value","count","sum","avg","min","max"],xAxisTypes:["date","numeric","currency"],chartTypes:["line","area","scatter","pie","bar","numeric"],trackingChartTypes:["line","area","scatter","numeric"],comparisonChartTypes:["bar","pie"],logics:["and","or"],propertyTypes:["string","date","bool","numeric","unknown"],numericOperations:[">","<","<=",">=","+","-","*","/"],timeframes:["minute","hour","day","month","year"],uniqueClientId:parseInt(1e8*Math.random())}),Date.prototype.format=function(a){return g(a,this.getFullYear(),this.getMonth()+1,this.getDate())};var H=function(a){if("dynamic"===a.intervalType){if(!a.intervalKind)return;return c.utils.format("{0} {1}s from current time until {2} {1}s from current time",a.max||"__",a.intervalKind,a.min||"__")}return c.utils.format("{0} to {1}",a.min||"__",a.max||"__")};c.ns("utils").extend({format:g,toArray:f,extend:j,getUrlParam:l,clone:k,windowResize:m,textToPixel:n,createTemplate:p,flatten:r,parseTime:q,calc:s,divideDataByInterval:t,getUniqueProperties:A,getBounds:w,getValidDate:v,getDateRange:x,formatDate:i,selectionsExpression:E,conditionsExpression:C,onTemplateLoad:h,intervalFormats:y,getTextFormat:z,getSelectionProperties:F,percChange:G,getDataFilterExpression:H})}(this),/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2014, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
function(a,b,c,d){"use strict";function e(a){return("string"==typeof a||a instanceof String)&&(a=a.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),a}var f=function(b){for(var c=b.length,d=a("head");c--;)0===d.has("."+b[c]).length&&d.append('<meta class="'+b[c]+'" />')};f(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),// Enable FastClick if present
a(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof c.body&&FastClick.attach(c.body)});// private Fast Selector wrapper,
// returns jQuery object. Only use where
// getElementById is not available.
var g=function(b,d){if("string"==typeof b){if(d){var e;if(d.jquery){if(e=d[0],!e)return d}else e=d;return a(e.querySelectorAll(b))}return a(c.querySelectorAll(b))}return a(b,d)},h=function(a){var b=[];return a||b.push("data"),this.namespace.length>0&&b.push(this.namespace),b.push(this.name),b.join("-")},i=function(a){for(var b=a.split("-"),c=b.length,d=[];c--;)0!==c?d.push(b[c]):this.namespace.length>0?d.push(this.namespace,b[c]):d.push(b[c]);return d.reverse().join("-")},j=function(b,c){var d=this,e=!g(this).data(this.attr_name(!0));// # Patch to fix #5043 to move this *after* the if/else clause in order for Backbone and similar frameworks to have improved control over event binding and data-options updating.
// # Patch to fix #5043 to move this *after* the if/else clause in order for Backbone and similar frameworks to have improved control over event binding and data-options updating.
return g(this.scope).is("["+this.attr_name()+"]")?(g(this.scope).data(this.attr_name(!0)+"-init",a.extend({},this.settings,c||b,this.data_options(g(this.scope)))),e&&this.events(this.scope)):g("["+this.attr_name()+"]",this.scope).each(function(){var e=!g(this).data(d.attr_name(!0)+"-init");g(this).data(d.attr_name(!0)+"-init",a.extend({},d.settings,c||b,d.data_options(g(this)))),e&&d.events(this)}),"string"==typeof b?this[b].call(this,c):void 0},k=function(a,b){function c(){b(a[0])}function d(){if(this.one("load",c),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=this.attr("src"),b=a.match(/\?/)?"&":"?";b+="random="+(new Date).getTime(),this.attr("src",a+b)}}return a.attr("src")?void(a[0].complete||4===a[0].readyState?c():d.call(a)):void c()};/*
    https://github.com/paulirish/matchMedia.js
  */
b.matchMedia=b.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,// fakeBody required for <FF4 when executed in <head>
e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(c),/*
   * jquery.requestAnimationFrame
   * https://github.com/gnarf37/jquery-requestAnimationFrame
   * Requires jQuery 1.8+
   *
   * Copyright (c) 2012 Corey Frang
   * Licensed under the MIT license.
   */
function(){function a(){c&&(f(a),h&&jQuery.fx.tick())}for(// requestAnimationFrame polyfill adapted from Erik Möller
// fixes from Paul Irish and Tino Zijdel
// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
var c,d=0,e=["webkit","moz"],f=b.requestAnimationFrame,g=b.cancelAnimationFrame,h="undefined"!=typeof jQuery.fx;d<e.length&&!f;d++)f=b[e[d]+"RequestAnimationFrame"],g=g||b[e[d]+"CancelAnimationFrame"]||b[e[d]+"CancelRequestAnimationFrame"];f?(// use rAF
b.requestAnimationFrame=f,b.cancelAnimationFrame=g,h&&(jQuery.fx.timer=function(b){b()&&jQuery.timers.push(b)&&!c&&(c=!0,a())},jQuery.fx.stop=function(){c=!1})):(// polyfill
b.requestAnimationFrame=function(a){var c=(new Date).getTime(),e=Math.max(0,16-(c-d)),f=b.setTimeout(function(){a(c+e)},e);return d=c+e,f},b.cancelAnimationFrame=function(a){clearTimeout(a)})}(jQuery),b.Foundation={name:"Foundation",version:"5.4.3",media_queries:{small:g(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:g(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:g(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:g(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:g(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:a("<style></style>").appendTo("head")[0].sheet,global:{namespace:d},init:function(a,c,d,e,f){var h=[a,d,e,f],i=[];if(// check RTL
this.rtl=/rtl/i.test(g("html").attr("dir")),// set foundation global scope
this.scope=a||this.scope,this.set_namespace(),c&&"string"==typeof c&&!/reflow/i.test(c))this.libs.hasOwnProperty(c)&&i.push(this.init_lib(c,h));else for(var j in this.libs)i.push(this.init_lib(j,c));return g(b).load(function(){g(b).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),a},init_lib:function(b,c){return this.libs.hasOwnProperty(b)?(this.patch(this.libs[b]),c&&c.hasOwnProperty(b)?("undefined"!=typeof this.libs[b].settings?a.extend(!0,this.libs[b].settings,c[b]):"undefined"!=typeof this.libs[b].defaults&&a.extend(!0,this.libs[b].defaults,c[b]),this.libs[b].init.apply(this.libs[b],[this.scope,c[b]])):(c=c instanceof Array?c:new Array(c),this.libs[b].init.apply(this.libs[b],c))):function(){}},patch:function(a){a.scope=this.scope,a.namespace=this.global.namespace,a.rtl=this.rtl,a.data_options=this.utils.data_options,a.attr_name=h,a.add_namespace=i,a.bindings=j,a.S=this.utils.S},inherit:function(a,b){for(var c=b.split(" "),d=c.length;d--;)this.utils.hasOwnProperty(c[d])&&(a[c[d]]=this.utils[c[d]])},set_namespace:function(){// Description:
//    Don't bother reading the namespace out of the meta tag
//    if the namespace has been set globally in javascript
//
// Example:
//    Foundation.global.namespace = 'my-namespace';
// or make it an empty string:
//    Foundation.global.namespace = '';
//
//
// If the namespace has not been set (is undefined), try to read it out of the meta element.
// Otherwise use the globally defined namespace, even if it's empty ('')
var b=this.global.namespace===d?a(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;// Finally, if the namsepace is either undefined or false, set it to an empty string.
// Otherwise use the namespace value.
this.global.namespace=b===d||/false/i.test(b)?"":b},libs:{},// methods that can be inherited in libraries
utils:{// Description:
//    Fast Selector wrapper returns jQuery object. Only use where getElementById
//    is not available.
//
// Arguments:
//    Selector (String): CSS selector describing the element(s) to be
//    returned as a jQuery object.
//
//    Scope (String): CSS selector describing the area to be searched. Default
//    is document.
//
// Returns:
//    Element (jQuery Object): jQuery object containing elements matching the
//    selector within the scope.
S:g,// Description:
//    Executes a function a max of once every n milliseconds
//
// Arguments:
//    Func (Function): Function to be throttled.
//
//    Delay (Integer): Function execution threshold in milliseconds.
//
// Returns:
//    Lazy_function (Function): Function with throttling applied.
throttle:function(a,b){var c=null;return function(){var d=this,e=arguments;null==c&&(c=setTimeout(function(){a.apply(d,e),c=null},b))}},// Description:
//    Executes a function when it stops being invoked for n seconds
//    Modified version of _.debounce() http://underscorejs.org
//
// Arguments:
//    Func (Function): Function to be debounced.
//
//    Delay (Integer): Function execution threshold in milliseconds.
//
//    Immediate (Bool): Whether the function should be called at the beginning
//    of the delay instead of the end. Default is false.
//
// Returns:
//    Lazy_function (Function): Function with debouncing applied.
debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},// Description:
//    Parses data-options attribute
//
// Arguments:
//    El (jQuery Object): Element to be parsed.
//
// Returns:
//    Options (Javascript Object): Contents of the element's data-options
//    attribute.
data_options:function(b,c){function d(a){return!isNaN(a-0)&&null!==a&&""!==a&&a!==!1&&a!==!0}function e(b){return"string"==typeof b?a.trim(b):b}c=c||"options";var f,g,h,i={},j=function(a){var b=Foundation.global.namespace;return a.data(b.length>0?b+"-"+c:c)},k=j(b);if("object"==typeof k)return k;for(h=(k||":").split(";"),f=h.length;f--;)g=h[f].split(":"),g=[g[0],g.slice(1).join(":")],/true/i.test(g[1])&&(g[1]=!0),/false/i.test(g[1])&&(g[1]=!1),d(g[1])&&(g[1]=-1===g[1].indexOf(".")?parseInt(g[1],10):parseFloat(g[1])),2===g.length&&g[0].length>0&&(i[e(g[0])]=e(g[1]));return i},// Description:
//    Adds JS-recognizable media queries
//
// Arguments:
//    Media (String): Key string for the media query to be stored as in
//    Foundation.media_queries
//
//    Class (String): Class name for the generated <meta> tag
register_media:function(b,c){Foundation.media_queries[b]===d&&(a("head").append('<meta class="'+c+'"/>'),Foundation.media_queries[b]=e(a("."+c).css("font-family")))},// Description:
//    Add custom CSS within a JS-defined media query
//
// Arguments:
//    Rule (String): CSS rule to be appended to the document.
//
//    Media (String): Optional media query string for the CSS rule to be
//    nested under.
add_custom_rule:function(a,b){if(b===d&&Foundation.stylesheet)Foundation.stylesheet.insertRule(a,Foundation.stylesheet.cssRules.length);else{var c=Foundation.media_queries[b];c!==d&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[b]+"{ "+a+" }")}},// Description:
//    Performs a callback function when an image is fully loaded
//
// Arguments:
//    Image (jQuery Object): Image(s) to check if loaded.
//
//    Callback (Function): Function to execute when image is fully loaded.
image_loaded:function(a,b){var c=this,d=a.length;0===d&&b(a),a.each(function(){k(c.S(this),function(){d-=1,0===d&&b(a)})})},// Description:
//    Returns a random, alphanumeric string
//
// Arguments:
//    Length (Integer): Length of string to be generated. Defaults to random
//    integer.
//
// Returns:
//    Rand (String): Pseudo-random, alphanumeric string.
random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)}}},a.fn.foundation=function(){var a=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(a)),this})}}(jQuery,window,window.document),function(a,b,c){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.4.3",settings:{index:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,// jump to top when sticky nav menu toggle is clicked
sticky_on:"all"},init:function(b,c,d){Foundation.inherit(this,"add_custom_rule register_media throttle");var e=this;e.register_media("topbar","foundation-mq-topbar"),this.bindings(c,d),e.S("["+this.attr_name()+"]",this.scope).each(function(){{var b=a(this),c=b.data(e.attr_name(!0)+"-init");e.S("section, .top-bar-section",this)}b.data("index",0);var d=b.parent();d.hasClass("fixed")||e.is_sticky(b,d,c)?(e.settings.sticky_class=c.sticky_class,e.settings.sticky_topbar=b,b.data("height",d.outerHeight()),b.data("stickyoffset",d.offset().top)):b.data("height",b.outerHeight()),c.assembled||e.assemble(b),c.is_hover?e.S(".has-dropdown",b).addClass("not-click"):e.S(".has-dropdown",b).removeClass("not-click"),// Pad body when sticky (scrolled) or fixed.
e.add_custom_rule(".f-topbar-fixed { padding-top: "+b.data("height")+"px }"),d.hasClass("fixed")&&e.S("body").addClass("f-topbar-fixed")})},is_sticky:function(a,b,c){var d=b.hasClass(c.sticky_class);return d&&"all"===c.sticky_on?!0:d&&this.small()&&"small"===c.sticky_on?matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches&&!matchMedia(Foundation.media_queries.large).matches:d&&this.medium()&&"medium"===c.sticky_on?matchMedia(Foundation.media_queries.small).matches&&matchMedia(Foundation.media_queries.medium).matches&&!matchMedia(Foundation.media_queries.large).matches:d&&this.large()&&"large"===c.sticky_on?matchMedia(Foundation.media_queries.small).matches&&matchMedia(Foundation.media_queries.medium).matches&&matchMedia(Foundation.media_queries.large).matches:!1},toggle:function(c){var d,e=this;d=c?e.S(c).closest("["+this.attr_name()+"]"):e.S("["+this.attr_name()+"]");var f=d.data(this.attr_name(!0)+"-init"),g=e.S("section, .top-bar-section",d);e.breakpoint()&&(e.rtl?(g.css({right:"0%"}),a(">.name",g).css({right:"100%"})):(g.css({left:"0%"}),a(">.name",g).css({left:"100%"})),e.S("li.moved",g).removeClass("moved"),d.data("index",0),d.toggleClass("expanded").css("height","")),f.scrolltop?d.hasClass("expanded")?d.parent().hasClass("fixed")&&(f.scrolltop?(d.parent().removeClass("fixed"),d.addClass("fixed"),e.S("body").removeClass("f-topbar-fixed"),b.scrollTo(0,0)):d.parent().removeClass("expanded")):d.hasClass("fixed")&&(d.parent().addClass("fixed"),d.removeClass("fixed"),e.S("body").addClass("f-topbar-fixed")):(e.is_sticky(d,d.parent(),f)&&d.parent().addClass("fixed"),d.parent().hasClass("fixed")&&(d.hasClass("expanded")?(d.addClass("fixed"),d.parent().addClass("expanded"),e.S("body").addClass("f-topbar-fixed")):(d.removeClass("fixed"),d.parent().removeClass("expanded"),e.update_sticky_positioning())))},timer:null,events:function(){var c=this,d=this.S;d(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(a){a.preventDefault(),c.toggle(this)}).on("click.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(){var b=a(this).closest("li");!c.breakpoint()||b.hasClass("back")||b.hasClass("has-dropdown")||c.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(b){var e=d(this),f=d(b.target),g=e.closest("["+c.attr_name()+"]"),h=g.data(c.attr_name(!0)+"-init");return f.data("revealId")?void c.toggle():void(c.breakpoint()||(!h.is_hover||Modernizr.touch)&&(b.stopImmediatePropagation(),e.hasClass("hover")?(e.removeClass("hover").find("li").removeClass("hover"),e.parents("li.hover").removeClass("hover")):(e.addClass("hover"),a(e).siblings().removeClass("hover"),"A"===f[0].nodeName&&f.parent().hasClass("has-dropdown")&&b.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(a){if(c.breakpoint()){a.preventDefault();var b=d(this),e=b.closest("["+c.attr_name()+"]"),f=e.find("section, .top-bar-section"),g=(b.next(".dropdown").outerHeight(),b.closest("li"));e.data("index",e.data("index")+1),g.addClass("moved"),c.rtl?(f.css({right:-(100*e.data("index"))+"%"}),f.find(">.name").css({right:100*e.data("index")+"%"})):(f.css({left:-(100*e.data("index"))+"%"}),f.find(">.name").css({left:100*e.data("index")+"%"})),e.css("height",b.siblings("ul").outerHeight(!0)+e.data("height"))}}),d(b).off(".topbar").on("resize.fndtn.topbar",c.throttle(function(){c.resize.call(c)},50)).trigger("resize").trigger("resize.fndtn.topbar").load(function(){// Ensure that the offset is calculated after all of the pages resources have loaded
d(this).trigger("resize.fndtn.topbar")}),d("body").off(".topbar").on("click.fndtn.topbar",function(a){var b=d(a.target).closest("li").closest("li.hover");b.length>0||d("["+c.attr_name()+"] li.hover").removeClass("hover")}),// Go up a level on Click
d(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(a){a.preventDefault();var b=d(this),e=b.closest("["+c.attr_name()+"]"),f=e.find("section, .top-bar-section"),g=(e.data(c.attr_name(!0)+"-init"),b.closest("li.moved")),h=g.parent();e.data("index",e.data("index")-1),c.rtl?(f.css({right:-(100*e.data("index"))+"%"}),f.find(">.name").css({right:100*e.data("index")+"%"})):(f.css({left:-(100*e.data("index"))+"%"}),f.find(">.name").css({left:100*e.data("index")+"%"})),0===e.data("index")?e.css("height",""):e.css("height",h.outerHeight(!0)+e.data("height")),setTimeout(function(){g.removeClass("moved")},300)}),// Show dropdown menus when their items are focused
d(this.scope).find(".dropdown a").focus(function(){a(this).parents(".has-dropdown").addClass("hover")}).blur(function(){a(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var a=this;a.S("["+this.attr_name()+"]").each(function(){var b,d=a.S(this),e=d.data(a.attr_name(!0)+"-init"),f=d.parent("."+a.settings.sticky_class);if(!a.breakpoint()){var g=d.hasClass("expanded");d.css("height","").removeClass("expanded").find("li").removeClass("hover"),g&&a.toggle(d)}a.is_sticky(d,f,e)&&(f.hasClass("fixed")?(// Remove the fixed to allow for correct calculation of the offset.
f.removeClass("fixed"),b=f.offset().top,a.S(c.body).hasClass("f-topbar-fixed")&&(b-=d.data("height")),d.data("stickyoffset",b),f.addClass("fixed")):(b=f.offset().top,d.data("stickyoffset",b)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(b){var c=this,d=b.data(this.attr_name(!0)+"-init"),e=c.S("section, .top-bar-section",b);// Pull element out of the DOM for manipulation
e.detach(),c.S(".has-dropdown>a",e).each(function(){var b,e=c.S(this),f=e.siblings(".dropdown"),g=e.attr("href");f.find(".title.back").length||(b=a(1==d.mobile_show_parent_link&&g?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link show-for-small"><a class="parent-link js-generated" href="'+g+'">'+e.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),a("h5>a",b).html(// Copy link to subnav
1==d.custom_back_text?d.back_text:"&laquo; "+e.html()),f.prepend(b))}),// Put element back in the DOM
e.appendTo(b),// check for sticky
this.sticky(),this.assembled(b)},assembled:function(b){b.data(this.attr_name(!0),a.extend({},b.data(this.attr_name(!0)),{assembled:!0}))},height:function(b){var c=0,d=this;return a("> li",b).each(function(){c+=d.S(this).outerHeight(!0)}),c},sticky:function(){var a=this;this.S(b).on("scroll",function(){a.update_sticky_positioning()})},update_sticky_positioning:function(){var a="."+this.settings.sticky_class,c=this.S(b),d=this;if(d.settings.sticky_topbar&&d.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var e=this.settings.sticky_topbar.data("stickyoffset");d.S(a).hasClass("expanded")||(c.scrollTop()>e?d.S(a).hasClass("fixed")||(d.S(a).addClass("fixed"),d.S("body").addClass("f-topbar-fixed")):c.scrollTop()<=e&&d.S(a).hasClass("fixed")&&(d.S(a).removeClass("fixed"),d.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(b).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document),function(a,b){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.4.3",settings:{active_class:"open",mega_class:"mega",align:"bottom",is_hover:!1,smart_position:!0,smart_position_arrays:{right:["right","bottom","top","left","right"],left:["left","right","bottom","top","left"],top:["top","right","bottom","left","top"],bottom:["bottom","top","right","left","bottom"]},opened:function(){},closed:function(){}},init:function(a,b,c){Foundation.inherit(this,"throttle"),this.bindings(b,c)},events:function(){var c=this,d=c.S;d(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(b){var e=d(this).data(c.attr_name(!0)+"-init")||c.settings;(!e.is_hover||Modernizr.touch)&&(b.preventDefault(),c.toggle(a(this)))}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(a){var b,e,f=d(this);clearTimeout(c.timeout),f.data(c.data_attr())?(b=d("#"+f.data(c.data_attr())),e=f):(b=f,e=d("["+c.attr_name()+"='"+b.attr("id")+"']"));var g=e.data(c.attr_name(!0)+"-init")||c.settings;d(a.target).data(c.data_attr())&&g.is_hover&&c.closeall.call(c),g.is_hover&&c.open.apply(c,[b,e])}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(){var a=d(this);c.timeout=setTimeout(function(){if(a.data(c.data_attr())){var b=a.data(c.data_attr(!0)+"-init")||c.settings;b.is_hover&&c.close.call(c,d("#"+a.data(c.data_attr())))}else{var e=d("["+c.attr_name()+'="'+d(this).attr("id")+'"]'),b=e.data(c.attr_name(!0)+"-init")||c.settings;b.is_hover&&c.close.call(c,a)}}.bind(this),150)}).on("click.fndtn.dropdown",function(b){var e=d(b.target).closest("["+c.attr_name()+"-content]");if(!(d(b.target).closest("["+c.attr_name()+"]").length>0))return!d(b.target).data("revealId")&&e.length>0&&(d(b.target).is("["+c.attr_name()+"-content]")||a.contains(e.first()[0],b.target))?void b.stopPropagation():void c.close.call(c,d("["+c.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+c.attr_name()+"-content]",function(){c.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+c.attr_name()+"-content]",function(){c.settings.closed.call(this)}),d(b).off(".dropdown").on("resize.fndtn.dropdown",c.throttle(function(){c.resize.call(c)},50)),this.resize()},close:function(b){var c=this;b.each(function(){var d=a("["+c.attr_name()+"="+b[0].id+"]")||a("aria-controls="+b[0].id+"]");d.attr("aria-expanded","false"),c.S(this).hasClass(c.settings.active_class)&&(c.S(this).css(Foundation.rtl?"right":"left","-99999px").attr("aria-hidden","true").removeClass(c.settings.active_class).prev("["+c.attr_name()+"]").removeClass(c.settings.active_class).removeData("target"),c.S(this).trigger("closed").trigger("closed.fndtn.dropdown",[b]))})},closeall:function(){var b=this;a.each(b.S("["+this.attr_name()+"-content]"),function(){b.close.call(b,b.S(this))})},open:function(a,b){this.css(a.addClass(this.settings.active_class),b),a.prev("["+this.attr_name()+"]").addClass(this.settings.active_class),a.data("target",b.get(0)).trigger("opened").trigger("opened.fndtn.dropdown",[a,b]),a.attr("aria-hidden","false"),b.attr("aria-expanded","true"),a.focus()},data_attr:function(){return this.namespace.length>0?this.namespace+"-"+this.name:this.name},toggle:function(a){var b=this.S("#"+a.data(this.data_attr()));0!==b.length&&(this.close.call(this,this.S("["+this.attr_name()+"-content]").not(b)),b.hasClass(this.settings.active_class)?(this.close.call(this,b),b.data("target")!==a.get(0)&&this.open.call(this,b,a)):this.open.call(this,b,a))},resize:function(){var a=this.S("["+this.attr_name()+"-content].open"),b=this.S("["+this.attr_name()+"='"+a.attr("id")+"']");a.length&&b.length&&this.css(a,b)},css:function(a,b){var c=Math.max((b.width()-a.width())/2,8),d=b.data(this.attr_name(!0)+"-init")||this.settings;if(this.clear_idx(),this.small()){var e=this.dirs.bottom.call(a,b,d);a.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:e.top}),a.css(Foundation.rtl?"right":"left",c)}else this.style(a,b,d);return a},style:function(b,c,d){var e=a.extend({position:"absolute"},this.position(b,c,d));b.attr("style","").css(e)},// return CSS property object
position:function(c,d,e){var f={},g={},h=e.smart_position_arrays[e.align],i=h.length,j=c.outerWidth(),k=c.outerHeight(),l=c.offsetParent().offset();if(e.smart_position){var m=a(b);g.top=m.scrollTop(),g.left=m.scrollLeft(),g.right=g.left+m.width(),g.bottom=g.top+m.height();for(var n=0;i>n&&(f=this.dirs[h[n]].call(c,d,e),this.is_out(g,f.top+l.top,f.left+l.left,j,k,3)!==!1);n++);}else f=this.dirs[e.align].call(c,d,e);return f},is_out:function(a,b,c,d,e,f){return b<a.top+f||c<a.left+f||b+e>a.bottom-f||c+d>a.right-f},// return CSS property object
// `this` is the dropdown
dirs:{// Calculate target offset
_base:function(a){var b=this.offsetParent(),c=b.offset(),d=a.offset();return d.top-=c.top,d.left-=c.left,d},top:function(a,b){var c=Foundation.libs.dropdown,d=c.dirs._base.call(this,a);return this.addClass("drop-top"),(a.outerWidth()<this.outerWidth()||c.small()||this.hasClass(b.mega_menu))&&c.adjust_pip(this,a,b,d),Foundation.rtl?{left:d.left-this.outerWidth()+a.outerWidth(),top:d.top-this.outerHeight()}:{left:d.left,top:d.top-this.outerHeight()}},bottom:function(a,b){var c=Foundation.libs.dropdown,d=c.dirs._base.call(this,a);return(a.outerWidth()<this.outerWidth()||c.small()||this.hasClass(b.mega_menu))&&c.adjust_pip(this,a,b,d),c.rtl?{left:d.left-this.outerWidth()+a.outerWidth(),top:d.top+a.outerHeight()}:{left:d.left,top:d.top+a.outerHeight()}},left:function(a){var b=Foundation.libs.dropdown.dirs._base.call(this,a);return this.addClass("drop-left"),{left:b.left-this.outerWidth(),top:b.top}},right:function(a){var b=Foundation.libs.dropdown.dirs._base.call(this,a);return this.addClass("drop-right"),{left:b.left+a.outerWidth(),top:b.top}}},// Insert rule to style psuedo elements
adjust_pip:function(a,b,c,d){var e=Foundation.stylesheet,f=8;a.hasClass(c.mega_class)?f=d.left+b.outerWidth()/2-8:this.small()&&(f+=d.left-8),this.rule_idx=e.cssRules.length;var g=".f-dropdown.open:before",h=".f-dropdown.open:after",i="left: "+f+"px;",j="left: "+(f-1)+"px;";e.insertRule?(e.insertRule([g,"{",i,"}"].join(" "),this.rule_idx),e.insertRule([h,"{",j,"}"].join(" "),this.rule_idx+1)):(e.addRule(g,i,this.rule_idx),e.addRule(h,j,this.rule_idx+1))},// Remove old dropdown rule index
clear_idx:function(){var a=Foundation.stylesheet;this.rule_idx&&(a.deleteRule(this.rule_idx),a.deleteRule(this.rule_idx),delete this.rule_idx)},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown"),this.S("html, body").off(".fndtn.dropdown"),this.S(b).off(".fndtn.dropdown"),this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}}(jQuery,window,window.document),function(a){var b=function(){function a(d){return d.each(function(a){var d=d3.select(this),h=function(a){return a.map(function(a){return{x:a.x,y:e.domain()[0]}})};g.interpolate(c),g.y0(b.h-b.m.t-b.m.b);var i=d.selectAll(".line").data(a);i.enter().append("path").attr("class","line"),i.attr("fill",function(a){return f(a.key)}).transition().attr("visibility",function(a){return a.disabled?"hidden":""}).attr("d",function(a){return g(a.disabled?h(a.values):a.values)}),i.exit().remove()}),a}var b,c="linear",d=d3.scale.linear(),e=d3.scale.linear(),f=d3.scale.category20(),g=d3.svg.area().x(function(a){return d(a.x)}).y(function(a){return e(a.y)});return a.color=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(d=b,a):d},a.yScale=function(b){return arguments.length?(e=b,a):e},a.interpolate=function(b){return arguments.length?(c=b,a):c},a.dims=function(c){return arguments.length?(b=c,a):b},a};a.drata.ns("models").extend({area:b})}(this),function(a){var b=function(){function a(p){return p.each(function(a){{var p,q=d3.select(this),r=a.filter(function(a){return!a.disabled});r.length}d=[n(r,f),o(r,f)];var s=0,t=0;switch(i=drata.utils.getTextFormat({formatType:g,formatSubType:h,domain:d}),g){case"numeric":s=50,t=50,c=d3.scale.linear();break;case"currency":s=30,t=30,c=d3.scale.linear();break;case"date":switch(c=d3.time.scale(),h){case"month":t=drata.utils.intervalFormats.month.mb,s=drata.utils.intervalFormats.month.ml;break;case"quarter":s=50,t=50;break;case"year":t=drata.utils.intervalFormats.year.mb,s=drata.utils.intervalFormats.year.ml;break;default:p=drata.utils.intervalFormats.get(d),t=p.mb,s=p.ml}}var u=0,v=e.w-e.m.l-e.m.r,w=e.h-e.m.t-e.m.b;"y"===f?(c.range([w,0]),j&&(u=-v),m.ticks(Math.ceil(w/50))):(c.range([0,v]),j&&(u=w),m.ticks(Math.ceil(v/50))),k>0&&m.ticks(k),c.domain(d),0!==u&&m.tickSize(-v);var x,y=0,z=0;if(m.scale(c).tickFormat(function(a){return x=i(a),"x"!==f?x:(z=drata.utils.textToPixel(x,"font-size:10px; font-family: arial;"),y+=z.width,x)}).orient(b),l){var A=q.call(m),B=e.w<250?-60:-30;"x"===f&&"date"===g&&(A.selectAll("text").style("text-anchor","end").attr("dx","0").attr("dy",".50em").attr("transform",function(){return"rotate("+B+")"}),e.m.b=t)}}),a}var b,c,d,e,f,g,h,i,j=!1,k=0,l=!0,m=d3.svg.axis(),n=function(a,b){return d3.min(a,function(a){return d3.min(a.values.filter(function(a){return!a.disabled}),function(a){return a[b]})})},o=function(a,b){return d3.max(a,function(a){return d3.max(a.values.filter(function(a){return!a.disabled}),function(a){return a[b]})})};return a.dims=function(b){return arguments.length?(e=b,a):e},a.scale=function(){if(!arguments.length)return c;//if(_axisTicType) throw "Cant set both AxisTicType and Scale";
//_scale = value;
//return _scale;
throw"scale is readonly property of Axis"},a.orient=function(c){return arguments.length?(b=c,a):b},a.includeGridLines=function(b){return arguments.length?(j=b,a):j},a.ticks=function(b){return arguments.length?(k=b,a):k},a.axisType=function(b){return arguments.length?(f=b,a):f},a.domain=function(b){return arguments.length?(d=b,a):d},a.dateInterval=function(b){return arguments.length?(h=b,a):h},a.axisTicType=function(b){return arguments.length?(g=b,a):g},a.drawAxis=function(b){return arguments.length?(l=b,a):l},a};a.drata.ns("models").extend({axis:b})}(this),function(a){var b=function(){function a(h){return h.each(function(a){var h=d3.select(this),i=h.selectAll("g.dot-line-group").data(function(){return a.filter(function(a){return!a.disabled})});i.enter().append("g").attr("class","dot-line-group");var j=i.selectAll("circle.circle-each").data(function(a){return _.each(a.values,function(b){b.key=a.key}),a.values});j.enter().append("circle").attr("class","circle-each"),j.attr("r",g).attr("fill",function(a){return d?e(a.key):"none"}).attr("stroke",function(a){return d?e(a.key):"#fff"}).attr("stroke-width",2).on("mouseover",function(a){var b=e(a.key);d3.select(this).attr("stroke",b).attr("stroke-width",4).attr("r",4).attr("fill","#fff"),f.showToolTip&&f.showToolTip(a,b)}).on("mouseout",function(){f.hideToolTip&&f.hideToolTip(),d3.select(this).attr("r",g).attr("fill",function(a){return d?e(a.key):"none"}).attr("stroke",function(a){return d?e(a.key):"#fff"}).attr("stroke-width",2)}).transition().duration(500).attr("cx",function(a){return b(a.x)}).attr("cy",function(a){return c(a)}),j.exit().remove(),i.exit().remove()}),a}var b,c,d=!1,e=d3.scale.category20(),f=d3.dispatch(),g=function(){return 2};return a.color=function(b){return arguments.length?(e=b,a):e},a.colorfull=function(b){return arguments.length?(d=b,a):d},a.xScale=function(c){return arguments.length?(b=c,a):b},a.yScale=function(b){return arguments.length?(c=b,a):c},a.dispatch=function(b){return arguments.length?(f=b,a):f},a.dotRadius=function(b){return arguments.length?(g=b,a):g},a};a.drata.ns("models").extend({dots:b})}(this),function(a){var b=function(){function a(b){return b.each(function(a){var b=d3.select(this),c=b.selectAll("g.label-group").data(a),j=c.enter().append("g").attr("class","label-group"),k=0,l=0;totalLen=0,wm=f.w-f.m.l-f.m.r,b.selectAll("g.label-group").attr("transform",function(a){var b=drata.utils.textToPixel(a.key).width+h;totalLen+=b,k+b>=wm&&(k=0,l++);var c="translate("+k+", "+l*g+")";return k+=b,c}),f.m.t=Math.max(f.m.t,(l+1)*g+h);var m=l>0?f.m.l:(f.w-totalLen/(l+1))/2;"center"===e?b.attr("transform","translate("+m+","+(f.h-f.m.b)+")"):"topcenter"===e&&b.attr("transform","translate("+m+")"),j.append("text").attr("class","label-text"),j.append("circle").attr("class","label-circle"),c.select("text.label-text").attr("x",function(){return 10}).attr("y",g).attr("fill",function(a,b){return d(a.key,b)}).text(function(a){return a.key}).on("click",i.togglePath),c.select("circle.label-circle").attr("r",4).attr("fill",function(a,b){return a.disabled?"#fff":d(a.key,b)}).attr("stroke",function(a,b){return d(a.key,b)}).attr("stroke-width",2).attr("cy",function(){return 12}).on("click",i.togglePath),c.exit().remove()}),a}var b,c,d,e,f,g=16,h=14,i=d3.dispatch();return a.color=function(b){return arguments.length?(d=b,a):d},a.dispatch=function(b){return arguments.length?(i=b,a):i},a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.align=function(b){return arguments.length?(e=b,a):e},a.dims=function(b){return arguments.length?(f=b,a):f},a};a.drata.ns("models").extend({labels:b})}(this),function(a){var b=function(){function a(c){return c.each(function(a){var c=d3.select(this);// xdiff = _xScale(data[0].values[1].x) - _xScale(data[0].values[0].x);
f.interpolate(b);var g=function(a){return a.map(function(a){return{x:a.x,y:d.domain()[0]}})},h=c.selectAll(".line").data(a);h.enter().append("path").attr("class","line"),h.style("stroke",function(a){return e(a.key)}).transition().attr("visibility",function(a){return a.disabled?"hidden":""}).attr("d",function(a){return f(a.disabled?g(a.values):a.values)}),h.exit().remove()}),a}var b="linear",c=d3.scale.linear(),d=d3.scale.linear(),e=d3.scale.category20(),f=d3.svg.line().x(function(a){return c(a.x)}).y(function(a){return d(a.y)});return a.color=function(b){return arguments.length?(e=b,a):e},a.xScale=function(b){return arguments.length?(c=b,a):c},a.yScale=function(b){return arguments.length?(d=b,a):d},a.interpolate=function(c){return arguments.length?(b=c,a):b},a};a.drata.ns("models").extend({lines:b})}(this),function(a){var b=function(){function a(c){return c.each(function(){var a=d3.select(this),c=(a.selectAll("text.tooltip").data([0]).enter().append("text").attr("class","tool-tip"),a.select("text.tool-tip"));b.on("showToolTip",function(a,b){c.text("x:"+a.x+", y:"+a.y).attr("fill",b)}),b.on("hideToolTip",function(){c.text("")})}),a}var b=d3.dispatch();return a.dispatch=function(c){return arguments.length?(b=c,a):b},a};a.drata.ns("models").extend({toolTip:b})}(this),function(a){var b=function(){function a(m){return m.each(function(m){console.log("area chart drawn");var n=d3.select(this);"date"===d&&_.each(m,function(a){_.each(a.values,function(a){a.x=new Date(a.x)})}),k.domain(m.map(function(a){return a.key})),a.resize=function(){l={m:{l:30,r:10,t:30,b:30}},n.transition().duration(500).call(a)},a.change=function(b){n.datum(b).transition().duration(500).call(a)},a.feed=function(b){if(!b)throw"no data supplied";for(var c=0;c<b.length;c++)for(var d=b[c].values.length,e=0;d>e;e++)m[c].values.shift(),m[c].values.push(b[c].values[e]);n.datum(m).transition().duration(500).call(a)},l.w=$(this.parentNode).width(),l.h=$(this.parentNode).height(),i.axisTicType(d).dateInterval(c).dims(l).includeGridLines(!1),j.ticks(b).axisTicType("numeric").dims(l).includeGridLines(!0);var o=d3.dispatch("togglePath","showToolTip","hideToolTip");o.on("togglePath",function(b){b.disabled=!b.disabled,a.resize()}),n.attr("width",l.w).attr("height",l.h);var p=n.selectAll("g.topgroup").data([m]),q=p.enter().append("g").attr("class","topgroup");//labels
if(q.append("g").attr("class","x axis"),q.append("g").attr("class","y axis"),q.append("g").attr("class","area-group"),q.append("g").attr("class","line-group"),g){q.append("g").attr("class","labels-group");var r=drata.models.labels().color(k).dispatch(o).dims(l),s=p.select("g.labels-group");s.datum(m).call(r)}i.drawAxis(e),j.drawAxis(f);var t=p.select("g.x.axis");t.call(i),t.attr("transform","translate("+l.m.l+","+(l.h-l.m.b)+")"),g&&s.attr("transform","translate("+(l.m.l+10)+")"),p.select("g.y.axis").attr("transform","translate("+l.m.l+","+l.m.t+")").call(j);var u=i.scale(),v=j.scale(),w=drata.models.lines().xScale(u).yScale(v).color(function(){return"#fff"}).interpolate("monotone");p.select("g.line-group").attr("transform","translate("+l.m.l+","+l.m.t+")").call(w);var x=drata.models.area().xScale(u).yScale(v).color(k).interpolate("monotone").dims(l);if(p.select("g.area-group").attr("transform","translate("+l.m.l+","+l.m.t+")").call(x),h){q.append("g").attr("class","tooltip-group");var y=drata.models.toolTip().dispatch(o);p.select("g.tooltip-group").attr("transform","translate("+(l.w-5)+", "+(l.m.t-10)+")").call(y),q.append("g").attr("class","dot-group");var z=drata.models.dots().xScale(u).yScale(function(a){return v(a.y)}).color(k).dispatch(o);p.select("g.dot-group").attr("transform","translate("+l.m.l+","+l.m.t+")").datum(m).call(z)}p.exit().remove()}),a}var b,c,d="numeric",e=!0,f=!0,g=!0,h=!1,i=drata.models.axis().orient("bottom").axisType("x"),j=drata.models.axis().orient("left").axisType("y").ticks(5),k=d3.scale.category20(),l={m:{l:30,r:10,t:30,b:30}};return a.xAxisType=function(b){return arguments.length?(d=b,a):d},a.yticks=function(c){return arguments.length?(b=c,a):b},a.dateInterval=function(b){return arguments.length?(c=b,a):c},a.drawLabels=function(b){return arguments.length?(g=b,a):g},a.drawYAxis=function(b){return arguments.length?(f=b,a):f},a.drawXAxis=function(b){return arguments.length?(e=b,a):e},a.includeDataMarkers=function(b){return arguments.length?(h=b,a):h},a};a.drata.ns("charts").extend({areaChart:b})}(this),function(a){var b=function(){function a(r){return r.each(function(r){function s(){l.range([c.h-c.m.t-c.m.b,0]);var a=o(r,"value"),b=Math.min(a,0),d=p(r,"value");B=[b,d],l.domain(B),h&&z.select("g.y.axis").attr("transform","translate("+c.m.l+","+c.m.t+")").call(m)}function t(){j.rangeRoundBands([0,c.w-c.m.l-c.m.r],.1),j.domain(r.map(function(a){return a.key})),k.domain(x).rangeRoundBands([0,j.rangeBand()]),i&&z.select("g.x.axis").attr("transform","translate("+c.m.l+","+(c.h-c.m.b)+")").call(n)}function u(){var a=drata.models.labels().color(function(a){return b(a)}).dims(c).align("topcenter").dispatch(e);z.select("g.labels-group").datum(y).call(a)}function v(){var a=z.select("g.bars-group").attr("transform","translate("+c.m.l+","+c.m.t+")").selectAll("g.bar-group").data(function(a){return a});a.enter().append("g").attr("class","bar-group"),a.attr("transform",function(a){return"translate("+j(a.key)+",0)"});var d=a.selectAll("rect").data(function(a){return a.values});if(d.enter().append("rect").attr("height",0).attr("y",l(B[0])),d.style("fill",function(a){return b(a.key)}).attr("stroke","#fff").attr("stroke-width",1).transition().duration(300).attr("x",function(a){return k(a.key)}).attr("y",function(a){return l(a.disabled?B[0]:a.value)}).attr("width",k.rangeBand()).attr("height",function(a){//console.log('bar value: ' + d.value + '; y: ' + ((dims.h - dims.m.t - dims.m.b) - y(d.value)));
return a.disabled?0:c.h-c.m.t-c.m.b-l(a.value)}),d.exit().transition().duration(300).attr("height",0).attr("y",l(B[0])).remove(),f){var e=a.selectAll("text").data(function(a){return a.values});e.enter().append("text").attr("y",l(B[0]));var g=d3.format(".2s");e.style("fill","#ccc").text(function(a){return g(a.value)}).style("text-anchor","middle").style("width",k.rangeBand()).transition().duration(300).attr("x",function(a){return k(a.key)+k.rangeBand()/2}).attr("y",function(a){return a.disabled?l(B[0]):l(a.value)+12}),e.exit().remove()}a.exit().remove()}console.log("bar chart drawn");var w=d3.select(this);a.resize=function(){c=d,w.transition().duration(1e3).call(a)},a.change=function(b){q=[],w.datum(b).transition().duration(1e3).call(a)};var x=[];_.each(r,function(a){_.each(a.values,function(a){a.disabled=q.indexOf(a.key)>-1,-1===x.indexOf(a.key)&&x.push(a.key)})}),b.domain(x);var y=x.map(function(a){return{key:a,disabled:q.indexOf(a)>-1}});e.on("togglePath",function(b){if(y.length-1!==q.length||-1!==q.indexOf(b.key)){var c=q.indexOf(b.key);-1===c?q.push(b.key):q.splice(c,1),a.resize()}}),c.w=$(this.parentNode).width(),c.h=$(this.parentNode).height(),w.attr("width",c.w).attr("height",c.h);var z=w.selectAll("g.topgroup").data([r]),A=z.enter().append("g").attr("class","topgroup");A.append("g").attr("class","bars-group"),A.append("g").attr("class","y axis"),A.append("g").attr("class","x axis"),A.append("g").attr("class","labels-group");var B;g&&u(),t(),s(),v(),z.exit().remove()}),a}var b=d3.scale.category10(),c={m:{t:20,r:10,b:30,l:40}},d=c,e=d3.dispatch("togglePath"),f=!1,g=!0,h=!0,i=!0,j=d3.scale.ordinal(),k=d3.scale.ordinal(),l=d3.scale.linear(),m=d3.svg.axis().scale(l).tickFormat(d3.format(".2s")).orient("left").ticks(10),n=d3.svg.axis().scale(j).orient("bottom"),o=function(a,b){return d3.min(a,function(a){return d3.min(a.values.filter(function(a){return!a.disabled}),function(a){return a[b]})})},p=function(a,b){return d3.max(a,function(a){return d3.max(a.values.filter(function(a){return!a.disabled}),function(a){return a[b]})})},q=[];return a.showBarLabels=function(b){return arguments.length?(f=b,a):f},a.drawYAxis=function(b){return arguments.length?(h=b,a):h},a.drawXAxis=function(b){return arguments.length?(i=b,a):i},a.drawLabels=function(b){return arguments.length?(g=b,a):g},a.dims=function(b){return arguments.length?(c=b,d=b,a):c},a};a.drata.ns("charts").extend({barChart:b})}(this),function(a){var b={drawPathCircles:!1,margin:{top:40,right:10,bottom:25,left:30},resize:!0,dateFormat:"timestamp",xAxis:{orient:"bottom",type:"linear",ticks:5,"class":"axis x"},yAxis:{orient:"left",type:"linear",ticks:5,"class":"axis y",transform:"rotate(-90)",label:"this is my y"},interpolate:"linear",/*monotone*/
preserveAspectRatio:"xMidYMid",linearGradient:{id:"my-gradient",offsetColors:[{offset:"0%",color:"steelblue"},{offset:"50%",color:"green"},{offset:"100%",color:"red"}],clippings:{y1:2,y2:8}}},c=function(c,e,f){var g=this;g.graphOptions={},$.extend(g.graphOptions,b,e),g.data=f,g.elem=document.getElementById(c),g.labelPos={},g.elemHeight=function(){return g.elem.clientHeight},g.elemWidth=function(){return g.elem.clientWidth},g.parseDate="timestamp"==g.graphOptions.dateFormat?function(a){return new Date(a)}:d3.time.format(g.graphOptions.dateFormat).parse,g.x="time"==g.graphOptions.xAxis.type?d3.time.scale():d3.scale.linear(),g.y=d3.scale.linear(),g.xAxis=d3.svg.axis().scale(g.x).orient(g.graphOptions.xAxis.orient).ticks(g.graphOptions.xAxis.ticks),//.ticksize(-self.elemHeight(), 0, 0);
g.yAxis=function(){return d3.svg.axis().scale(g.y).ticks(g.graphOptions.yAxis.ticks).orient(g.graphOptions.yAxis.orient).tickSize(-g.elemWidth(),0,0)},g.line=d3.svg.line().x(function(a){return g.x(a.x)}).y(function(a){return g.y(a.y)}),g.graphOptions.interpolate&&g.line.interpolate(g.graphOptions.interpolate),g.graphContainer=d3.select("#"+g.elem.id),g.color=d3.scale.category10().domain(g.data.map(function(a){return a.key})),g.toolTip=new d({graphContainer:g.graphContainer,scale:{x:g.x,y:g.y},position:"fixed"}),g.drawContainer=function(){g.graphContainer.select("svg").remove(),g.x.range([0,g.elemWidth()-g.graphOptions.margin.left-g.graphOptions.margin.right]),g.y.range([g.elemHeight()-g.graphOptions.margin.top-g.graphOptions.margin.bottom,0]),g.svg=g.graphContainer.append("svg").attr("viewBox","0 0 "+g.elemWidth()+" "+g.elemHeight()).attr("preserveAspectRatio",g.graphOptions.preserveAspectRatio).append("g").attr("transform","translate("+g.graphOptions.margin.left+","+g.graphOptions.margin.top+")");var a=new Date,b=new Date(a);a.setHours(a.getHours()+1),g.xdiff=g.x(b)-g.x(a)},g.processData=function(){var a=[null,null],b=[null,null],c=2;_.each(g.data,function(d){"time"==g.graphOptions.xAxis.type&&_.each(d.values,function(a){a.x=g.parseDate(a.x)});var e,f;e=d3.extent(d.values,function(a){return a.x}),d.disabled?g.extent&&(f=[g.extent.y[0],g.extent.y[0]]):f=d3.extent(d.values,function(a){return a.y}),(null==a[0]||e[0]<a[0])&&(a[0]=e[0]),(null==a[1]||e[1]>a[1])&&(a[1]=e[1]),(null==b[0]||f[0]<b[0])&&(b[0]=f[0]),(null==b[1]||f[1]>b[1])&&(b[1]=f[1]),g.labelPos[d.key]=c,c+=d.key.length}),g.x.domain(a),g.y.domain(b),g.extent={x:a,y:b}},g.drawAxes=function(){a.logmsg&&console.log("drawing axes");var b=g.svg.select("#gxaxis"),c=g.svg.select("#gyaxis");g.elementExists(b)||(b=g.svg.append("g").attr("id","gxaxis").attr("class",g.graphOptions.xAxis.class).attr("transform","translate(0,"+(g.elemHeight()-g.graphOptions.margin.top-g.graphOptions.margin.bottom)+")")),b.transition().duration(1e3).call(g.xAxis),a.logmsg&&console.log("x axis drawn"),g.elementExists(c)||(c=g.svg.append("g").attr("id","gyaxis").attr("class",g.graphOptions.yAxis.class),c.append("text").attr("transform",g.graphOptions.yAxis.transform).attr("y",6).attr("dy",".71em").style("text-anchor","end").text(g.graphOptions.yAxis.label)),c.transition().duration(1e3).call(g.yAxis()),a.logmsg&&console.log("y axis drawn")},g.drawLegendCircles=function(){g.graphContainer.selectAll(".legend-circles").remove(),g.svg.append("g").attr("class","legend-circles").selectAll("circle").data(g.data).enter().append("circle").attr("cx",function(a,b){return 10*g.labelPos[a.key]+40*b-15}).attr("cy",-20).attr("r",6).attr("fill",function(a){return g.color(a.key)}).attr("stroke",function(a){return g.color(a.key)}).attr("stroke-width","2").on("mouseover",function(a){g.highlightPath("#"+a.key)}).on("mouseout",function(){g.graphContainer.select(".lines-g").selectAll("path").attr("class","line-path")}).on("click",function(a){d3.select(this).attr("fill",a.disabled?g.color(a.key):"#fff"),g.highlightPath("#"+a.key),g.svg.select("#"+a.key).transition().duration(1e3).delay(200).attr("d",function(){a.disabled=!a.disabled}),g.processData(),g.drawAxes(),g.drawPaths(!0),g.drawCircles()})},g.drawLegendLabels=function(){g.graphContainer.selectAll(".legend-labels").remove(),g.svg.append("g").attr("class","legend-labels").selectAll("text").data(g.data).enter().append("text").attr("x",function(a,b){return 10*g.labelPos[a.key]+40*b}).attr("y",-15).attr("fill",function(a){return g.color(a.key)}).text(function(a){return a.key}).on("mouseover",function(a){g.highlightPath("#"+a.key)}).on("mouseout",function(){g.graphContainer.select(".lines-g").selectAll("path").attr("class","line-path")})},g.highlightPath=function(a){g.graphContainer.select(".lines-g").selectAll("path").attr("class","line-path unselected-line-path"),g.graphContainer.select(a).attr("class","line-path selected-line-path")},g.drawCircles=function(){if(g.drawPathCircles){g.graphContainer.selectAll(".circles-g").remove();var a=g.svg.selectAll(".circles-g").data(g.data).enter().append("g").attr("class",function(a){return"circles-g path-"+a.key}),b=a.selectAll("circle").data(function(a){var b=a.key;return a.values.map(function(a){return a.pathId=b,a.color=g.color(b),a})});colorIndex=0;{b.enter().append("circle").attr("cx",function(a){return g.x(a.x)}).attr("cy",function(a){return g.y(a.disabled?g.extent.y[0]:a.y)}).attr("r",10).attr("stroke",function(a){return a.color}).attr("stroke-width","4").attr("fill","white").attr("opacity",0).on("mouseover",function(a){//if(!d.disabled) return; 
d3.select(this).attr("opacity",1),g.highlightPath("#"+a.pathId),g.toolTip.open(a,g.graphOptions.margin.top,50)}).on("mouseout",function(){//if(!d.disabled) return; 
g.graphContainer.select(".lines-g").selectAll("path").attr("class","line-path"),d3.select(this).attr("opacity",0),g.toolTip.close()})}}},g._getLine=function(a){if(a.disabled){var b=drata.utils.clone(a.values);return b.forEach(function(a){a.y=g.extent.y[0]}),g.line(b)}return g.line(a.values)},g.elementExists=function(a){return!!a[0][0]},g.drawPath=function(b,c,d){var e=b.select("#"+d.key);g.elementExists(e)?c?e.transition().duration(1e3).attr("d",g._getLine.bind(g)):e.attr("transform",null).attr("d",g._getLine.bind(g)).transition().duration(1e3).attr("transform","translate("+g.xdiff+")"):b.append("path").datum(d).attr("id",function(a){return a.key}).attr("class","line-path").attr("style",function(a){return"stroke:"+g.color(a.key)}).attr("transform",null).attr("d",g._getLine.bind(g)).attr("transform","translate("+g.xdiff+")"),a.logmsg&&console.log("path drawn : "+d.key)},g.drawPaths=function(b){a.logmsg&&console.log("drawing paths");var c=g.svg.select(".lines-g");g.elementExists(c)||(c=g.svg.append("g").attr("class","lines-g").attr("transform","translate("+-g.xdiff+")")),_.each(g.data,g.drawPath.bind(g,c,b))},g.drawContent=function(){g.drawAxes();var b=new Date;g.drawPaths(),a.logmsg&&console.log("draw path: "+(new Date-b)),b=new Date,g.drawCircles(),a.logmsg&&console.log("draw circle: "+(new Date-b)),b=new Date,g.drawLegendLabels(),a.logmsg&&console.log("draw legend labels: "+(new Date-b)),b=new Date,g.drawLegendCircles(),a.logmsg&&console.log("draw legend circles: "+(new Date-b))},g.redrawResize=function(){g.drawContainer(),g.drawContent()},g.redraw=function(){g.processData(),g.drawContent()},g.drawStream=function(){var b=new Date;g.processData(),a.logmsg&&console.log("process data:"+(new Date-b)),b=new Date,g.drawAxes(),a.logmsg&&console.log("draw axes:"+(new Date-b)),g.drawPaths(),g.drawCircles()},g.removeChart=function(){g.svg.remove(),g._t&&clearTimeout(g._t)},g.init=function(){var b=new Date;g.processData(),a.logmsg&&console.log("process data:"+(new Date-b)),g.drawContainer(),g.drawContent()},g.onResize=function(){g._t&&clearTimeout(g._t),g._t=setTimeout(g.redrawResize.bind(g),2e3)};var h=new Date;a.logmsg&&console.log(new Date),g.init(),a.logmsg&&console.log("time it took :"+(new Date-h))},d=function(a){var b=this;$.extend(b,a),b._tip=null,b._create=function(){b._tip=b.graphContainer.append("div").attr("class","tooltip"),b.close()},b.open=function(a,c,d){"relative"===b.position&&(b._tip.style("top",b.scale.y(a.y)+c+"px"),b._tip.style("left",b.scale.x(a.x)+d+"px")),b._tip.style("background-color",a.color),b._tip.style("visibility","visible"),b._tip.text("Time: "+a.x+"\nValue: "+a.y)},b.close=function(){"relative"===b.position&&(b._tip.style("top",0),b._tip.style("left",0)),b._tip.style("visibility","hidden")},b._create()};a.logmsg=!1,a.drata.ns("charts").extend({LineChart:c})}(this),function(a){var b=function(){function a(m){return console.log("line chart drawn"),m.each(function(m){var n=d3.select(this);b>0&&j.ticks(b),"date"===d&&_.each(m,function(a){_.each(a.values,function(a){a.x=new Date(a.x)})}),k.domain(m.map(function(a){return a.key})),a.resize=function(){l={m:{l:30,r:10,t:30,b:30}},n.transition().duration(500).call(a)},a.change=function(b){n.datum(b).transition().duration(500).call(a)},a.feed=function(b){if(!b)throw"no data supplied";for(var c=0;c<b.length;c++)for(var d=b[c].values.length,e=0;d>e;e++)m[c].values.shift(),m[c].values.push(b[c].values[e]);n.datum(m).transition().duration(500).call(a)},l.w=$(this.parentNode).width(),l.h=$(this.parentNode).height(),i.axisTicType(d).dateInterval(c).dims(l).includeGridLines(!1),j.axisTicType("numeric").dims(l).includeGridLines(!0);var o=d3.dispatch("togglePath","showToolTip","hideToolTip");o.on("togglePath",function(b){b.disabled=!b.disabled,a.resize()}),n.attr("width",l.w).attr("height",l.h);var p=n.selectAll("g.topgroup").data([m]),q=p.enter().append("g").attr("class","topgroup");//labels
if(q.append("g").attr("class","x axis"),q.append("g").attr("class","y axis"),q.append("g").attr("class","line-group"),g){q.append("g").attr("class","labels-group");var r=drata.models.labels().color(k).dispatch(o).dims(l),s=p.select("g.labels-group");s.datum(m).call(r)}i.drawAxis(e),j.drawAxis(f);var t=p.select("g.x.axis");t.call(i),t.attr("transform","translate("+l.m.l+","+(l.h-l.m.b)+")"),g&&s.attr("transform","translate("+(l.m.l+10)+")"),p.select("g.y.axis").attr("transform","translate("+l.m.l+","+l.m.t+")").call(j);var u=i.scale(),v=j.scale(),w=drata.models.lines().xScale(u).yScale(v).color(k).interpolate("linear");if(p.select("g.line-group").attr("transform","translate("+l.m.l+","+l.m.t+")").call(w),h){q.append("g").attr("class","dot-group");var x=drata.models.dots().xScale(u).yScale(function(a){return v(a.y)}).color(k).dispatch(o);p.select("g.dot-group").attr("transform","translate("+l.m.l+","+l.m.t+")").datum(m).call(x),q.append("g").attr("class","tooltip-group");var y=drata.models.toolTip().dispatch(o);p.select("g.tooltip-group").attr("transform","translate("+(l.w-5)+", "+(l.m.t-10)+")").call(y)}p.exit().remove()}),a}var b,c,d="numeric",e=!0,f=!0,g=!0,h=!1,i=drata.models.axis().orient("bottom").axisType("x"),j=drata.models.axis().orient("left").axisType("y").ticks(5),k=d3.scale.category20(),l={m:{l:30,r:10,t:10,b:30}};return a.xAxisType=function(b){return arguments.length?(d=b,a):d},a.yticks=function(c){return arguments.length?(b=c,a):b},a.dateInterval=function(b){return arguments.length?(c=b,a):c},a.drawLabels=function(b){return arguments.length?(g=b,a):g},a.drawYAxis=function(b){return arguments.length?(f=b,a):f},a.drawXAxis=function(b){return arguments.length?(e=b,a):e},a.includeDataMarkers=function(b){return arguments.length?(h=b,a):h},a};a.drata.ns("charts").extend({lineChart:b})}(this),function(a){var b=function(){function a(o){return console.log("pie chart drawn"),o.each(function(o){var s=d3.select(this),t=o.values.length;i||(e.m.b=10),a.resize=function(){e={m:{l:10,r:10,t:10,b:30}},i||(e.m.b=10),s.transition().duration(1e3).call(a)},//chart.container = this;
a.change=function(b){s.datum(b).call(a)},a.shuffleArcs=function(){var b=o.values.length;_.each(o.values,function(a){a.enlarge=!1,a.index=b-a.index+1}),a.resize()},_.each(o.values,function(a,b){(!a.index||a.enlarge)&&(a.index=a.enlarge?0:b+1)}),p.on("togglePath",function(b){var c;q.length===t-1?(_.each(o.values,function(a){a.disabled=!1}),q=[]):(c=b.disabled,b.disabled=!c,c?q.splice(q.indexOf(b.key),1):q.push(b.key)),a.resize()}),p.on("arcClick",function(c){_.each(o.values,function(a,b){a.enlarge=!1,a.index=b+1}),c.data.enlarge=c.data.key!==b,r("arcClick",c),a.resize()}),e.w=$(this.parentNode).width(),e.h=$(this.parentNode).height(),s.attr("width",e.w).attr("height",e.h);var u=s.selectAll("g.topgroup").data([o]),v=u.enter().append("g").attr("class","topgroup");if(v.append("g").attr("class","arcs-group"),g){v.append("g").attr("class","labels-group");var w=drata.models.labels().color(d).dims(e).align("topcenter").dispatch(p);u.select("g.labels-group").datum(o.values).call(w)}d.domain(o.values.map(function(a){return a.key}));var x=Math.min(e.w-e.m.l-e.m.r,e.h-e.m.t-e.m.b)/2,y=m?x-m:x;f.value(function(a){return a.disabled?0:a.value}),f.sort(l?function(a){return a.index}:null),c.outerRadius(y),c.innerRadius(j?y-j:y/2);var z=function(a){var d=d3.interpolate(this._current,a);if(this._current=d(0),a.data.key===b){var e=d3.interpolate(x,y);return b=void 0,function(a){return c.outerRadius(e(a))(d(a))}}if(a.data.enlarge){var e=d3.interpolate(y,x);return b=a.data.key,function(a){return c.outerRadius(e(a))(d(a))}}return function(a){return c.outerRadius(y)(d(a))}},A=function(){var a=d3.interpolate(this._current,{startAngle:2*Math.PI,endAngle:2*Math.PI,value:0});return this._current=a(0),function(b){return c(a(b))}},B=u.select("g.arcs-group").attr("transform","translate("+e.w/2+","+(x+e.m.t)+")").selectAll("path").data(f(o.values));B.enter().append("path").attr("class","arc").attr("id",function(a){return a.data.key.replace(" ","_")}).attr("fill",function(a){return d(a.data.key)}).each(function(a){this._current={data:a.data,value:a.value,startAngle:n.startAngle,endAngle:n.endAngle}}),B.transition().ease("poly(4)").duration(400).attrTween("d",function(a){//console.log(d.data);
// if(d.data.disabled) {
//     return arcTweenOut.call(this, d);
// } 
// else{
return z.call(this,a)}),B.exit().transition().duration(750).attrTween("d",A).remove(),// now remove the exiting arcs
v.append("g").attr("class","text-group");for(var C=0,D=0;D<o.values.length;D++)o.values[D].disabled||(C+=+o.values[D].value);var E=u.selectAll("g.text-group").attr("transform","translate("+e.w/2+","+(x+e.m.t)+")").selectAll("text").data(f(o.values)),F=E.enter().append("svg:text").attr("transform","translate(0,0)");if(k?(F.append("svg:textPath").attr("xlink:href",function(a){return"#"+a.data.key.replace(" ","_")}).text(function(a){return a.data.key}).attr("letter-spacing",4),E.attr("dx","10px").attr("dy","30px")):(F.attr("dy",".35em"),E.style("text-anchor","middle").text(function(a){return a.data.disabled?"":Math.round(a.value/C*100).toFixed(1)+"%"}),E.transition().duration(750).attr("transform",function(a){return"translate("+c.centroid(a)+")"})),E.attr("fill",function(a){return a.data.enlarge?"#fff":h}),m&&(B.on("click",p.arcClick),E.on("click",p.arcClick)),E.exit().remove(),i){v.append("svg:text").attr("class","pie-label").attr("fill","#1f77b4").style("text-anchor","middle");{u.select("text.pie-label").text(o.key).attr("transform","translate("+e.w/2+","+(x+x+e.m.t+15)+")")}}}),a}var b,c=d3.svg.arc(),d=d3.scale.category20(),e={m:{l:10,r:10,t:10,b:30}},f=d3.layout.pie(),g=!0,h="#fff",i=!0,j=0,k=!1,l=!1,m=0,n={startAngle:2*Math.PI,endAngle:2*Math.PI},o={},p=d3.dispatch("togglePath","arcClick"),q=[],r=function(a,b){o.hasOwnProperty(a)&&o[a](b)};return a.drawOuterLabels=function(b){return arguments.length?(g=b,a):g},a.drawDataKey=function(b){return arguments.length?(i=b,a):i},a.rotateArcs=function(b){return arguments.length?(l=b,a):l},a.arcExpand=function(b){return arguments.length?(m=b,a):m},a.keyLabels=function(b){return arguments.length?(k=b,a):k},a.innerRadius=function(b){return arguments.length?(j=b,a):j},a.onEvent=function(b,c){return o[b]=c,a},a.textFillColor=function(b){return arguments.length?(h=b,a):h},a};a.drata.ns("charts").extend({pieChart:b})}(this),function(a){var b=function(){function a(l){return console.log("scatter chart drawn"),l.each(function(l){var m=d3.select(this);"date"===e&&_.each(l,function(a){_.each(a.values,function(a){a.x=new Date(a.x)})});var n=l.filter(function(a){return!a.disabled}),o=0,p=0,q=n.map(function(a){return o=drata.utils.textToPixel(a.key),p=Math.max(p,o.width),a.key});i.m.l=Math.max(p,30),console.log("m left"+i.m.l),h.domain(l.map(function(a){return a.key})),a.resize=function(){i={m:{l:0,r:30,t:30,b:30}},m.transition().duration(500).call(a)},a.change=function(b){m.datum(b).transition().duration(500).call(a)};var r=d3.dispatch("togglePath","showToolTip","hideToolTip");r.on("togglePath",function(b){b.disabled=!b.disabled,a.resize()}),i.w=$(this.parentNode).width(),i.h=$(this.parentNode).height(),f.axisTicType(e).dateInterval(b).dims(i).includeGridLines(!1);//var xrange = [getMin(enabledData, 'x'),getMax(enabledData, 'x')];
var s=[j(n,"y"),k(n,"y")];//x.domain(xrange);
c.domain(q),d.domain(s),//yAxis.tickSize(-wm);
m.attr("width",i.w).attr("height",i.h);var t=m.selectAll("g.topgroup").data([l]),u=t.enter().append("g").attr("class","topgroup");u.append("g").attr("class","x axis"),u.append("g").attr("class","y axis"),u.append("g").attr("class","dot-group"),u.append("g").attr("class","labels-group");var v=t.select("g.x.axis");//.transition().duration(500)
v.call(f),v.attr("transform","translate("+i.m.l+","+(i.h-i.m.b)+")"),console.log("m left after x axis"+i.m.l);var w=drata.models.labels().color(h).dispatch(r).dims(i),x=t.select("g.labels-group");x.datum(l).call(w),console.log("m left after labels"+i.m.l),x.attr("transform","translate("+(i.m.l+10)+")");var y=d3.max(l,function(a){return a.values.length}),z=i.w-i.m.l-i.m.r,A=i.h-i.m.t-i.m.b,B=Math.min(Math.floor(z/y-5)/2,Math.floor(A/q.length-5)/2);d.range([.2,B]),c.rangeRoundBands([A,0],1),t.select("g.y.axis").attr("transform","translate("+i.m.l+","+i.m.t+")").call(g);var C=f.scale(),D=drata.models.dots().xScale(C).yScale(function(a){return c(a.key)}).color(h).colorfull(!0).dotRadius(function(a){return d(a.y)});t.select("g.dot-group").attr("transform","translate("+i.m.l+","+i.m.t+")").datum(l).call(D),t.exit().remove()}),a}//var x = d3.scale.linear();
var b,c=d3.scale.ordinal(),d=d3.scale.linear(),e="date",f=drata.models.axis().axisType("x").orient("bottom").ticks(5),g=d3.svg.axis().scale(c).orient("left"),h=d3.scale.category10(),i={m:{l:0,r:30,t:30,b:30}},j=function(a,b){return d3.min(a,function(a){return d3.min(a.values.filter(function(a){return!a.disabled}),function(a){return a[b]})})},k=function(a,b){return d3.max(a,function(a){return d3.max(a.values.filter(function(a){return!a.disabled}),function(a){return a[b]})})};return a.xAxisType=function(b){return arguments.length?(e=b,a):e},a.dateInterval=function(c){return arguments.length?(b=c,a):b},a};a.drata.ns("charts").extend({scatterPlot:b})}(this),function(a){var b,c=drata.global.uniqueClientId,d="/api/";try{b=io.connect()}catch(e){}var f=d+"external/",g=function(a,b,d,e){var f={type:a.toUpperCase(),url:b,contentType:"application/json",headers:{"Access-Control-Allow-Origin":"*",clientid:c},success:function(a){e&&e({success:!0,result:a})},error:function(a){console.log(a),e&&e({success:!1,status:a.status,message:a.responseText})}};d&&(f.data=JSON.stringify(d)),$.ajax(f)},h=function(a,b){var c=d+drata.utils.format("dashboard/{0}",a);g("GET",c,void 0,b)},i=function(a,b){var c=d+drata.utils.format("widget/{0}",a);g("GET",c,void 0,b)},j=function(a,b){var c=d+drata.utils.format("dashboard/{0}/widgets",a);g("GET",c,void 0,b)},k=function(a,b){var c=d+"widgets";g("POST",c,a,b)},l=function(a,b){var c=d+drata.utils.format("dashboard/{0}/widgets",a);g("DELETE",c,void 0,b)},m=function(a,c){g("POST",d+"widget",a,function(a){c(a),b.emit("widgetcreated",{widgetId:a.result._id,dashboardId:a.result.dashboardId})})},n=function(a,c){g("PUT",d+"widget",a,function(d){c(d),b.emit("widgetupdated",{widgetId:a._id,dashboardId:a.dashboardId})})},o=function(a,c){var e=d+drata.utils.format("widget/{0}",a);g("DELETE",e,void 0,function(d){c&&c(d),console.log("emiting widge removed"),b.emit("widgetremoved",{widgetId:a})})},p=function(a,b){g("PUT",d+"dashboard",a,b)},q=function(a,b){var c=d+drata.utils.format("dashboard/{0}",a);g("DELETE",c,void 0,b)},r=function(a){var b=d+"dashboards";g("GET",b,void 0,a)},s=function(a){var b=0,c=[];r(function(d){b=d.result.length,_.each(d.result,function(d){t(d._id,function(e){b--,0===e.result.length?c.push({tagName:"__",dashboardName:d.name,dashboardId:d._id}):_.each(e.result,function(a){a.dashboardName=d.name,c.push(a)}),0===b&&a&&a({result:c})})})})},t=function(a,b){var c=d+drata.utils.format("dashboard/{0}/tags",a);g("GET",c,void 0,b)},u=function(a,b){var c=d+drata.utils.format("dashboard/{0}/tags",a);g("DELETE",c,void 0,b)},v=function(a,b){g("PUT",d+"tags",a,b)},w=function(a,b){var c=d+drata.utils.format("tags/{0}",a);g("DELETE",c,void 0,b)},x=function(a){var b=f+"datasource";g("GET",b,void 0,a)},y=function(a,b){var c=f+drata.utils.format("{0}/database",a);g("GET",c,void 0,b)},z=function(a,b){var c=f+drata.utils.format("{0}/{1}/{2}/properties",a.dataSource,a.database,a.collectionName);g("GET",c,void 0,b)},A=function(a,b){var c=f+drata.utils.format("{0}/{1}/collectionNames",a.dataSource,a.database);g("GET",c,void 0,b)},B=function(a,b,c){var d=f+drata.utils.format("{0}/{1}/{2}",b.dataSource,b.database,b.collectionName);g("POST",d,a,c)};//END EXTERNAL API
a.drata.ns("apiClient").extend({getDashboard:h,getWidget:i,getWidgetsOfDashboard:j,getWidgets:k,addWidget:m,updateWidget:n,deleteWidget:o,upsertDashboard:p,deleteDashboard:q,getAllDashboards:r,getAllTags:s,getAllTagsOfDashboard:t,addTag:v,removeTag:w,deleteAllTagsDashboard:u,deleteAllWidgetsDashboard:l,getDataKeys:A,getUniqueProperties:z,getData:B,getDataSourceNames:x,getDatabaseNames:y})}(this),$(function(){$(".js-sortable").sortable({// containment: '#sortable',
cursor:"move",handle:".handle",forcePlaceholderSize:!0,stop:function(a,b){console.log(b),console.log("index : "+$(b.item).data("ind"))}})});var Segmentor=function(){var a=this;//self.propertyTypes = {};
a.properties=ko.observableArray(),a.level=0,a.temp=ko.observable(),a.outputData=ko.observable(),a.conditionGroup=new ConditionGroup({level:a.level+1,model:void 0,renderType:"Condition"}),a.selectionGroup=new SelectionGroup({level:a.level}),a.formErrors=ko.observableArray(),a.groupData=ko.observable(),a.dataFilter=new DataFilter,a.chartType=ko.observable();var b,c,d;a.dataGroup=void 0,a.initialize=function(b){b=b||{},a.conditionGroup.prefill(b.group||[]),a.selectionGroup.prefill(b.selection||[]),a.dataFilter.prefill(b.dataFilter||{}),a.chartType(b.chartType),a.dataGroup&&a.dataGroup.setProps(b.dataGroup||{}),a.chartType.isModified(!1),a.formErrors([])},a.dataGroupTemplate=ko.computed(function(){return drata.global.trackingChartTypes.indexOf(a.chartType())>-1?(a.dataGroup=b||new TrackDataGroup({}),d="track-datagroup-template"):(a.dataGroup=c||new ComparisonDataGroup({}),d="comp-datagroup-template"),{name:d,data:a.dataGroup}}),a.getModel=function(){return a.isValidSegment()?a.getM():void 0},a.getM=function(){return{selection:a.selectionGroup.getModel(),dataGroup:a.dataGroup?a.dataGroup.getModel():void 0,group:a.conditionGroup.getModel(),dataFilter:a.dataFilter.getModel(),chartType:a.chartType()}},a.getQueryErrors=function(){var b=[],c=a.getM(),d=drata.global.trackingChartTypes.indexOf(a.chartType())>-1;0===c.selection.length&&b.push("No selections exist, please select the property you wish to visualize");var e=_.groupBy(c.selection,function(a){return a.isComplex?"complex":"simple"});//Logic validation 7
//selections should not have sum, avg, min, max for non numeric properties
if(e.simple=e.simple||[],e.complex=e.complex||[],e.simple.length>0){var f=e.simple.filter(function(a){return isNaN(+a.selectedProp)&&"numeric"!==drata.dashboard.propertyManager.getPropertyType(a.selectedProp)&&["sum","avg","min","max"].indexOf(a.groupBy)>-1}).map(function(a){return a.selectedProp});f.length>0&&b.push('Error is selections: cannot perform <em>sum, avg, min, max </em> on non-numeric properties <em style="font-weight:bold">'+f.join(", ")+"</em>")}//logic validation 8
//any non numeric selection by value is invalid 
//numeric value in simple selection is invalid
if(e.simple.length>0){var g=e.simple.filter(function(a){return isNaN(+a.selectedProp)||drata.dashboard.propertyManager.getPropertyType(a.selectedProp)?"numeric"!==drata.dashboard.propertyManager.getPropertyType(a.selectedProp)&&"value"===a.groupBy:(b.push('Error is selections: numeric value cannot be used in a simple selection <em style="font-weight:bold">'+a.selectedProp+"</em>"),!1)}).map(function(a){return a.selectedProp});g.length>0&&b.push('Error is selections: cannot select <em>value</em> of non-numeric properties <em style="font-weight:bold">'+g.join(", ")+"</em>")}//logic validation 1
// should not perform arithmetic operations on non numeric properties
var h=drata.utils.getSelectionProperties(e.complex),i=[];h.length>0&&(i=h.filter(function(a){return isNaN(+a)&&"numeric"!==drata.dashboard.propertyManager.getPropertyType(a)}),i.length>0&&b.push('Error is selections: cannot perform arithmetic operations on non-numeric properties <em style="font-weight:bold">'+i.join(", ")+"</em>"));//Logic validation 2
//if groupby exists, selections should be sum count or avg
//if groupby doesnt exist, only value is permitted.
var j;if(c.dataGroup&&(j=drata.global.trackingChartTypes.indexOf(c.chartType)>-1?c.dataGroup.timeseries:c.dataGroup.hasGrouping),j){var k=c.selection.filter(function(a){return"value"===a.groupBy}).map(function(a){return a.selectedProp});k.length>0&&b.push('Error in Selections and Grouping: When "Group by" exists, aggregate functions <em>sum, avg, count </em> are expected in <em style="font-weight:bold">'+k.join(", ")+"</em>")}else if(d){var l=c.selection.filter(function(a){return"value"!==a.groupBy}).map(function(a){return a.selectedProp});l.length>0&&b.push('Error in Selections and Grouping: When "Group by" dosen\'t exist, aggregate function <em>sum, avg, count </em> are not allowed in <em style="font-weight:bold">'+l.join(", ")+"</em>")}else{var m=c.selection.filter(function(a){return"value"===a.groupBy}).map(function(a){return a.selectedProp});m.length>0&&b.push('Either apply "Group by" or apply aggregete functions to selections such as <em>sum, avg, count </em>. <em style="font-weight:bold">value</em> is not permitted for your selections <em style="font-weight:bold">'+m.join(", ")+"</em>")}//logic validation 3
//when complex selections, count is not allowed
if(e.complex.length>0){var n=e.complex.filter(function(a){return"count"===a.groupBy}).map(function(a){return a.aliasName});n.length>0&&b.push('Error in Selections: <em>count</em> is not allowed when selections are derived by from more than 1 property <em style="font-weight:bold">('+n.join(", ")+")</em>")}return b},a.isValidSegment=function(){a.formErrors([]);for(var b=ko.validation.group(a.selectionGroup,{deep:!0}),c=a.conditionGroup.conditions(),d=ko.validation.group(a.dataFilter,{deep:!0}),e=ko.validation.group(a,{deep:!1}),f=!0,g=0;g<c.length;g++)c[g].isValidCondition()||(f=!1);if(f||a.formErrors.push("Conditions have errors."),b().length>0&&(f=!1,b.showAllMessages(),a.formErrors.push("Selections have errors.")),e().length>0&&(f=!1,e.showAllMessages(),a.formErrors(a.formErrors().concat(e()))),d().length>0&&(f=!1,d.showAllMessages(),a.formErrors.push("Errors with date range")),a.dataGroup){var h=ko.validation.group(a.dataGroup,{deep:!0});h().length>0&&(f=!1,h.showAllMessages(),a.formErrors(a.formErrors().concat(h())))}var i=a.getQueryErrors();return i.length>0&&(f=!1,a.formErrors(a.formErrors().concat(i))),f},a.chartType.extend({required:{message:"Select Chart Type"}})},TrackDataGroup=function(){var a=this;a.hasGrouping=ko.observable(!1),a.groupByProp=ko.observable(),a.xAxisType=ko.observable(),a.timeseries=ko.observable(),a.xAxisProp=ko.observable(),a.timeseriesInterval=ko.observable(),a.intervalOptions=ko.computed(function(){return"date"!==a.xAxisType()?void 0:["1h","5m","60s","1d","1w","month","quarter","year"]}),a.hasGrouping.subscribe(function(b){b||a.groupByProp(void 0)}),a.properties=ko.computed(function(){return"date"===a.xAxisType()?drata.dashboard.propertyManager.dateProperties():drata.dashboard.propertyManager.numericProperties()}),a.xAxisType.subscribe(function(){a.xAxisProp(void 0),a.xAxisProp.isModified(!1)}),a.timeseries.subscribe(function(b){b||a.timeseriesInterval(void 0)}),a.setProps=function(b){a.groupByProp(b.groupByProp),a.timeseries(b.timeseries),a.xAxisType(b.xAxisType),a.xAxisProp(b.xAxisProp),a.hasGrouping(void 0!==b.groupByProp),a.timeseriesInterval(b.timeseriesInterval)},a.getModel=function(){var b=ko.toJS(a);return delete b.setProps,delete b.getModel,delete b.template,delete b.intervalOptions,delete b.properties,b},a.groupByProp.extend({required:{message:"Enter GroupBy value",onlyIf:function(){return a.hasGrouping()}}}),a.timeseriesInterval.extend({groupingInterval:{_required:function(){return a.timeseries()},intervalType:function(){return a.xAxisType()}}}),a.xAxisProp.extend({required:{message:"Select x axis"}})},ComparisonDataGroup=function(){var a=this;a.hasGrouping=ko.observable(!1),a.groupByProp=ko.observable(),a.groupByInterval=ko.observable(),a.divideByInterval=ko.observable(),a.groupByIntervalType=ko.observable(),a.groupByProp.subscribe(function(b){var c=drata.dashboard.propertyManager.getPropertyType(b);a.groupByIntervalType(c?c:"unknown"),a.groupByInterval(void 0),a.groupByInterval.isModified(!1)}),a.hasDivideBy=ko.observable(!1),a.divideByProp=ko.observable(),a.divideByIntervalType=ko.observable(),a.divideByProp.subscribe(function(b){var c=drata.dashboard.propertyManager.getPropertyType(b);a.divideByIntervalType(c?c:"unknown"),a.divideByInterval(void 0),a.divideByInterval.isModified(!1)}),a.groupByIntervalOptions=ko.computed(function(){return"date"!==a.groupByIntervalType()?[]:["1h","5m","60s","1d","1w","month","quarter","year"]}),a.divideByIntervalOptions=ko.computed(function(){return"date"!==a.divideByIntervalType()?[]:["1h","5m","60s","1d","1w","month","quarter","year"]}),a.hasGrouping.subscribe(function(b){b||(a.groupByProp(void 0),a.hasDivideBy(void 0))}),a.hasDivideBy.subscribe(function(b){b||a.divideByProp(void 0)}),a.setProps=function(b){a.groupByProp(b.groupByProp),a.hasGrouping(void 0!==b.groupByProp),a.divideByProp(b.divideByProp),a.hasDivideBy(void 0!==b.divideByProp),a.groupByIntervalType(b.groupByIntervalType),a.divideByIntervalType(b.divideByIntervalType),//last
a.groupByInterval(b.groupByInterval),//last
a.divideByInterval(b.divideByInterval)},a.getModel=function(){var b=ko.toJS(a);return delete b.setProps,delete b.getModel,delete b.groupByIntervalOptions,delete b.divideByIntervalOptions,delete b.errors,b},a.needsGroupByInterval=ko.computed(function(){return a.hasGrouping()&&["date","numeric"].indexOf(a.groupByIntervalType())>-1}),a.needsDivideByInterval=ko.computed(function(){return a.hasDivideBy()&&["date","numeric"].indexOf(a.divideByIntervalType())>-1}),a.groupByProp.extend({required:{message:"Enter GroupBy value",onlyIf:function(){return a.hasGrouping()}}}),a.divideByProp.extend({required:{message:"Enter SliceBy value",onlyIf:function(){return a.hasDivideBy()}}}),a.groupByInterval.extend({groupingInterval:{_required:function(){return a.needsGroupByInterval()},intervalType:function(){return a.groupByIntervalType()}}}),a.divideByInterval.extend({groupingInterval:{_required:function(){return a.needsDivideByInterval()},intervalType:function(){return a.divideByIntervalType()}}})},DataFilter=function(){var a=this;a.min=ko.observable(),a.max=ko.observable(),a.minDate=ko.observable(),a.maxDate=ko.observable();var b;a.intervalType=ko.observable("static"),a.intervalKind=ko.observable(),a.dateProp=ko.observable().extend({required:{message:"Enter your Date Property"}});var c=function(c){if(b){var d=drata.utils.getBounds(c.intervalKind);c.minMax=c.minMax||[],c.minMax[0]=void 0===c.minMax[0]?Math.floor((d[1]-d[0])/3):c.minMax[0],c.minMax[1]=void 0===c.minMax[1]?d[1]:c.minMax[1],b.slider("option","min",d[0]),b.slider("option","max",d[1]),b.slider("option","values",c.minMax),a.min(c.minMax[0]),a.max(c.minMax[1])}};a.intervalKind.subscribe(function(a){c({intervalKind:a})}),a.intervalType.subscribe(function(a){b&&b.slider("dynamic"===a?"enable":"disable")}),a.getModel=function(){return{intervalKind:a.intervalKind(),intervalType:a.intervalType(),min:"static"==a.intervalType()?a.minDate():a.min(),max:"static"==a.intervalType()?a.maxDate():a.max(),dateProp:a.dateProp()}},a.prefill=function(b){a.intervalType(b.intervalType||"static"),a.intervalKind(b.intervalKind),"static"===b.intervalType?(b.min&&a.minDate(b.min),b.max&&a.maxDate(b.max)):"dynamic"===b.intervalType&&c({intervalKind:b.intervalKind,minMax:[b.min,b.max]}),a.dateProp(b.dateProp),a.dateProp.isModified(!1)},a.expression=ko.computed(function(){return drata.utils.getDataFilterExpression(a.getModel())}).extend({throttle:500});var d=function(){b=$("#myslider").slider({range:!0,slide:function(b,c){a.min(c.values[0]),a.max(c.values[1])}})};a.showDatePicker=function(b){"static"===a.intervalType()&&("start"===b?a.startDp&&a.startDp.datepicker("show"):"end"===b&&a.endDp&&a.endDp.datepicker("show"))};var e=function(){a.startDp=$("#from").datepicker({defaultDate:"-1m",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,onClose:function(a){$("#to").datepicker("option","minDate",a)}}),a.endDp=$("#to").datepicker({changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(a){$("#from").datepicker("option","maxDate",a)}})};a.afterRender=function(){d(),e()},a.minDate.extend({validDataFilterDate:{message:"Invalid Date",onlyIf:function(){return"static"==a.intervalType()}}}),a.intervalKind.extend({required:{message:"Please select Interval",onlyIf:function(){return"dynamic"==a.intervalType()}}}),a.maxDate.extend({validDataFilterDate:{message:"Invalid Date",onlyIf:function(){return"static"==a.intervalType()}}})},Condition=function(a){var b=this;b.level=a.level,b.isTopLevel=!1,b.logic=ko.observable("and"),b.selection=new Selection({level:a.level,renderType:"topCondition"}),b.operation=ko.observable("="),b.value=ko.observable(),b.conditions=ko.observableArray(),b.isComplex=ko.computed(function(){return b.conditions().length>0});var c=ko.observable("unknown");b.valType=ko.computed({read:function(){if(!b.selection.isComplex()){var a=drata.dashboard.propertyManager.getPropertyType(b.selection.selectedProp());return a?a:c()}},write:function(a){c(a)}}),b.availableValues=ko.computed(function(){return"bool"===b.valType()?["true","false"]:[]}),b.availableOperations=ko.computed(function(){return"string"===b.valType()?_.difference(drata.global.conditionalOperations,drata.global.numericOperations):"bool"===b.valType()?["=","exists"]:"date"===b.valType()||"numeric"===b.valType()?_.difference(drata.global.conditionalOperations,["like","not like"]):drata.global.conditionalOperations}),b.addCondition=function(){b.conditions.push(new Condition({level:a.level+1}))},b.addComplexCondition=function(){b.conditions.push(new Condition({level:a.level+1}))},//self.boldExpression= ko.observable(false);
b.removeCondition=function(a){b.conditions.remove(a)},b.clear=function(){b.conditions([])},b.showComplex=ko.observable(!1),b.hideComplex=ko.computed(function(){return!b.showComplex()}),b.toggleComplex=function(){b.showComplex(!b.showComplex()),b.showComplex()&&!b.isComplex()&&(b.selection.clearGroups(),//reset the selection.
b.value(void 0),b.value.isModified(!1))},b.done=function(){b.isValidCondition()&&b.toggleComplex()},b.clear=function(){b.conditions([]),b.showComplex(!1),b.selection.clearGroups(),//reset the selection.
b.value(void 0),b.value.isModified(!1)},b.prefill=function(a){b.logic(a.logic),b.value(a.value),b.selection.prefill(a.selection),b.operation(a.operation),b.prefillGroups(a.groups)},b.prefillGroups=function(c){b.conditions(ko.utils.arrayMap(c,function(b){return new Condition({level:a.level+1,model:b})}))},b.getModel=function(){var a=[];return _.each(b.conditions(),function(b){a.push(b.getModel())}),{groupType:"condition",groups:a,logic:b.logic(),selection:b.selection.getModel(),isComplex:b.isComplex(),operation:b.operation(),value:b.value(),valType:b.valType()}},b.expression=ko.computed(function(){var a="";if(b.isComplex()){var c=b.conditions();_.each(c,function(b,c){a+=0===c?b.expression():" "+b.logic()+" "+b.expression()}),a="("+a+")"}else{var d="exists"===b.operation(),e="string"===b.valType();a=drata.utils.format("{0} {1} {2}{3}{2}",b.selection.expression(),b.operation(),e&&!d?"'":"",d?"":b.value()||"__")}return a}),b.complexConditionSummary=ko.computed(function(){return'Complex Condition: <span class="keystroke">'+(b.expression().length>27?b.expression().substring(0,23)+"...)":b.expression())+"</span>"}),b.afterAdd=function(a){1===a.nodeType&&$(a).hide().slideDown(100,function(){$(a).show()})},b.beforeRemove=function(a){1===a.nodeType&&$(a).slideUp(100,function(){$(a).remove()})},b.isValidCondition=function(){var a=!0;if(b.isComplex())for(var c=b.conditions(),d=0;d<c.length;d++)c[d].isValidCondition()||(a=!1);else{var e=ko.validation.group(b,{deep:!1}),f=ko.validation.group(b.selection,{deep:!1});e().length+f().length>0&&(e.showAllMessages(),f.showAllMessages(),a=!1)}return a},b.value.extend({required:{message:"Enter Value",onlyIf:function(){return"exists"!==b.operation()}}}),a.model&&b.prefill(a.model)},ConditionGroup=function(a){var b=this;b.level=a.level,b.conditions=ko.observableArray(),b.isTopLevel=!0,//self.trace = ko.observableArray();
//self.currentBinding = ko.observable(self);
//self.boldExpression = ko.observable(false);
// self.currentBinding.subscribeChanged(function(newValue, oldValue){
//     newValue.boldExpression(true);
//     oldValue.boldExpression(false);
// });
//var goingback = false;
//self.boldExpression = ko.observable(false);
b.getModel=function(){var a=[];return _.each(b.conditions(),function(b){a.push(b.getModel())}),a},// self.onExpand = function(condition){
//     var currBinding = self.currentBinding();
//     self.trace.push(currBinding);
//     self.currentBinding(condition);
// };
b.prefill=function(c){b.conditions(ko.utils.arrayMap(c,function(b){return new Condition({level:a.level+1,model:b})}))},b.addCondition=function(){b.conditions.push(new Condition({level:a.level+1}))},b.removeCondition=function(a){b.conditions.remove(a)},b.clear=function(){b.conditions([])},b.afterRender=function(){},b.beforeLeave=function(){},b.afterAdd=function(a){1===a.nodeType&&$(a).hide().slideDown(100,function(){$(a).show()})},b.beforeRemove=function(a){1===a.nodeType&&$(a).slideUp(100,function(){$(a).remove()})},// self.goback = function(condition){
//     var isValid = !condition.isComplex() || condition.isValidCondition();
//     if(isValid){
//         goingback = true;
//         $('#conditionWrapper').removeClass('enter-no-tr');
//         _.delay(function(){
//             $('#conditionWrapper').removeClass('enter');
//             _.delay(function(){
//                 var prev = self.trace.pop();
//                 self.currentBinding(prev);
//             },100);                
//         }, 10);            
//     }
// };
// self.goBackTopLevel = function(){
//     self.trace([]);
//     goingback = true;
//     $('#conditionWrapper').removeClass('enter-no-tr');
//     _.delay(function(){
//         $('#conditionWrapper').removeClass('enter');
//         _.delay(function(){
//             self.currentBinding(self);
//         },100);                
//     }, 10);
// };
b.expression=ko.computed(function(){var a="",c=b.conditions();return _.each(c,function(b,c){a+=0===c?b.expression():" "+b.logic()+" "+b.expression()}),a})},Selection=function(a){var b=this;b.level=a.level,b.renderType=a.renderType,b.logic=ko.observable("+"),b.selections=ko.observableArray(),b.aliasName=ko.observable(),b.groupBy=ko.observable(),b.perc=ko.observable(),b.selectedProp=ko.observable(),b.addSelection=function(){b.selections.push(new Selection({level:a.level+1,renderType:"childSelection"}))},b.removeSelection=function(a){b.selections.remove(a)},b.showPercentChange=ko.computed(function(){return"topSelection"===b.renderType&&drata.global.trackingChartTypes.indexOf(drata.cPanel.widgetEditor.segment.chartType())>-1?!0:(b.perc(!1),!1)}),b.isComplex=ko.computed(function(){return b.selections().length>0}),b.showComplex=ko.observable(!1),b.hideComplex=ko.computed(function(){return!b.showComplex()}),//self.renderType = renderType;
b.toggleComplex=function(){if(b.showComplex(!b.showComplex()),b.showComplex()&&!b.isComplex()){var c=b.selectedProp();c&&b.selections.push(new Selection({level:a.level+1,model:{selectedProp:c},renderType:"childSelection"})),b.selectedProp(void 0)}},b.selectedProp.subscribe(function(a){void 0===a||b.isComplex()||b.selections([])}),b.clearGroups=function(){b.selections([]),b.selectedProp(void 0),b.showComplex(!1),b.selectedProp.isModified(!1)},b.done=function(){var a=ko.validation.group(b,{deep:!0});a().length>0?a.showAllMessages():b.isComplex()&&(b.showComplex(!1),b.selectedProp(b.aliasName()))},b.afterAdd=function(a){1===a.nodeType&&$(a).hide().slideDown(100,function(){$(a).show()})},b.beforeRemove=function(a){1===a.nodeType&&$(a).slideUp(100,function(){$(a).remove()})},b.prefill=function(c){b.aliasName(c.aliasName),b.logic(c.logic||"+"),b.groupBy(c.groupBy),b.perc(c.perc),b.selectedProp(c.selectedProp),b.selections(ko.utils.arrayMap(c.groups,function(b){return new Selection({level:a.level+1,model:b,renderType:"childSelection"})}))},b.getModel=function(){var a=[];return _.each(b.selections(),function(b){a.push(b.getModel())}),{groupType:"selection",groups:a,logic:b.logic(),aliasName:b.aliasName(),groupBy:b.groupBy(),selectedProp:b.selectedProp(),isComplex:b.isComplex(),perc:b.perc()}},b.expression=ko.computed(function(){var a="";if(!b.isComplex())return b.selectedProp()?b.selectedProp():"__";var c=b.selections();return _.each(c,function(b,c){a+=0===c?b.expression():" "+b.logic()+" "+b.expression()}),a="("+a+")"}),b.selectedProp.extend({required:{message:"Select property",onlyIf:function(){return!b.isComplex()}}}),b.aliasName.extend({required:{message:"Select alias",onlyIf:function(){return"topSelection"===a.renderType&&b.isComplex()}}}),a.model&&b.prefill(a.model)},SelectionGroup=function(a){var b=this;b.items=ko.observableArray(),b.addItem=function(){b.items.push(new Selection({level:a.level+1,model:void 0,renderType:"topSelection"}))},b.removeItem=function(a){b.items.remove(a)},b.prefill=function(c){return 0===c.length?(b.items([]),void b.addItem()):void b.items(ko.utils.arrayMap(c,function(b){return new Selection({level:a.level+1,model:b,renderType:"topSelection"})}))},b.afterAdd=function(a){1===a.nodeType&&$(a).hide().slideDown(100,function(){$(a).show()})},b.beforeRemove=function(a){1===a.nodeType&&$(a).slideUp(100,function(){$(a).remove()})},b.getModel=function(){var a=[];return _.each(b.items(),function(b){a.push(b.getModel())}),a},b.expression=ko.computed(function(){var a,c=[],d=b.items();return _.each(d,function(b){a=b.expression(),"value"!==b.groupBy()&&(a=drata.utils.format(b.isComplex()?"<em>{0}</em>{1}":"<em>{0}</em>({1})",b.groupBy(),a)),c.push(a)}),"Select "+c.join(", ")})},DataRetriever={getData:function(a,b){var c={chartType:a.segment.chartType,selection:a.segment.selection,dataGroup:a.segment.dataGroup,dataFilter:a.segment.dataFilter,group:a.segment.group};drata.apiClient.getData(c,{dataSource:a.dataSource,database:a.database,collectionName:a.collectionName},function(a){b&&b(a)})}};!function(a,b){"use strict";var c=function(a){var c=this;c.name=b.observable();var e;c.index=1,c.loading=b.observable(!0),c.widgets=b.observableArray(),c.dashboardNotFound=b.observable(),c.loadDashboard=function(f){a=f,drata.apiClient.getDashboard(a,function(f){var g=f.result;//dashboardId = d._id;
//socket
return g&&f.success?(c.name(g.name),drata.cPanel.topBar.currentDashboardName(g.name),drata.cPanel.theme(g.theme),e=g.theme,drata.apiClient.getWidgetsOfDashboard(g._id,function(a){var e=0,f=a.result;c.loading(!1),f=f.sort(function(a,b){return a.displayIndex-b.displayIndex}),c.widgets(b.utils.arrayMap(f,function(a){return new d(a,c.index++)})),_.each(c.widgets(),function(a){a.displayIndex(e),e++})}),void drata.nsx.dashboardSyncService.listenWidgetCreated(a)):void c.dashboardNotFound(!0)})},c.noWidgets=b.computed(function(){return 0===c.widgets().length&&!c.loading()}),c.loadWidget=function(a,b){b&&b.loadWidget(),$(document).foundation()},c.addWidget=function(a){var b=new d(a,c.index++);c.widgets.push(b),console.log("widget added to dashboard")},c.deleteWidget=function(a){confirm("This will permanently remove this Widget. Do you wish to Continue ?")&&(a.remove(),c.widgets.remove(a))},c.getId=function(){return a},c.update=function(){if(!c.dashboardNotFound()){var b={name:c.name(),_id:a,theme:e};drata.apiClient.upsertDashboard(b)}},drata.pubsub.subscribe("themechanged",function(a,b){b!==e&&(e=b,c.update())}),c.loadDashboard(a)},d=function(a,c,d){var k,l=this;l.previewMode=d,l.widgetId="widget"+c,l.displayIndex=b.observable(a.displayIndex),l.pieKeys=b.observableArray([]),l.selectedPieKey=b.observable();var m=b.observable(a.name||"New widget"),n=b.observable(a.sizex),o=b.observable(a.sizey);l.name=b.computed({read:function(){return m()},write:function(a){m(a),l.update()}}),l.sizex=b.computed({read:function(){return n()},write:function(a){console.log("sizex saved in db"),n(a),l.update(),l.resizeContent()}}),l.sizey=b.computed({read:function(){return o()},write:function(a){o(a),console.log("sizey saved in db"),l.update(),l.resizeContent()}}),// self.sizex = ko.observable(widgetModel.sizex || 4);
// self.sizey = ko.observable(widgetModel.sizey || 2);
l.widgetClass=b.computed(function(){return d?"widget-size-4":"widget-size-"+l.sizex()}),l.getId=function(){return a._id},l.parseError=b.observable(),l.widgetLoading=b.observable(!0),l.chartType=b.observable(a.segmentModel.chartType),l.logoClass=b.computed(function(){switch(l.chartType()){case"line":return"icon-statistics";case"area":return"icon-graph";case"pie":return"icon-pie";case"bar":return"icon-bars2";case"scatter":return"icon-air";case"numeric":return"icon-uniE650"}}),l.widgetHeight=b.computed(function(){if(d)return 300;var a=($(window).height()-45-45*l.sizey())/l.sizey();return a=Math.max(200,a)}),l.update=function(){if(!d){var a=l.getModel();a._id&&drata.apiClient.updateWidget(a,function(){console.log("widget updated")})}};var p;l.contentTemplate=b.computed(function(){var a={index:c,widgetUpdate:l.update.bind(l)};switch(l.chartType()){case"line":p=new e(a);break;case"area":p=new i(a);break;case"pie":p=new j(a);break;case"bar":p=new h(a);break;case"scatter":p=new g(a);break;case"numeric":p=new f(a)}return{name:p.template,data:p}}),l.editWidget=function(){location.hash="#editwidget/"+l.getId()};var q=void 0,r=!0;l.resizeContent=function(){q&&clearTimeout(q),r&&p&&p.resize&&!l.parseError()&&(q=setTimeout(p.resize,500))},l.clearTimeouts=function(){r=!1,q&&clearTimeout(q)},l.loadWidget=function(b){b&&(a=b);var c=a.sizex!==n()||a.sizey!==o();n(a.sizex),o(a.sizey),m(a.name),c&&l.resizeContent(),l.parseError(void 0),l.chartType(a.segmentModel.chartType),console.log("loadWidget"),DataRetriever.getData({dataSource:a.dataSource,database:a.database,collectionName:a.selectedDataKey,segment:a.segmentModel},function(b){if(!b.success)return void l.parseError(b.message);k=b.result;var c;c="pie"===a.segmentModel.chartType?k[0].values:k;var d=c.map(function(a,b){return{label:a.key,value:b}});l.pieKeys(d),l.widgetLoading(!1),drata.pubsub.subscribe("resizewidgets",l.resizeContent.bind(l))})},l.getModel=function(){return a.sizex=l.sizex(),a.sizey=l.sizey(),a.displayIndex=l.displayIndex(),a.name=l.name(),p&&p.getModel&&(a.contentModel=p.getModel()),a},l.selectedPieKey.subscribe(function(b){b&&("pie"===a.segmentModel.chartType?p&&p.change&&p.change(k[0],a.segmentModel,a.contentModel,b):p&&p.change&&p.change(k[b.value],a.segmentModel,a.contentModel))}),// self.updatePosition = function(){
//     var model = {
//         sizex : self.sizex(),
//         sizey: self.sizey(),
//         name: self.name(),
//         displayIndex: self.displayIndex(),
//         _id: widgetModel._id
//     };
//     drata.apiClient.updateWidget(model);
// };
l.remove=function(){l.clearTimeouts(),drata.apiClient.deleteWidget(a._id)},l.displayIndex.subscribe(function(){l.update()}),d||(drata.nsx.dashboardSyncService.listenWidgetUpdated(a._id),drata.nsx.dashboardSyncService.listenWidgetRemoved(a._id))},e=function(a){var b=this;b.widgetContentId="widgetContent"+a.index,b.template="content-template";var c;b.drawChart=function(a,d){c=drata.charts.lineChart().xAxisType(d.dataGroup.xAxisType).dateInterval(d.dataGroup.timeseriesInterval).includeDataMarkers(!1),d3.select("#"+b.widgetContentId+" svg").datum(a.values).call(c)},b.resize=function(){c&&c.resize&&c.resize()},b.change=function(a,d){c?c.change&&c.change(a.values):b.drawChart(a,d)}},f=function(a){var c=this;c.widgetContentId="widgetContent"+a.index,c.template="numeric-content-template";var d,e,f;c.remainingDataPoints=b.observableArray(),c.dataKeys=b.observableArray(),c.selectedDataKeys=b.observableArray(),c.latestDp=b.observable(),c.lastButOneDp=b.observable(),c.initialDp=b.observable(),c.currentDataKey=b.observable(""),c.backgroundChartType=b.observable();var g={},h=[],i=[],j=function(){return drata.utils.getTextFormat({formatType:f.dataGroup.xAxisType,formatSubType:f.dataGroup.timeseriesInterval})},k=function(){return drata.utils.getTextFormat({formatType:"numeric"})};c.selectedDataKeys.subscribe(function(a){var b=a.map(function(a){return a.value});if(c.currentDataKey(a.map(function(a){return a.key}).join(" + ")),0!==b.length){for(var d=_.difference(h,b),j=_.difference(b,h),k=0;k<j.length;k++)h.push(j[k]),_.each(e[j[k]].values,function(a){g[a.x]||(g[a.x]=0),g[a.x]+=a.y});for(var k=0;k<d.length;k++)h.splice(h.indexOf(d[k]),1),_.each(e[d[k]].values,function(a){//if(!combinedObj[dp.x]) combinedObj[dp.x] = 0;
g[a.x]-=a.y});var n=[];"date"===f.dataGroup.xAxisType?_.each(g,function(a,b){n.push({x:new Date(+b),y:a})}):_.each(g,function(a,b){n.push({x:+b,y:a})}),n.sort(function(a,b){return a.x-b.x}),i=n.slice(),l(),m(c.backgroundChartType())}}),c.mainHeading=b.computed(function(){return c.latestDp()?c.latestDp().yLabel:""}),c.subHeading=b.computed(function(){return c.currentDataKey()&&c.latestDp()?drata.utils.format("{0} for {1}",c.currentDataKey(),c.latestDp().xLabel):""}),c.totalPerChange=b.computed(function(){return c.latestDp()?drata.utils.percChange(c.latestDp().y,c.initialDp().y):void 0});c.drawChart=function(a,b,d){e=a.values,f=b,c.backgroundChartType(d&&d.backgroundChartType?d.backgroundChartType:"area"),c.dataKeys(e.map(function(a,b){return{key:a.key,value:b}})),g={},h=[],c.selectedDataKeys(c.dataKeys())};var l=function(){var a=i[0].y,b=j(),d=k(),e=i.map(function(c){var e={x:c.x,y:c.y,yLabel:d(c.y),xLabel:b(c.x),perc:drata.utils.percChange(c.y,a)};return a=c.y,e});c.initialDp(e[0]),c.latestDp(e.pop()),c.remainingDataPoints(e.reverse()),c.lastButOneDp(e[0])};c.setChartBackground=function(b){c.backgroundChartType(b),m(),a.widgetUpdate&&a.widgetUpdate()};// self.backgroundChartType.subscribe(function(newValue){
// });
var m=function(){var a,b=j();switch(i=i.map(function(a){return delete a.key,a}),c.backgroundChartType()){case"line":d=drata.charts.lineChart().drawLabels(!1).xAxisType(f.dataGroup.xAxisType).dateInterval(f.dataGroup.timeseriesInterval).drawXAxis(!1).drawYAxis(!0),a=[{key:c.currentDataKey(),values:i.slice()}];break;case"area":d=drata.charts.areaChart().drawLabels(!1).includeDataMarkers(!1).xAxisType(f.dataGroup.xAxisType).dateInterval(f.dataGroup.timeseriesInterval).drawXAxis(!1).drawYAxis(!0),a=[{key:c.currentDataKey(),values:i.slice()}];break;case"bar":a=[{key:c.currentDataKey(),values:i.map(function(a){return{key:b(a.x),value:+a.y}})}],d=drata.charts.barChart().drawLabels(!1).drawXAxis(!1).drawYAxis(!1);break;case"pie":a={key:c.currentDataKey(),values:i.map(function(a){return{key:b(a.x),value:+a.y}})},d=drata.charts.pieChart().drawOuterLabels(!1)}d3.select("#"+c.widgetContentId+" svg").remove(),d3.select("#"+c.widgetContentId).append("svg"),d3.select("#"+c.widgetContentId+" svg").datum(a).call(d)};c.resize=function(){var a=c.latestDp();c.latestDp(void 0),//dummy(dummy() +1);
d&&d.resize&&d.resize(),console.log("resizing"),c.latestDp(a)},c.change=function(a,b,d){b&&c.drawChart(a,b,d)},c.getModel=function(){return{backgroundChartType:c.backgroundChartType()}}},g=function(a){var b=this;b.widgetContentId="widgetContent"+a.index,b.template="content-template";var c;b.drawChart=function(a,d){return c=drata.charts.scatterPlot().xAxisType(d.dataGroup.xAxisType).dateInterval(d.dataGroup.timeseriesInterval),d3.select("#"+b.widgetContentId+" svg").datum(a.values).call(c),c},b.resize=function(){c&&c.resize&&c.resize()},b.change=function(a,d){c?c.change&&c.change(a.values):b.drawChart(a,d)}},h=function(a){var b=this;b.widgetContentId="widgetContent"+a.index,b.template="content-template",b.contentType="bar";var c;b.drawChart=function(a){c=drata.charts.barChart().showBarLabels(!0),d3.select("#"+b.widgetContentId+" svg").datum(a.values).call(c)},b.resize=function(){c&&c.resize&&c.resize()},b.change=function(a,d){c?c.change&&c.change(a.values):b.drawChart(a,d)}},i=function(a){var b=this;b.widgetContentId="widgetContent"+a.index,b.template="content-template";var c;b.drawChart=function(a,d){c=drata.charts.areaChart().xAxisType(d.dataGroup.xAxisType).dateInterval(d.dataGroup.timeseriesInterval).includeDataMarkers(!1),d3.select("#"+b.widgetContentId+" svg").datum(a.values).call(c)},b.resize=function(){c&&c.resize&&c.resize()},b.change=function(a,d){c?c.change&&c.change(a.values):b.drawChart(a,d)}},j=function(a){var b=this;b.widgetContentId="widgetContent"+a.index,b.contentType="pie",b.template="content-template";var c;b.drawChart=function(a){c=drata.charts.pieChart(),d3.select("#"+b.widgetContentId+" svg").datum(a.values[0]).call(c)},b.resize=function(){c&&c.resize&&c.resize()},b.change=function(a,d,e,f){c?c.change&&c.change(a.values[f.value]):b.drawChart(a,d)}};a.drata.ns("dashboard").extend({dashboard:c,widget:d})}(this,ko),function(a){var b={randomData:function(a,b,c,d){a=a||1,d=d||0,b=b||1,c=c||1;for(var e=[],f=1;a>=f;f++){for(var g=[],h=d,i=b;c>=i;i++)h+=10*Math.random()-i%10,g.push({key:i,value:+h.toFixed(0)});e.push({values:g,key:"key "+f})}return e},randomxy:function(a,b,c){for(var d=[],e=0;a>e;e++)d.push({x:e,y:c+(10*Math.random()-5)});return d},radomPieData:function(a,b){for(var c=[],d=0;a>d;d++){for(var e=[],f=0;b>f;f++)e.push({key:"key-"+d+"."+f,value:Math.floor(100*Math.random())+20});c.push({key:"key-"+d,values:e})}return c},_randomProps:void 0,randomProps:function(a){if(this._randomProps)return this._randomProps;a=a||10;for(var b=[],c=[0,0,0,0,0,0,0],d=1,e=["texas","Alabama","Misissipi","Arizona","Minnesota"],f=["blue","gray","black","white","purple"],g=new Date,h=0;a>=h;h++){for(var i=0;i<c.length;i++)c[i]+=Math.floor(10*Math.random()-h%10);//y += (Math.random() * 10 - j%10);
d=10+3*Math.floor(h/3),// 3 items per order
b.push({//ordernumber : ordernumber,
//item : items[Math.floor(Math.random() * items.length)],
price:100*Math.abs(c[0]),geography:e[Math.floor(Math.random()*e.length)],timestamp:g.setHours(g.getHours()+h),//timestamp : j * 100,
sex:10*Math.random()>5?"female":"male",//itemsex :  Math.random() * 10 > 6 ? 'female': 'male',
//hasCoupon :  Math.random() * 10 > 7,
//discount: Math.abs(Math.floor(y[1])),
color:f[Math.abs(Math.floor(c[1]%5))],errorCount:Math.abs(Math.floor(c[2]%10)),//pageLoadTime : Math.abs(Math.floor(y[3])) * 500,
tax:8*Math.abs(c[0]),shippingPrice:12*Math.abs(c[0])})}return this._randomProps=b,this._randomProps}};a.drata.ns("utils").extend({tempdata:b})}(this),function(a){var b={},c=-1,d=function(a,d){b[a]||(b[a]=[]);var e=(++c).toString();return b[a].push({token:e,func:d}),e},e=function(a,c){return b[a]?(setTimeout(function(){for(var d=b[a],e=d?d.length:0;e--;)d[e].func(a,c)},0),!0):!1},f=function(a){for(var c in b)if(b[c])for(var d=0,e=b[c].length;e>d;d++)if(b[c][d].token===a)return b[c].splice(d,1),a;return!1};a.drata.ns("pubsub").extend({unsubscribe:f,publish:e,subscribe:d})}(this),function(a){var b=function(b,c){var d,e,f=[],g=!1;a(document).keydown(function(a){g&&console.log("key code "+a.which),b.indexOf(a.keyCode)>-1&&-1===f.indexOf(a.keyCode)?d?(e=+new Date,500>e-d?(f.push(a.keyCode),d=+new Date,g&&console.log("listening")):(g&&console.log("too late"),f=[],f.push(a.keyCode),d=+new Date,g&&console.log("first")),f.length===b.length&&(f=[],d=void 0,c&&c())):(d=+new Date,f=[],f.push(a.keyCode),g&&console.log("first")):(g&&console.log("lost ",f.join(",")),f=[],d=void 0)})};b([91,16,39],function(){a("body").addClass("campfire")}),b([17,16,39],function(){a("body").addClass("campfire")}),b([91,16,37],function(){a("body").removeClass("campfire")}),b([17,16,37],function(){a("body").removeClass("campfire")})}(jQuery),function(){var a=function(){var a=this,c=ko.observableArray();a.notifications=ko.computed({read:function(){var a=c().slice(0);return a.reverse()},write:function(){throw"You cannot add notifications directly. call addNotification()"}}),a.addNotification=function(d){c().length>4&&c.shift();var e=new b(d);c.push(e),d.displayTimeout>0&&setTimeout(a.removeNotification.bind(a,e),d.displayTimeout)},a.removeNotification=function(a){c.remove(a)},a.notifRendered=function(a){1===a.nodeType&&$(a).hide().slideDown()},a.befor=function(a){1===a.nodeType&&$(a).slideUp(function(){$(a).remove()})},//helper methods
a.notifyWidgetAdded=function(b){a.addNotification({title:"widget added",message:"A new widget has been added. Please update your view.",type:"info",onConfirm:b.onConfirm,removeOnConfirm:!0})},a.notifyWidgetUpdated=function(b){a.addNotification({title:"widget updated",message:"widget: <strong> <em>"+b.name+"</em></strong> has been updated. Please update your view.",type:"info",onConfirm:b.onConfirm,removeOnConfirm:!0})},a.notifyWidgetRemoved=function(b){a.addNotification({title:"widget removed",message:"widget: <strong> <em>"+b.name+"</em></strong> has been removed. None of your changes to that widget will be saved.",type:"info",confirmText:"remove",onConfirm:b.onConfirm,removeOnConfirm:!0})}},b=function(a){var b=this;b.title=a.title,b.message=a.message,b.confirmText=a.confirmText||"confirm",b.onConfirm=a.onConfirm,b.removeOnConfirm=a.removeOnConfirm,b.getClass=function(){return a.type}};drata.ns("nsx").extend({notifier:new a})}(this),function(a,b){var c=b.observableArray(),d=[],e=b.observableArray();drata.apiClient.getAllDashboards(function(a){len=a.result.length,e(a.result),_.each(a.result,function(a){drata.apiClient.getAllTagsOfDashboard(a._id,function(b){len--,0===b.result.length?d.push({tagName:"__",dashboardName:a.name,dashboardId:a._id}):_.each(b.result,function(b){b.dashboardName=a.name,d.push(b)}),0===len&&c(d)})})});var f=b.computed(function(){return _.uniq(c().map(function(a){return a.tagName})).filter(function(a){return"__"!==a})}),g=function(){function a(a,b){var c=drata.cPanel.currentDashboard();if(c&&(!b||c.getId()===b)){var d=c.widgets().filter(function(b){return b.getId()===a});return d.length>0?d[0]:void 0}}var b=this,c=io.connect();b.listenWidgetUpdated=function(b){c.on("widgetupdated"+b,function(b){var c=a(b.widgetId,b.dashboardId);c&&drata.nsx.notifier.notifyWidgetUpdated({name:c.name(),onConfirm:function(){drata.apiClient.getWidget(b.widgetId,function(a){a.success&&c.loadWidget(a.result)})}})})},b.listenWidgetCreated=function(a){c.on("widgetcreated"+a,function(a){var b=drata.cPanel.currentDashboard();b.getId()===a.dashboardId&&drata.nsx.notifier.notifyWidgetAdded({onConfirm:function(){drata.apiClient.getWidget(a.widgetId,function(a){a.success&&b.addWidget(a.result)})}})})},b.listenWidgetRemoved=function(b){c.on("widgetremoved"+b,function(b){var c=a(b.widgetId);c&&drata.nsx.notifier.notifyWidgetRemoved({name:c.name(),onConfirm:function(){c.clearTimeouts(),drata.cPanel.currentDashboard().widgets.remove(c),c=void 0}})})},drata.pubsub.subscribe("widgetupdate",function(b,c){c._id&&drata.apiClient.updateWidget(c,function(){var b=a(c._id,c.dashboardId);b&&b.loadWidget(c),drata.nsx.notifier.addNotification({message:"widget: "+c.name+" updated successfully",type:"success",displayTimeout:3e3})})}),drata.pubsub.subscribe("widgetcreate",function(a,b){var c=drata.cPanel.currentDashboard();c&&(b.dashboardId=c.getId(),delete b.dateCreated,delete b._id,b.displayIndex=c.widgets().length+1,drata.apiClient.addWidget(b,function(a){a.success&&(b=a.result,console.log("widget created in db"),c.addWidget(b))}))})},h=function(){function a(){c&&clearTimeout(c),c=setTimeout(drata.pubsub.publish("resizewidgets"),200),e=!0}var c,d=this,e=!1;d.currentDashboard=b.observable(),d.topBar=new r,d.dashboardManager=new i,d.widgetEditor=new k,d.widgetManager=new l,d.dashboardCreator=new q,d.theme=b.observable("default"),d.theme.subscribe(function(a){drata.pubsub.publish("themechanged",a)}),d.removeTag=function(a){var b=drata.models.tagList().filter(function(b){return b.tagName===a.tagName&&b.dashboardId===a.dashboardId});if(1===b.length){if(drata.models.tagList.remove(b[0]),!b[0]._id)return;drata.apiClient.removeTag(b[0]._id)}};var f=b.observable(),g=b.computed({read:function(){return f()},write:function(a){f(a.replace("#",""))}}),h={manage:{name:"manage",hash:"manage",displayText:"Manage Dashboard"},editwidget:{name:"editwidget",hash:"editwidget",displayText:"Widget Editor"},managewidgets:{name:"managewidgets",hash:"managewidgets",displayText:"Manage Widgets"},create:{name:"create",hash:"create",displayText:"Create Dashboard"},dashboardview:{name:"dashboardview",hash:"",displayText:""},defaultview:{name:"defaultview",hash:"",displayText:"Create or Manage Dashboards"}},j=window.location.pathname.split("/")[2];if(j){var m=new drata.dashboard.dashboard(j);d.currentDashboard(m)}d.displayMode=b.computed(function(){var a,b=g()?g().split("/"):[""];switch(b[0]){case h.manage.hash:a=h.manage;break;case h.editwidget.hash:a=h.editwidget,b[1]&&drata.apiClient.getWidget(b[1],function(a){a.success&&drata.pubsub.publish("widgetedit",{widgetModel:a.result})});break;case h.managewidgets.hash:a=h.managewidgets;break;case h.create.hash:a=h.create;break;default:a=j?h.dashboardview:h.defaultview}return a}),d.isDashboardView=b.computed(function(){return d.displayMode()===h.dashboardview}),d.isWidgetEditorView=b.computed(function(){return d.displayMode()===h.editwidget}),d.isDashboardCreatorView=b.computed(function(){return d.displayMode()===h.create}),d.isDashboardManagerView=b.computed(function(){return d.displayMode()===h.manage}),d.isWidgetManagerView=b.computed(function(){return d.displayMode()===h.managewidgets}),d.isDefaultView=b.computed(function(){return d.displayMode()===h.defaultview});var n=[];d.isDashboardView.subscribe(function(b){n.length<3&&n.push(b),3==n.length&&n.shift(),!n[0]&&n[1]&&e&&(a(),e=!1)}),d.isWidgetNavVisible=b.computed(function(){return d.isDashboardView()&&!d.currentDashboard().dashboardNotFound()}),d.handleCloseView=function(){d.isWidgetEditorView()?d.widgetEditor.widgetCancel():location.hash="#"},g(location.hash),window.onhashchange=function(){g(location.hash)},drata.utils.windowResize(function(){a(),d.isDashboardView()&&(e=!1)})},i=function(){var a=this;a.dashboards=b.observableArray(),a.chosenTags=b.observableArray(),a.closeDashboardManager=function(){$("#dashboardManager").removeClass("showme")},a.filteredDashboards=b.computed(function(){var b=a.chosenTags(),c=[],d=b.indexOf("untagged")>-1;return 0===b.length?a.dashboards():a.dashboards().filter(function(a){return c=a.tagList.tagList().map(function(a){return a.tagName}),0===c.length&&d||_.intersection(c,b).length>0})}).extend({rateLimit:500}),a.deleteDashboard=function(b){confirm("Deleting Dashboard will delete all the widgets and tags associated. Do you wish to Continue?")&&(drata.apiClient.deleteDashboard(b._id,function(){a.dashboards.remove(b)}),drata.apiClient.deleteAllTagsDashboard(b._id,function(){console.log("tags deleted")}),drata.apiClient.deleteAllWidgetsDashboard(b._id,function(){console.log("widgets deleted")}))};var c=function(c){a.dashboards([]),a.dashboards(b.utils.arrayMap(c,function(a){return new m(a)}))};c(drata.models.dashboardList()),drata.models.dashboardList.subscribe(c);var d=!1;a.toggleAllTags=function(){return d=!d,a.chosenTags(d?drata.models.tagNameList():[]),!0}},j=function(){var a=this,c=b.observableArray();a.allProperties=b.computed(function(){return c().map(function(a){return a.name})}),a.dateProperties=b.computed(function(){return c().filter(function(a){return"date"===a.type}).map(function(a){return a.name})}),a.nonDateProperties=b.computed(function(){return c().filter(function(a){return"date"!==a.type}).map(function(a){return a.name})}),a.numericProperties=b.computed(function(){return c().filter(function(a){return"numeric"===a.type}).map(function(a){return a.name})}),a.setPropertyTypes=function(a){var b=[];for(var d in a)a.hasOwnProperty(d)&&b.push({name:d,type:a[d]});c(b)},a.getPropertyType=function(a){var b=c().filter(function(b){return b.name===a});return b.length>0?b[0].type:void 0},a.setPropertyType=function(b,d){var e=a.getPropertyType(b);e&&e!==d&&c(c().map(function(a){return a.name===b&&(a.type=d),a}))},a.resetProperties=function(){c([])}},k=function(){var a=this;//self.widgetName = ko.observable();
a.addUpdateBtnText=b.observable("Save"),a.processSegment=!0,a.dataKeys=b.observableArray(),a.selectedDataKey=b.observable(),a.dataSource=b.observable(),a.dataSourceNames=b.observableArray(),a.databaseNames=b.observableArray(),a.database=b.observable(),a.parseError=b.observable(),//self.propertyTypes = ko.observable();
a.previewWidget=b.observable();var c={};a.name=b.observable(),a.sizex=b.observable("4"),a.sizey=b.observable("1"),a.dataSource.subscribe(function(b){b?(c.dataSource!==b&&(c.dataSource=b,c.database=void 0),drata.apiClient.getDatabaseNames(b,function(b){a.databaseNames(b.result),a.database(c.database)})):(a.databaseNames([]),a.database(void 0))}),a.database.subscribe(function(b){b&&a.dataSource()?(c.database!==b&&(c.database=b,c.selectedDataKey=void 0),drata.apiClient.getDataKeys({dataSource:a.dataSource(),database:b},function(b){a.dataKeys(b.result),a.selectedDataKey(c.selectedDataKey)})):(a.dataKeys([]),a.selectedDataKey(void 0))}),a.selectedDataKey.subscribe(function(b){b&&a.dataSource()&&a.database()?(c.selectedDataKey!==b&&(c.segmentModel=void 0,c.selectedDataKey=b),drata.apiClient.getUniqueProperties({dataSource:a.dataSource(),database:a.database(),collectionName:b},function(b){drata.dashboard.propertyManager.setPropertyTypes(b.result),a.segment.initialize(c.segmentModel)})):drata.dashboard.propertyManager.resetProperties()}),drata.apiClient.getDataSourceNames(function(b){a.dataSourceNames(b.result)}),a.segment=new Segmentor,a.notifyWidget=function(){if(c.segmentModel=a.segment.getModel(),c.segmentModel){c.dataSource=a.dataSource(),c.database=a.database(),c.selectedDataKey=a.selectedDataKey();//placing sizex,name, sizey here doest set those in clone
//model for some reason
var b=a.previewWidget();if(b){var d=b.getModel();d.contentModel&&(c.contentModel=d.contentModel),b.clearTimeouts()}var e=!c._id;//im just setting them here.
c.sizex=a.sizex(),c.sizey=a.sizey(),c.name=a.name()||"New widget",e?drata.pubsub.publish("widgetcreate",c):drata.pubsub.publish("widgetupdate",c),c={},a.onWidgetUpdate=void 0,a.onWidgetCancel=void 0,a.addUpdateBtnText("Save"),a.dataSource(void 0),a.name(void 0),a.sizex("4"),a.sizey("1"),a.previewWidget(void 0),location.hash=""}},a.attach=function(b,d){c=drata.utils.clone(d.widgetModel),a.dataSource(c.dataSource),a.name(c.name),a.sizex(c.sizex),a.sizey(c.sizey),a.addUpdateBtnText("Update Widget"),a.previewWidget(new drata.dashboard.widget(c,100,!0))},a.widgetCancel=function(){a.parseError(void 0),a.onWidgetUpdate=void 0,a.onWidgetCancel=void 0,a.addUpdateBtnText("Add Widget"),a.dataSource(void 0),location.hash="";var b=a.previewWidget();b&&b.clearTimeouts(),a.previewWidget(void 0),c={}},a.preview=function(){var b=a.segment.getModel();b&&a.previewWidget(new drata.dashboard.widget({name:a.name(),dataSource:a.dataSource(),database:a.database(),segmentModel:b,selectedDataKey:a.selectedDataKey()},100,!0))},//this is for widget preview. since, its parent is widgeteditor, we need
//this method here.
a.loadWidget=function(a,b){b&&b.loadWidget(),$(document).foundation()},drata.pubsub.subscribe("widgetedit",a.attach)},l=function(){this.widgetList=b.observableArray(),this.bindWidgets=function(a){drata.apiClient.getWidgets(a,function(a){this.widgetList(b.utils.arrayMap(a.result,function(a){return new p(a,{chooseWidgets:!0})}))}.bind(this))},this.chosenChartTypes=b.observableArray(),this.chosenWidgets=b.observableArray(),this.addWidgets=function(){var a=this.chosenWidgets();_.each(a,function(a){console.log("cloning widget");var b=a.getModel();drata.pubsub.publish("widgetcreate",b)},this),this.chosenWidgets([]),location.hash=""};var a=!1;this.toggleAllChosenWidgets=function(){return a=!a,this.chosenWidgets(a?this.widgetList():[]),!0};var c=b.computed(function(){var a=this.chosenChartTypes();if(a&&0!==a.length){var b=[{property:"segmentModel.chartType",operator:"$in",value:a}];return b}},this).extend({throttle:500});c.subscribe(this.bindWidgets.bind(this),this),this.bindWidgets()},m=function(a,c){c=c||{},a=a||{},this._id=a._id,this.name=b.observable(a.name),this.dateCreated=drata.utils.formatDate(new Date(a.dateCreated)),this.dateUpdated=drata.utils.formatDate(new Date(a.dateUpdated)),this.url="/dashboard/"+a._id,this.widgetList=b.observableArray(),this.tagList=new n({dashboardId:a._id,name:this.name}),this.bindWidgets=function(c){return d?void(c&&c.call(this,this.widgetList())):void drata.apiClient.getWidgetsOfDashboard(a._id,function(a){this.widgetList(b.utils.arrayMap(a.result,function(a){return new p(a)})),d=!0,c&&c.call(this,this.widgetList())}.bind(this))},this.toggleExtendedDetails=b.observable(!1);var d;this.viewDetails=function(a,b){return b.target.href?!0:void this.toggleExtendedDetails(!this.toggleExtendedDetails())},this.name.subscribe(function(b){a.name=b,drata.apiClient.upsertDashboard(a)}),this.cloneDashboard=function(){this.bindWidgets(function(a){drata.pubsub.publish("onDashboardClone",{tagList:this.tagList.tagList(),widgetList:a,name:this.name()})}.bind(this))}.bind(this),c.bindWidgets&&this.bindWidgets(),this.toggleExtendedDetails.subscribe(function(a){a&&!d&&this.bindWidgets()},this)},n=function(a){this.newTag=b.observable(),this.addingTag=b.observable(!1),this.addTag=function(){var b={tagName:this.newTag(),dashboardId:a.dashboardId};drata.apiClient.addTag(b,function(c){c.success&&(b.dashboardName=a.name(),drata.models.tagList.push(b)),this.newTag(void 0),this.addingTag(!1)}.bind(this))}.bind(this),this.tagList=b.computed(function(){return drata.models.tagList().filter(function(b){return b.dashboardId===a.dashboardId&&"__"!==b.tagName},this)},this),this.toggleTagInput=function(a){this.addingTag(a)},this.availableTags=b.computed(function(){var a=this.tagList().map(function(a){return a.tagName});return _.difference(drata.models.tagNameList(),a)},this);var c=function(a){var a=drata.models.tagList().filter(function(b){return b.tagName===a.tagName&&b.dashboardId===a.dashboardId});0!==a.length&&drata.models.tagList.remove(a[0])};this.removeTag=function(a){return a._id?void drata.apiClient.removeTag(a._id,c.bind(this,a)):void c(a)}.bind(this)},o=function(){this.newTag=b.observable(),this.addingTag=b.observable(!1),this.tagList=b.observableArray(),this.addTag=function(){this.tagList.push({tagName:this.newTag()}),this.newTag(void 0),this.addingTag(!1)}.bind(this),this.toggleTagInput=function(a){this.addingTag(a)},this.availableTags=b.computed(function(){var a=this.tagList().map(function(a){return a.tagName});return _.difference(drata.models.tagNameList(),a)},this),this.removeTag=function(a){this.tagList.remove(a)}.bind(this)},p=function(a,c){c=c||{},this.chooseWidgets=c.chooseWidgets,this.name=b.observable(a.name),this._id=a._id,this.chartType=a.segmentModel.chartType,this.selectedDataKey=a.selectedDataKey,this.dateUpdated=drata.utils.formatDate(new Date(a.dateUpdated)),this.viewDetails=b.observable(!1),this.toggleExtendedDetails=function(){this.viewDetails(!this.viewDetails())},this.manageUrl="#editwidget/"+a._id,this.selectionsExpression=drata.utils.selectionsExpression(a.segmentModel.selection,!0),this.conditionsExpression=drata.utils.conditionsExpression(a.segmentModel.group)||"none",this.dataFilterExpression=drata.utils.getDataFilterExpression(a.segmentModel.dataFilter),this.getModel=function(){return a}},q=function(){var a=this;a.name=b.observable(),a.tags=new o,a.widgetList=b.observableArray(),a.chosenWidgets=b.observableArray(),a.selectAll=b.observable(),this.upsertDashboard=function(){var b={name:this.name(),theme:"default"};drata.apiClient.upsertDashboard(b,function(b){var c=b.result._id,d=a.tags.tagList(),e=a.chosenWidgets(),f=0,g=d.length+e.length;if(0===g)window.location.href="/dashboard/"+c;else{var h=function(){f++,f===g&&(window.location.href="/dashboard/"+c)}.bind(this);_.each(d,function(a){a.dashboardId=c,delete a.dateCreated,drata.apiClient.addTag(a,h)}),_.each(e,function(a){var b=a.getModel();b.dashboardId=c,delete b.dateCreated,delete b.dateUpdated,delete b._id,drata.apiClient.upsertWidget(b,h)})}}.bind(this))},drata.pubsub.subscribe("onDashboardClone",function(b,c){a.name(c.name),a.widgetList(c.widgetList||[]),a.tags.tagList(c.tagList.map(function(a){return{tagName:a.tagName}})),a.selectAll(!0),location.hash="create"}),a.selectAll.subscribe(function(b){a.chosenWidgets(b?a.widgetList():[])})},r=function(){var a=this;a.manageDashboards=function(){location.hash="manage"},a.taggedList=b.observableArray(),a.untaggedList=b.observableArray(),drata.models.tagList.subscribe(function(b){var c=_.groupBy(b,function(a){return a.tagName});for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];"__"===d?a.untaggedList(e):a.taggedList.push({tagName:d,dashboards:e})}}),a.currentDashboardName=b.observable("Dashboards")};a.drata.ns("dashboard").extend({controlPanel:h,propertyManager:new j}),a.drata.ns("nsx").extend({dashboardSyncService:new g}),a.drata.ns("models").extend({tagList:c,dashboardList:e,tagNameList:f}),a.drata.ns("globalsettings").extend({enableToolTips:b.observable()})}(this,ko),function(a){var b={servername:"<p>This dropdown is populated from the server names you added to the config file.</p>",databasename:"<p>All the databases found in the server selected above.</p>",collectionname:'<p>In relational databases, this refers to the table you can connect to for pulling data. In document oriented databases, this refers to the collection.</p><div class="alert-box secondary">Drata doesn\'t have the ability to join on multiple collections. You will have to de-normalize your data incase your collection has foriegn key reference. Sorry pal!</div>',selectionsInfo:["<p>Selection is the property that you select for visualization.<br />","Depending on the type of chart and aggregations, your selections end ","up together as one visualization or seperated out in a chart</p>"].join(""),aggregationFunction:"<p>Specifies the aggregate function to be applied on your selection. This is essential to visualize aggregations. Options include <em>value, count, sum, min and max</em>. By default <em>value</em> is selected which means that there is no aggregate function. The other options pretty much self implies their purpose.</p>",selectionProperty:'<p> A list of properties are shown in the dropdown. For schema less datasources, drata might not be able to find all the properties, since that requires a full scan of the collection. In such cases, you will have to type the name manually. <br /> "<span class="icon-plus"></span>" converts the selection into a compound selection, which lets you apply arithmetic operation on 2 or more properties. </p>',percentChange:"<p>When checked, percent change is calculated between the current value of your selection and the previous value of that selection.  </p>",xaxis:"<p>The x-axis can be any numeric or date property. <br />You cannot have string/varchar property because it doesn't make sense :-) <br />For added convenience, you can see that x-axis property type dropdown supports \"currency\", which just means that the chart will show x-axis formatted as currency, for all other purposes it is treated as number. <br />When a property type is selected, the textbox dropdown combo filters the properties based on their type. <br />You may specify a property that is not in the dropdown, because it is possible that drata doesn't show all the properties of your collection. This happens with schema-less/document based datasources like MongoDb, it is impossible to keep track of all the properties of all the items in a collection. <br /> However in Ms Sql server, drata will be able to find all the properties of the table being visualized.</p>",splitby:'<p>This is technically a "groupby", but rather than aggregating selections, this will split the results into separate components in chart. <br />So if you are visualizing the number of checkouts per hour, you may split this by "region", which will show you the trend in number of checkouts per region.</p>',interval:"<p>If the type of property is of type numeric, you should specify a numeric interval to perform aggregation upon.<br />If the type of property is of type date, the interval format would be in hours, minutes, seconds, days, month, quarter, year.<br />If the property is of type string , no interval is required.</p> <h6>Formatting the date intervals:</h6> <p>h => hour, m => minute, s => second, w => week, d => day<br /></p><h6>Examples:</h6><p>1h2m => 1 hour + 2 minutes<br />1d2h3m => 1 day + 2 hours + 3 minutes.<br />You may also select <em>quarter, year, month</em>.<br />These three intervals are static, you can't add numbers to them. <br />For example, You can't do <em>2quarter, 2year, 2month.</em></p>",groupby:'<p><em>Groupby</em> groups the results by the property you select in conjunction with the aggregate functions specified in the <span style="font-weight:bold">Selections</span> above.<br /> You may group results by string, numeric, or date property.<br /> For date property, you have to select a date interval. <br />For numeric property, you have to enter a numeric value for interval. <br />Check out the "Interval" help for further explanation about choosing intervals. </p><div class="alert-box secondary"> If you need to group by a numeric value of type "enum" or an Identifier, Ex: UserTypeId, you can treat it as a string, by selecting "string" in the dropdown. This way, drata will treat the property as string and will not need an interval.</div>',groupby2:"<p><em>groupby level 2</em>, as the name specifies, is the second level aggregation applied within the result groups made by the intial <em>Groupby</em>.<br /> Same rules apply for selecting intervals. <br />Although it is a perfectly valid usecase to have more than 2 levels of <em>groupby</em>, for simplicity, drata allows only 2 levels of aggregation for now. <br />If you have a need to apply more deeper aggregations, you can restrict charts with conditions to exclude a certain group, and build another chart with that excluded group.</p>",dateproperty:'<p>the main date property that you use to filter out results. This can be the date created or any other date property that will be used as a top level filter. <br /> You may specify this date as part of <span style="font-weight:bold">Conditions</span> as well.</p>',slidingInterval:"<p>When selected, you will see a slider and a dropdown. The dropdown signifies whether the interval being set is of type <em>minute, hours, months or years.</em>, while you can use the slider to set a range.<br /> This functionality set a dynamic interval which will cause the results to change over time.</p>",staticInterval:"<p>A static interval that does not change over time.</p>",dataFilterExpression:"<p>This expression is dynamically generated based on the interval you selected.</p>",conditionValue:"<p>The dropdown specifies whether the value you entered should be treated as <em>numeric, boolean, string or date.</em> The dropdown value gets preselected whenever you select a property against which the condition is set. You can always override the default type in the dropdown.</p>",complexCondition:'<p>"<span class="icon-plus"></span>" Converts a simple condition for example <em>(a > b)</em> into a complex condition for example <em> (a > b or (c < d && e = f))</em>.<br /> This allows you to group conditions. </p>',conditionSummary:"<p>This summary is a sql representation of conditions you build. It is generated dynamically as you build the conditions</p>"};a.drata.ns("nsx").extend({toolTipContent:b})}(this);